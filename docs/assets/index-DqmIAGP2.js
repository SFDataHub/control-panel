(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();var Dd={exports:{}},Ul={};var zy;function BE(){if(zy)return Ul;zy=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(r,o,c){var m=null;if(c!==void 0&&(m=""+c),o.key!==void 0&&(m=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:s,type:r,key:m,ref:o!==void 0?o:null,props:c}}return Ul.Fragment=t,Ul.jsx=a,Ul.jsxs=a,Ul}var Py;function zE(){return Py||(Py=1,Dd.exports=BE()),Dd.exports}var d=zE(),Id={exports:{}},Se={};var Hy;function PE(){if(Hy)return Se;Hy=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),C=Symbol.iterator;function U(L){return L===null||typeof L!="object"?null:(L=C&&L[C]||L["@@iterator"],typeof L=="function"?L:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,j={};function F(L,J,ie){this.props=L,this.context=J,this.refs=j,this.updater=ie||B}F.prototype.isReactComponent={},F.prototype.setState=function(L,J){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,J,"setState")},F.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function ee(){}ee.prototype=F.prototype;function se(L,J,ie){this.props=L,this.context=J,this.refs=j,this.updater=ie||B}var de=se.prototype=new ee;de.constructor=se,P(de,F.prototype),de.isPureReactComponent=!0;var Te=Array.isArray;function re(){}var I={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function N(L,J,ie){var ce=ie.ref;return{$$typeof:s,type:L,key:J,ref:ce!==void 0?ce:null,props:ie}}function O(L,J){return N(L.type,J,L.props)}function M(L){return typeof L=="object"&&L!==null&&L.$$typeof===s}function k(L){var J={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ie){return J[ie]})}var x=/\/+/g;function ge(L,J){return typeof L=="object"&&L!==null&&L.key!=null?k(""+L.key):J.toString(36)}function Be(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(re,re):(L.status="pending",L.then(function(J){L.status==="pending"&&(L.status="fulfilled",L.value=J)},function(J){L.status==="pending"&&(L.status="rejected",L.reason=J)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function X(L,J,ie,ce,_e){var Ne=typeof L;(Ne==="undefined"||Ne==="boolean")&&(L=null);var je=!1;if(L===null)je=!0;else switch(Ne){case"bigint":case"string":case"number":je=!0;break;case"object":switch(L.$$typeof){case s:case t:je=!0;break;case E:return je=L._init,X(je(L._payload),J,ie,ce,_e)}}if(je)return _e=_e(L),je=ce===""?"."+ge(L,0):ce,Te(_e)?(ie="",je!=null&&(ie=je.replace(x,"$&/")+"/"),X(_e,J,ie,"",function(Sn){return Sn})):_e!=null&&(M(_e)&&(_e=O(_e,ie+(_e.key==null||L&&L.key===_e.key?"":(""+_e.key).replace(x,"$&/")+"/")+je)),J.push(_e)),1;je=0;var mt=ce===""?".":ce+":";if(Te(L))for(var tt=0;tt<L.length;tt++)ce=L[tt],Ne=mt+ge(ce,tt),je+=X(ce,J,ie,Ne,_e);else if(tt=U(L),typeof tt=="function")for(L=tt.call(L),tt=0;!(ce=L.next()).done;)ce=ce.value,Ne=mt+ge(ce,tt++),je+=X(ce,J,ie,Ne,_e);else if(Ne==="object"){if(typeof L.then=="function")return X(Be(L),J,ie,ce,_e);throw J=String(L),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return je}function ae(L,J,ie){if(L==null)return L;var ce=[],_e=0;return X(L,ce,"","",function(Ne){return J.call(ie,Ne,_e++)}),ce}function ue(L){if(L._status===-1){var J=L._result;J=J(),J.then(function(ie){(L._status===0||L._status===-1)&&(L._status=1,L._result=ie)},function(ie){(L._status===0||L._status===-1)&&(L._status=2,L._result=ie)}),L._status===-1&&(L._status=0,L._result=J)}if(L._status===1)return L._result.default;throw L._result}var Ve=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},He={map:ae,forEach:function(L,J,ie){ae(L,function(){J.apply(this,arguments)},ie)},count:function(L){var J=0;return ae(L,function(){J++}),J},toArray:function(L){return ae(L,function(J){return J})||[]},only:function(L){if(!M(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Se.Activity=S,Se.Children=He,Se.Component=F,Se.Fragment=a,Se.Profiler=o,Se.PureComponent=se,Se.StrictMode=r,Se.Suspense=y,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Se.__COMPILER_RUNTIME={__proto__:null,c:function(L){return I.H.useMemoCache(L)}},Se.cache=function(L){return function(){return L.apply(null,arguments)}},Se.cacheSignal=function(){return null},Se.cloneElement=function(L,J,ie){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ce=P({},L.props),_e=L.key;if(J!=null)for(Ne in J.key!==void 0&&(_e=""+J.key),J)!w.call(J,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&J.ref===void 0||(ce[Ne]=J[Ne]);var Ne=arguments.length-2;if(Ne===1)ce.children=ie;else if(1<Ne){for(var je=Array(Ne),mt=0;mt<Ne;mt++)je[mt]=arguments[mt+2];ce.children=je}return N(L.type,_e,ce)},Se.createContext=function(L){return L={$$typeof:m,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:c,_context:L},L},Se.createElement=function(L,J,ie){var ce,_e={},Ne=null;if(J!=null)for(ce in J.key!==void 0&&(Ne=""+J.key),J)w.call(J,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(_e[ce]=J[ce]);var je=arguments.length-2;if(je===1)_e.children=ie;else if(1<je){for(var mt=Array(je),tt=0;tt<je;tt++)mt[tt]=arguments[tt+2];_e.children=mt}if(L&&L.defaultProps)for(ce in je=L.defaultProps,je)_e[ce]===void 0&&(_e[ce]=je[ce]);return N(L,Ne,_e)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(L){return{$$typeof:g,render:L}},Se.isValidElement=M,Se.lazy=function(L){return{$$typeof:E,_payload:{_status:-1,_result:L},_init:ue}},Se.memo=function(L,J){return{$$typeof:v,type:L,compare:J===void 0?null:J}},Se.startTransition=function(L){var J=I.T,ie={};I.T=ie;try{var ce=L(),_e=I.S;_e!==null&&_e(ie,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(re,Ve)}catch(Ne){Ve(Ne)}finally{J!==null&&ie.types!==null&&(J.types=ie.types),I.T=J}},Se.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Se.use=function(L){return I.H.use(L)},Se.useActionState=function(L,J,ie){return I.H.useActionState(L,J,ie)},Se.useCallback=function(L,J){return I.H.useCallback(L,J)},Se.useContext=function(L){return I.H.useContext(L)},Se.useDebugValue=function(){},Se.useDeferredValue=function(L,J){return I.H.useDeferredValue(L,J)},Se.useEffect=function(L,J){return I.H.useEffect(L,J)},Se.useEffectEvent=function(L){return I.H.useEffectEvent(L)},Se.useId=function(){return I.H.useId()},Se.useImperativeHandle=function(L,J,ie){return I.H.useImperativeHandle(L,J,ie)},Se.useInsertionEffect=function(L,J){return I.H.useInsertionEffect(L,J)},Se.useLayoutEffect=function(L,J){return I.H.useLayoutEffect(L,J)},Se.useMemo=function(L,J){return I.H.useMemo(L,J)},Se.useOptimistic=function(L,J){return I.H.useOptimistic(L,J)},Se.useReducer=function(L,J,ie){return I.H.useReducer(L,J,ie)},Se.useRef=function(L){return I.H.useRef(L)},Se.useState=function(L){return I.H.useState(L)},Se.useSyncExternalStore=function(L,J,ie){return I.H.useSyncExternalStore(L,J,ie)},Se.useTransition=function(){return I.H.useTransition()},Se.version="19.2.0",Se}var Fy;function Cf(){return Fy||(Fy=1,Id.exports=PE()),Id.exports}var R=Cf(),Md={exports:{}},kl={},Od={exports:{}},Vd={};var qy;function HE(){return qy||(qy=1,(function(s){function t(X,ae){var ue=X.length;X.push(ae);e:for(;0<ue;){var Ve=ue-1>>>1,He=X[Ve];if(0<o(He,ae))X[Ve]=ae,X[ue]=He,ue=Ve;else break e}}function a(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ae=X[0],ue=X.pop();if(ue!==ae){X[0]=ue;e:for(var Ve=0,He=X.length,L=He>>>1;Ve<L;){var J=2*(Ve+1)-1,ie=X[J],ce=J+1,_e=X[ce];if(0>o(ie,ue))ce<He&&0>o(_e,ie)?(X[Ve]=_e,X[ce]=ue,Ve=ce):(X[Ve]=ie,X[J]=ue,Ve=J);else if(ce<He&&0>o(_e,ue))X[Ve]=_e,X[ce]=ue,Ve=ce;else break e}}return ae}function o(X,ae){var ue=X.sortIndex-ae.sortIndex;return ue!==0?ue:X.id-ae.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var m=Date,g=m.now();s.unstable_now=function(){return m.now()-g}}var y=[],v=[],E=1,S=null,C=3,U=!1,B=!1,P=!1,j=!1,F=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function de(X){for(var ae=a(v);ae!==null;){if(ae.callback===null)r(v);else if(ae.startTime<=X)r(v),ae.sortIndex=ae.expirationTime,t(y,ae);else break;ae=a(v)}}function Te(X){if(P=!1,de(X),!B)if(a(y)!==null)B=!0,re||(re=!0,k());else{var ae=a(v);ae!==null&&Be(Te,ae.startTime-X)}}var re=!1,I=-1,w=5,N=-1;function O(){return j?!0:!(s.unstable_now()-N<w)}function M(){if(j=!1,re){var X=s.unstable_now();N=X;var ae=!0;try{e:{B=!1,P&&(P=!1,ee(I),I=-1),U=!0;var ue=C;try{t:{for(de(X),S=a(y);S!==null&&!(S.expirationTime>X&&O());){var Ve=S.callback;if(typeof Ve=="function"){S.callback=null,C=S.priorityLevel;var He=Ve(S.expirationTime<=X);if(X=s.unstable_now(),typeof He=="function"){S.callback=He,de(X),ae=!0;break t}S===a(y)&&r(y),de(X)}else r(y);S=a(y)}if(S!==null)ae=!0;else{var L=a(v);L!==null&&Be(Te,L.startTime-X),ae=!1}}break e}finally{S=null,C=ue,U=!1}ae=void 0}}finally{ae?k():re=!1}}}var k;if(typeof se=="function")k=function(){se(M)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,ge=x.port2;x.port1.onmessage=M,k=function(){ge.postMessage(null)}}else k=function(){F(M,0)};function Be(X,ae){I=F(function(){X(s.unstable_now())},ae)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(X){X.callback=null},s.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<X?Math.floor(1e3/X):5},s.unstable_getCurrentPriorityLevel=function(){return C},s.unstable_next=function(X){switch(C){case 1:case 2:case 3:var ae=3;break;default:ae=C}var ue=C;C=ae;try{return X()}finally{C=ue}},s.unstable_requestPaint=function(){j=!0},s.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ue=C;C=X;try{return ae()}finally{C=ue}},s.unstable_scheduleCallback=function(X,ae,ue){var Ve=s.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Ve+ue:Ve):ue=Ve,X){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=ue+He,X={id:E++,callback:ae,priorityLevel:X,startTime:ue,expirationTime:He,sortIndex:-1},ue>Ve?(X.sortIndex=ue,t(v,X),a(y)===null&&X===a(v)&&(P?(ee(I),I=-1):P=!0,Be(Te,ue-Ve))):(X.sortIndex=He,t(y,X),B||U||(B=!0,re||(re=!0,k()))),X},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(X){var ae=C;return function(){var ue=C;C=ae;try{return X.apply(this,arguments)}finally{C=ue}}}})(Vd)),Vd}var $y;function FE(){return $y||($y=1,Od.exports=HE()),Od.exports}var Ld={exports:{}},Yt={};var Gy;function qE(){if(Gy)return Yt;Gy=1;var s=Cf();function t(y){var v="https://react.dev/errors/"+y;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)v+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+y+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(y,v,E){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:y,containerInfo:v,implementation:E}}var m=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,v){if(y==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Yt.createPortal=function(y,v){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(t(299));return c(y,v,null,E)},Yt.flushSync=function(y){var v=m.T,E=r.p;try{if(m.T=null,r.p=2,y)return y()}finally{m.T=v,r.p=E,r.d.f()}},Yt.preconnect=function(y,v){typeof y=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,r.d.C(y,v))},Yt.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},Yt.preinit=function(y,v){if(typeof y=="string"&&v&&typeof v.as=="string"){var E=v.as,S=g(E,v.crossOrigin),C=typeof v.integrity=="string"?v.integrity:void 0,U=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;E==="style"?r.d.S(y,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:S,integrity:C,fetchPriority:U}):E==="script"&&r.d.X(y,{crossOrigin:S,integrity:C,fetchPriority:U,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Yt.preinitModule=function(y,v){if(typeof y=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var E=g(v.as,v.crossOrigin);r.d.M(y,{crossOrigin:E,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&r.d.M(y)},Yt.preload=function(y,v){if(typeof y=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var E=v.as,S=g(E,v.crossOrigin);r.d.L(y,E,{crossOrigin:S,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Yt.preloadModule=function(y,v){if(typeof y=="string")if(v){var E=g(v.as,v.crossOrigin);r.d.m(y,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:E,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else r.d.m(y)},Yt.requestFormReset=function(y){r.d.r(y)},Yt.unstable_batchedUpdates=function(y,v){return y(v)},Yt.useFormState=function(y,v,E){return m.H.useFormState(y,v,E)},Yt.useFormStatus=function(){return m.H.useHostTransitionStatus()},Yt.version="19.2.0",Yt}var Ky;function $E(){if(Ky)return Ld.exports;Ky=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Ld.exports=qE(),Ld.exports}var Qy;function GE(){if(Qy)return kl;Qy=1;var s=FE(),t=Cf(),a=$E();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function m(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function y(e){if(c(e)!==e)throw Error(r(188))}function v(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(r(188));return n!==e?null:e}for(var i=e,l=n;;){var h=i.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){i=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===i)return y(h),e;if(f===l)return y(h),n;f=f.sibling}throw Error(r(188))}if(i.return!==l.return)i=h,l=f;else{for(var _=!1,T=h.child;T;){if(T===i){_=!0,i=h,l=f;break}if(T===l){_=!0,l=h,i=f;break}T=T.sibling}if(!_){for(T=f.child;T;){if(T===i){_=!0,i=f,l=h;break}if(T===l){_=!0,l=f,i=h;break}T=T.sibling}if(!_)throw Error(r(189))}}if(i.alternate!==l)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:n}function E(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=E(e),n!==null)return n;e=e.sibling}return null}var S=Object.assign,C=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),se=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function k(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var x=Symbol.for("react.client.reference");function ge(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===x?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case P:return"Fragment";case F:return"Profiler";case j:return"StrictMode";case Te:return"Suspense";case re:return"SuspenseList";case N:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case B:return"Portal";case se:return e.displayName||"Context";case ee:return(e._context.displayName||"Context")+".Consumer";case de:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case I:return n=e.displayName||null,n!==null?n:ge(e.type)||"Memo";case w:n=e._payload,e=e._init;try{return ge(e(n))}catch{}}return null}var Be=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},Ve=[],He=-1;function L(e){return{current:e}}function J(e){0>He||(e.current=Ve[He],Ve[He]=null,He--)}function ie(e,n){He++,Ve[He]=e.current,e.current=n}var ce=L(null),_e=L(null),Ne=L(null),je=L(null);function mt(e,n){switch(ie(Ne,n),ie(_e,e),ie(ce,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?uy(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=uy(n),e=cy(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}J(ce),ie(ce,e)}function tt(){J(ce),J(_e),J(Ne)}function Sn(e){e.memoizedState!==null&&ie(je,e);var n=ce.current,i=cy(n,e.type);n!==i&&(ie(_e,e),ie(ce,i))}function kn(e){_e.current===e&&(J(ce),J(_e)),je.current===e&&(J(je),Ml._currentValue=ue)}var ca,Y;function Ee(e){if(ca===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);ca=n&&n[1]||"",Y=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ca+e+Y}var st=!1;function Nt(e,n){if(!e||st)return"";st=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(K){var G=K}Reflect.construct(e,[],te)}else{try{te.call()}catch(K){G=K}e.call(te.prototype)}}else{try{throw Error()}catch(K){G=K}(te=e())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),_=f[0],T=f[1];if(_&&T){var D=_.split(`
`),$=T.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===$.length)for(l=D.length-1,h=$.length-1;1<=l&&0<=h&&D[l]!==$[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==$[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==$[h]){var Z=`
`+D[l].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=l&&0<=h);break}}}finally{st=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ee(i):""}function qa(e,n){switch(e.tag){case 26:case 27:case 5:return Ee(e.type);case 16:return Ee("Lazy");case 13:return e.child!==n&&n!==null?Ee("Suspense Fallback"):Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 15:return Nt(e.type,!1);case 11:return Nt(e.type.render,!1);case 1:return Nt(e.type,!0);case 31:return Ee("Activity");default:return""}}function co(e){try{var n="",i=null;do n+=qa(e,i),i=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var xs=Object.prototype.hasOwnProperty,Hi=s.unstable_scheduleCallback,ws=s.unstable_cancelCallback,Cc=s.unstable_shouldYield,Lr=s.unstable_requestPaint,Ut=s.unstable_now,ho=s.unstable_getCurrentPriorityLevel,Rt=s.unstable_ImmediatePriority,Dt=s.unstable_UserBlockingPriority,ha=s.unstable_NormalPriority,fo=s.unstable_LowPriority,Ur=s.unstable_IdlePriority,jc=s.log,Fi=s.unstable_setDisableYieldValue,$a=null,Kt=null;function An(e){if(typeof jc=="function"&&Fi(e),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode($a,e)}catch{}}var en=Math.clz32?Math.clz32:mo,Dc=Math.log,kr=Math.LN2;function mo(e){return e>>>=0,e===0?32:31-(Dc(e)/kr|0)|0}var qi=256,Kn=262144,Ga=4194304;function Bn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xn(e,n,i){var l=e.pendingLanes;if(l===0)return 0;var h=0,f=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?h=Bn(l):(_&=T,_!==0?h=Bn(_):i||(i=T&~e,i!==0&&(h=Bn(i))))):(T=l&~f,T!==0?h=Bn(T):_!==0?h=Bn(_):i||(i=l&~e,i!==0&&(h=Bn(i)))),h===0?0:n!==0&&n!==h&&(n&f)===0&&(f=h&-h,i=n&-n,f>=i||f===32&&(i&4194048)!==0)?n:h}function Ka(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Ns(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Br(){var e=Ga;return Ga<<=1,(Ga&62914560)===0&&(Ga=4194304),e}function da(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function Qa(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function kt(e,n,i,l,h,f){var _=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var T=e.entanglements,D=e.expirationTimes,$=e.hiddenUpdates;for(i=_&~i;0<i;){var Z=31-en(i),te=1<<Z;T[Z]=0,D[Z]=-1;var G=$[Z];if(G!==null)for($[Z]=null,Z=0;Z<G.length;Z++){var K=G[Z];K!==null&&(K.lane&=-536870913)}i&=~te}l!==0&&zr(e,l,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(_&~n))}function zr(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-en(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|i&261930}function Ya(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var l=31-en(i),h=1<<l;h&n|e[l]&n&&(e[l]|=n),i&=~h}}function Xa(e,n){var i=n&-n;return i=(i&42)!==0?1:Pr(i),(i&(e.suspendedLanes|n))!==0?0:i}function Pr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Hr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function fa(){var e=ae.p;return e!==0?e:(e=window.event,e===void 0?32:My(e.type))}function po(e,n){var i=ae.p;try{return ae.p=e,n()}finally{ae.p=i}}var Qn=Math.random().toString(36).slice(2),ut="__reactFiber$"+Qn,Bt="__reactProps$"+Qn,Yn="__reactContainer$"+Qn,Za="__reactEvents$"+Qn,Xn="__reactListeners$"+Qn,go="__reactHandles$"+Qn,Fr="__reactResources$"+Qn,ma="__reactMarker$"+Qn;function $i(e){delete e[ut],delete e[Bt],delete e[Za],delete e[Xn],delete e[go]}function pa(e){var n=e[ut];if(n)return n;for(var i=e.parentNode;i;){if(n=i[Yn]||i[ut]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=yy(e);e!==null;){if(i=e[ut])return i;e=yy(e)}return n}e=i,i=e.parentNode}return null}function ga(e){if(e=e[ut]||e[Yn]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Gi(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function zn(e){var n=e[Fr];return n||(n=e[Fr]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function pt(e){e[ma]=!0}var Rs=new Set,Ja={};function tn(e,n){Zn(e,n),Zn(e+"Capture",n)}function Zn(e,n){for(Ja[e]=n,e=0;e<n.length;e++)Rs.add(n[e])}var Ic=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qr={},$r={};function yo(e){return xs.call($r,e)?!0:xs.call(qr,e)?!1:Ic.test(e)?$r[e]=!0:(qr[e]=!0,!1)}function Wa(e,n,i){if(yo(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function ei(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function wn(e,n,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+l)}}function nn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vo(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Mc(e,n,i){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,f=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(_){i=""+_,f.call(this,_)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(_){i=""+_},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Cs(e){if(!e._valueTracker){var n=vo(e)?"checked":"value";e._valueTracker=Mc(e,n,""+e[n])}}function Gr(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),l="";return e&&(l=vo(e)?e.checked?"true":"false":e.value),e=l,e!==i?(n.setValue(e),!0):!1}function js(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ya=/[\n"\\]/g;function ct(e){return e.replace(ya,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ti(e,n,i,l,h,f,_,T){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),n!=null?_==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+nn(n)):e.value!==""+nn(n)&&(e.value=""+nn(n)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),n!=null?Ds(e,_,nn(n)):i!=null?Ds(e,_,nn(i)):l!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+nn(T):e.removeAttribute("name")}function Ki(e,n,i,l,h,f,_,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){Cs(e);return}i=i!=null?""+nn(i):"",n=n!=null?""+nn(n):i,T||n===e.value||(e.value=n),e.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=T?e.checked:!!l,e.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),Cs(e)}function Ds(e,n,i){n==="number"&&js(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Fe(e,n,i,l){if(e=e.options,n){n={};for(var h=0;h<i.length;h++)n["$"+i[h]]=!0;for(i=0;i<e.length;i++)h=n.hasOwnProperty("$"+e[i].value),e[i].selected!==h&&(e[i].selected=h),h&&l&&(e[i].defaultSelected=!0)}else{for(i=""+nn(i),n=null,h=0;h<e.length;h++){if(e[h].value===i){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function Qi(e,n,i){if(n!=null&&(n=""+nn(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+nn(i):""}function ni(e,n,i,l){if(n==null){if(l!=null){if(i!=null)throw Error(r(92));if(Be(l)){if(1<l.length)throw Error(r(93));l=l[0]}i=l}i==null&&(i=""),n=i}i=nn(n),e.defaultValue=i,l=e.textContent,l===i&&l!==""&&l!==null&&(e.value=l),Cs(e)}function Nn(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Oc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kr(e,n,i){var l=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,i):typeof i!="number"||i===0||Oc.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function _o(e,n,i){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&i[h]!==l&&Kr(e,h,l)}else for(var f in n)n.hasOwnProperty(f)&&Kr(e,f,n[f])}function Qr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jn(e){return Lc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function It(){}var Is=null;function Ms(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var va=null,mn=null;function bo(e){var n=ga(e);if(n&&(e=n.stateNode)){var i=e[Bt]||null;e:switch(e=n.stateNode,n.type){case"input":if(ti(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+ct(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var l=i[n];if(l!==e&&l.form===e.form){var h=l[Bt]||null;if(!h)throw Error(r(90));ti(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<i.length;n++)l=i[n],l.form===e.form&&Gr(l)}break e;case"textarea":Qi(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&Fe(e,!!i.multiple,n,!1)}}}var Yr=!1;function Eo(e,n,i){if(Yr)return e(n,i);Yr=!0;try{var l=e(n);return l}finally{if(Yr=!1,(va!==null||mn!==null)&&(yu(),va&&(n=va,e=mn,mn=va=null,bo(n),e)))for(n=0;n<e.length;n++)bo(e[n])}}function ln(e,n){var i=e.stateNode;if(i===null)return null;var l=i[Bt]||null;if(l===null)return null;i=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,n,typeof i));return i}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xr=!1;if(Pn)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){Xr=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{Xr=!1}var pn=null,Os=null,ea=null;function ai(){if(ea)return ea;var e,n=Os,i=n.length,l,h="value"in pn?pn.value:pn.textContent,f=h.length;for(e=0;e<i&&n[e]===h[e];e++);var _=i-e;for(l=1;l<=_&&n[i-l]===h[f-l];l++);return ea=h.slice(e,1<l?1-l:void 0)}function Yi(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ii(){return!0}function nt(){return!1}function Qt(e){function n(i,l,h,f,_){this._reactName=i,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(i=e[T],this[T]=i?i(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ii:nt,this.isPropagationStopped=nt,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),n}var _a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xi=Qt(_a),si=S({},_a,{view:0,detail:0}),To=Qt(si),ri,Vs,an,Zi=S({},si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==an&&(an&&e.type==="mousemove"?(ri=e.screenX-an.screenX,Vs=e.screenY-an.screenY):Vs=ri=0,an=e),ri)},movementY:function(e){return"movementY"in e?e.movementY:Vs}}),So=Qt(Zi),Ji=S({},Zi,{dataTransfer:0}),Ao=Qt(Ji),Zr=S({},si,{relatedTarget:0}),li=Qt(Zr),xo=S({},_a,{animationName:0,elapsedTime:0,pseudoElement:0}),Ls=Qt(xo),Uc=S({},_a,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wo=Qt(Uc),Wi=S({},_a,{data:0}),Jr=Qt(Wi),No={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},el={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ro(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=el[e])?!!n[e]:!1}function oi(){return Ro}var Co=S({},si,{key:function(e){if(e.key){var n=No[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Yi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oi,charCode:function(e){return e.type==="keypress"?Yi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jo=Qt(Co),ba=S({},Zi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tl=Qt(ba),Do=S({},si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oi}),Io=Qt(Do),Mo=S({},_a,{propertyName:0,elapsedTime:0,pseudoElement:0}),Us=Qt(Mo),sn=S({},Zi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Oo=Qt(sn),Vo=S({},_a,{newState:0,oldState:0}),ui=Qt(Vo),u=[9,13,27,32],p=Pn&&"CompositionEvent"in window,b=null;Pn&&"documentMode"in document&&(b=document.documentMode);var A=Pn&&"TextEvent"in window&&!b,H=Pn&&(!p||b&&8<b&&11>=b),Q=" ",oe=!1;function Qe(e,n){switch(e){case"keyup":return u.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ce=!1;function Mt(e,n){switch(e){case"compositionend":return bt(n);case"keypress":return n.which!==32?null:(oe=!0,Q);case"textInput":return e=n.data,e===Q&&oe?null:e;default:return null}}function Ot(e,n){if(Ce)return e==="compositionend"||!p&&Qe(e,n)?(e=ai(),ea=Os=pn=null,Ce=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return H&&n.locale!=="ko"?null:n.data;default:return null}}var ci={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function on(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!ci[e.type]:n==="textarea"}function es(e,n,i,l){va?mn?mn.push(l):mn=[l]:va=l,n=Au(n,"onChange"),0<n.length&&(i=new Xi("onChange","change",null,i,l),e.push({event:i,listeners:n}))}var Ea=null,nl=null;function d0(e){ay(e,0)}function Lo(e){var n=Gi(e);if(Gr(n))return e}function Tm(e,n){if(e==="change")return n}var Sm=!1;if(Pn){var kc;if(Pn){var Bc="oninput"in document;if(!Bc){var Am=document.createElement("div");Am.setAttribute("oninput","return;"),Bc=typeof Am.oninput=="function"}kc=Bc}else kc=!1;Sm=kc&&(!document.documentMode||9<document.documentMode)}function xm(){Ea&&(Ea.detachEvent("onpropertychange",wm),nl=Ea=null)}function wm(e){if(e.propertyName==="value"&&Lo(nl)){var n=[];es(n,nl,e,Ms(e)),Eo(d0,n)}}function f0(e,n,i){e==="focusin"?(xm(),Ea=n,nl=i,Ea.attachEvent("onpropertychange",wm)):e==="focusout"&&xm()}function m0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lo(nl)}function p0(e,n){if(e==="click")return Lo(n)}function g0(e,n){if(e==="input"||e==="change")return Lo(n)}function y0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var gn=typeof Object.is=="function"?Object.is:y0;function al(e,n){if(gn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),l=Object.keys(n);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var h=i[l];if(!xs.call(n,h)||!gn(e[h],n[h]))return!1}return!0}function Nm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rm(e,n){var i=Nm(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=n&&l>=n)return{node:i,offset:n-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Nm(i)}}function Cm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Cm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function jm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=js(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=js(e.document)}return n}function zc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var v0=Pn&&"documentMode"in document&&11>=document.documentMode,ks=null,Pc=null,il=null,Hc=!1;function Dm(e,n,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Hc||ks==null||ks!==js(l)||(l=ks,"selectionStart"in l&&zc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),il&&al(il,l)||(il=l,l=Au(Pc,"onSelect"),0<l.length&&(n=new Xi("onSelect","select",null,n,i),e.push({event:n,listeners:l}),n.target=ks)))}function ts(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var Bs={animationend:ts("Animation","AnimationEnd"),animationiteration:ts("Animation","AnimationIteration"),animationstart:ts("Animation","AnimationStart"),transitionrun:ts("Transition","TransitionRun"),transitionstart:ts("Transition","TransitionStart"),transitioncancel:ts("Transition","TransitionCancel"),transitionend:ts("Transition","TransitionEnd")},Fc={},Im={};Pn&&(Im=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function ns(e){if(Fc[e])return Fc[e];if(!Bs[e])return e;var n=Bs[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in Im)return Fc[e]=n[i];return e}var Mm=ns("animationend"),Om=ns("animationiteration"),Vm=ns("animationstart"),_0=ns("transitionrun"),b0=ns("transitionstart"),E0=ns("transitioncancel"),Lm=ns("transitionend"),Um=new Map,qc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qc.push("scrollEnd");function Hn(e,n){Um.set(e,n),tn(n,[e])}var Uo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Rn=[],zs=0,$c=0;function ko(){for(var e=zs,n=$c=zs=0;n<e;){var i=Rn[n];Rn[n++]=null;var l=Rn[n];Rn[n++]=null;var h=Rn[n];Rn[n++]=null;var f=Rn[n];if(Rn[n++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}f!==0&&km(i,h,f)}}function Bo(e,n,i,l){Rn[zs++]=e,Rn[zs++]=n,Rn[zs++]=i,Rn[zs++]=l,$c|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Gc(e,n,i,l){return Bo(e,n,i,l),zo(e)}function as(e,n){return Bo(e,null,null,n),zo(e)}function km(e,n,i){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i);for(var h=!1,f=e.return;f!==null;)f.childLanes|=i,l=f.alternate,l!==null&&(l.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&n!==null&&(h=31-en(i),e=f.hiddenUpdates,l=e[h],l===null?e[h]=[n]:l.push(n),n.lane=i|536870912),f):null}function zo(e){if(50<wl)throw wl=0,td=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ps={};function T0(e,n,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(e,n,i,l){return new T0(e,n,i,l)}function Kc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ta(e,n){var i=e.alternate;return i===null?(i=yn(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Bm(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Po(e,n,i,l,h,f){var _=0;if(l=e,typeof e=="function")Kc(e)&&(_=1);else if(typeof e=="string")_=NE(e,i,ce.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case N:return e=yn(31,i,n,h),e.elementType=N,e.lanes=f,e;case P:return is(i.children,h,f,n);case j:_=8,h|=24;break;case F:return e=yn(12,i,n,h|2),e.elementType=F,e.lanes=f,e;case Te:return e=yn(13,i,n,h),e.elementType=Te,e.lanes=f,e;case re:return e=yn(19,i,n,h),e.elementType=re,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case se:_=10;break e;case ee:_=9;break e;case de:_=11;break e;case I:_=14;break e;case w:_=16,l=null;break e}_=29,i=Error(r(130,e===null?"null":typeof e,"")),l=null}return n=yn(_,i,n,h),n.elementType=e,n.type=l,n.lanes=f,n}function is(e,n,i,l){return e=yn(7,e,l,n),e.lanes=i,e}function Qc(e,n,i){return e=yn(6,e,null,n),e.lanes=i,e}function zm(e){var n=yn(18,null,null,0);return n.stateNode=e,n}function Yc(e,n,i){return n=yn(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Pm=new WeakMap;function Cn(e,n){if(typeof e=="object"&&e!==null){var i=Pm.get(e);return i!==void 0?i:(n={value:e,source:n,stack:co(n)},Pm.set(e,n),n)}return{value:e,source:n,stack:co(n)}}var Hs=[],Fs=0,Ho=null,sl=0,jn=[],Dn=0,hi=null,ta=1,na="";function Sa(e,n){Hs[Fs++]=sl,Hs[Fs++]=Ho,Ho=e,sl=n}function Hm(e,n,i){jn[Dn++]=ta,jn[Dn++]=na,jn[Dn++]=hi,hi=e;var l=ta;e=na;var h=32-en(l)-1;l&=~(1<<h),i+=1;var f=32-en(n)+h;if(30<f){var _=h-h%5;f=(l&(1<<_)-1).toString(32),l>>=_,h-=_,ta=1<<32-en(n)+h|i<<h|l,na=f+e}else ta=1<<f|i<<h|l,na=e}function Xc(e){e.return!==null&&(Sa(e,1),Hm(e,1,0))}function Zc(e){for(;e===Ho;)Ho=Hs[--Fs],Hs[Fs]=null,sl=Hs[--Fs],Hs[Fs]=null;for(;e===hi;)hi=jn[--Dn],jn[Dn]=null,na=jn[--Dn],jn[Dn]=null,ta=jn[--Dn],jn[Dn]=null}function Fm(e,n){jn[Dn++]=ta,jn[Dn++]=na,jn[Dn++]=hi,ta=n.id,na=n.overflow,hi=e}var zt=null,at=null,Le=!1,di=null,In=!1,Jc=Error(r(519));function fi(e){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rl(Cn(n,e)),Jc}function qm(e){var n=e.stateNode,i=e.type,l=e.memoizedProps;switch(n[ut]=e,n[Bt]=l,i){case"dialog":Ie("cancel",n),Ie("close",n);break;case"iframe":case"object":case"embed":Ie("load",n);break;case"video":case"audio":for(i=0;i<Rl.length;i++)Ie(Rl[i],n);break;case"source":Ie("error",n);break;case"img":case"image":case"link":Ie("error",n),Ie("load",n);break;case"details":Ie("toggle",n);break;case"input":Ie("invalid",n),Ki(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ie("invalid",n);break;case"textarea":Ie("invalid",n),ni(n,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||l.suppressHydrationWarning===!0||ly(n.textContent,i)?(l.popover!=null&&(Ie("beforetoggle",n),Ie("toggle",n)),l.onScroll!=null&&Ie("scroll",n),l.onScrollEnd!=null&&Ie("scrollend",n),l.onClick!=null&&(n.onclick=It),n=!0):n=!1,n||fi(e,!0)}function $m(e){for(zt=e.return;zt;)switch(zt.tag){case 5:case 31:case 13:In=!1;return;case 27:case 3:In=!0;return;default:zt=zt.return}}function qs(e){if(e!==zt)return!1;if(!Le)return $m(e),Le=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||gd(e.type,e.memoizedProps)),i=!i),i&&at&&fi(e),$m(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));at=gy(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));at=gy(e)}else n===27?(n=at,Ni(e.type)?(e=Ed,Ed=null,at=e):at=n):at=zt?On(e.stateNode.nextSibling):null;return!0}function ss(){at=zt=null,Le=!1}function Wc(){var e=di;return e!==null&&(dn===null?dn=e:dn.push.apply(dn,e),di=null),e}function rl(e){di===null?di=[e]:di.push(e)}var eh=L(null),rs=null,Aa=null;function mi(e,n,i){ie(eh,n._currentValue),n._currentValue=i}function xa(e){e._currentValue=eh.current,J(eh)}function th(e,n,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===i)break;e=e.return}}function nh(e,n,i,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var _=h.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=h;for(var D=0;D<n.length;D++)if(T.context===n[D]){f.lanes|=i,T=f.alternate,T!==null&&(T.lanes|=i),th(f.return,i,e),l||(_=null);break e}f=T.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=i,f=_.alternate,f!==null&&(f.lanes|=i),th(_,i,e),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===e){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function $s(e,n,i,l){e=null;for(var h=n,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=h.type;gn(h.pendingProps.value,_.value)||(e!==null?e.push(T):e=[T])}}else if(h===je.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Ml):e=[Ml])}h=h.return}e!==null&&nh(n,e,i,l),n.flags|=262144}function Fo(e){for(e=e.firstContext;e!==null;){if(!gn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ls(e){rs=e,Aa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Pt(e){return Gm(rs,e)}function qo(e,n){return rs===null&&ls(e),Gm(e,n)}function Gm(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},Aa===null){if(e===null)throw Error(r(308));Aa=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Aa=Aa.next=n;return i}var S0=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},A0=s.unstable_scheduleCallback,x0=s.unstable_NormalPriority,Et={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ah(){return{controller:new S0,data:new Map,refCount:0}}function ll(e){e.refCount--,e.refCount===0&&A0(x0,function(){e.controller.abort()})}var ol=null,ih=0,Gs=0,Ks=null;function w0(e,n){if(ol===null){var i=ol=[];ih=0,Gs=ld(),Ks={status:"pending",value:void 0,then:function(l){i.push(l)}}}return ih++,n.then(Km,Km),n}function Km(){if(--ih===0&&ol!==null){Ks!==null&&(Ks.status="fulfilled");var e=ol;ol=null,Gs=0,Ks=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function N0(e,n){var i=[],l={status:"pending",value:null,reason:null,then:function(h){i.push(h)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<i.length;h++)(0,i[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<i.length;h++)(0,i[h])(void 0)}),l}var Qm=X.S;X.S=function(e,n){Dg=Ut(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&w0(e,n),Qm!==null&&Qm(e,n)};var os=L(null);function sh(){var e=os.current;return e!==null?e:et.pooledCache}function $o(e,n){n===null?ie(os,os.current):ie(os,n.pool)}function Ym(){var e=sh();return e===null?null:{parent:Et._currentValue,pool:e}}var Qs=Error(r(460)),rh=Error(r(474)),Go=Error(r(542)),Ko={then:function(){}};function Xm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Zm(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(It,It),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Wm(e),e;default:if(typeof n.status=="string")n.then(It,It);else{if(e=et,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Wm(e),e}throw cs=n,Qs}}function us(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(cs=i,Qs):i}}var cs=null;function Jm(){if(cs===null)throw Error(r(459));var e=cs;return cs=null,e}function Wm(e){if(e===Qs||e===Go)throw Error(r(483))}var Ys=null,ul=0;function Qo(e){var n=ul;return ul+=1,Ys===null&&(Ys=[]),Zm(Ys,e,n)}function cl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Yo(e,n){throw n.$$typeof===C?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function ep(e){function n(z,V){if(e){var q=z.deletions;q===null?(z.deletions=[V],z.flags|=16):q.push(V)}}function i(z,V){if(!e)return null;for(;V!==null;)n(z,V),V=V.sibling;return null}function l(z){for(var V=new Map;z!==null;)z.key!==null?V.set(z.key,z):V.set(z.index,z),z=z.sibling;return V}function h(z,V){return z=Ta(z,V),z.index=0,z.sibling=null,z}function f(z,V,q){return z.index=q,e?(q=z.alternate,q!==null?(q=q.index,q<V?(z.flags|=67108866,V):q):(z.flags|=67108866,V)):(z.flags|=1048576,V)}function _(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function T(z,V,q,W){return V===null||V.tag!==6?(V=Qc(q,z.mode,W),V.return=z,V):(V=h(V,q),V.return=z,V)}function D(z,V,q,W){var ye=q.type;return ye===P?Z(z,V,q.props.children,W,q.key):V!==null&&(V.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===w&&us(ye)===V.type)?(V=h(V,q.props),cl(V,q),V.return=z,V):(V=Po(q.type,q.key,q.props,null,z.mode,W),cl(V,q),V.return=z,V)}function $(z,V,q,W){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=Yc(q,z.mode,W),V.return=z,V):(V=h(V,q.children||[]),V.return=z,V)}function Z(z,V,q,W,ye){return V===null||V.tag!==7?(V=is(q,z.mode,W,ye),V.return=z,V):(V=h(V,q),V.return=z,V)}function te(z,V,q){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Qc(""+V,z.mode,q),V.return=z,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case U:return q=Po(V.type,V.key,V.props,null,z.mode,q),cl(q,V),q.return=z,q;case B:return V=Yc(V,z.mode,q),V.return=z,V;case w:return V=us(V),te(z,V,q)}if(Be(V)||k(V))return V=is(V,z.mode,q,null),V.return=z,V;if(typeof V.then=="function")return te(z,Qo(V),q);if(V.$$typeof===se)return te(z,qo(z,V),q);Yo(z,V)}return null}function G(z,V,q,W){var ye=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ye!==null?null:T(z,V,""+q,W);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case U:return q.key===ye?D(z,V,q,W):null;case B:return q.key===ye?$(z,V,q,W):null;case w:return q=us(q),G(z,V,q,W)}if(Be(q)||k(q))return ye!==null?null:Z(z,V,q,W,null);if(typeof q.then=="function")return G(z,V,Qo(q),W);if(q.$$typeof===se)return G(z,V,qo(z,q),W);Yo(z,q)}return null}function K(z,V,q,W,ye){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return z=z.get(q)||null,T(V,z,""+W,ye);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case U:return z=z.get(W.key===null?q:W.key)||null,D(V,z,W,ye);case B:return z=z.get(W.key===null?q:W.key)||null,$(V,z,W,ye);case w:return W=us(W),K(z,V,q,W,ye)}if(Be(W)||k(W))return z=z.get(q)||null,Z(V,z,W,ye,null);if(typeof W.then=="function")return K(z,V,q,Qo(W),ye);if(W.$$typeof===se)return K(z,V,q,qo(V,W),ye);Yo(V,W)}return null}function he(z,V,q,W){for(var ye=null,qe=null,fe=V,Re=V=0,Oe=null;fe!==null&&Re<q.length;Re++){fe.index>Re?(Oe=fe,fe=null):Oe=fe.sibling;var $e=G(z,fe,q[Re],W);if($e===null){fe===null&&(fe=Oe);break}e&&fe&&$e.alternate===null&&n(z,fe),V=f($e,V,Re),qe===null?ye=$e:qe.sibling=$e,qe=$e,fe=Oe}if(Re===q.length)return i(z,fe),Le&&Sa(z,Re),ye;if(fe===null){for(;Re<q.length;Re++)fe=te(z,q[Re],W),fe!==null&&(V=f(fe,V,Re),qe===null?ye=fe:qe.sibling=fe,qe=fe);return Le&&Sa(z,Re),ye}for(fe=l(fe);Re<q.length;Re++)Oe=K(fe,z,Re,q[Re],W),Oe!==null&&(e&&Oe.alternate!==null&&fe.delete(Oe.key===null?Re:Oe.key),V=f(Oe,V,Re),qe===null?ye=Oe:qe.sibling=Oe,qe=Oe);return e&&fe.forEach(function(Ii){return n(z,Ii)}),Le&&Sa(z,Re),ye}function ve(z,V,q,W){if(q==null)throw Error(r(151));for(var ye=null,qe=null,fe=V,Re=V=0,Oe=null,$e=q.next();fe!==null&&!$e.done;Re++,$e=q.next()){fe.index>Re?(Oe=fe,fe=null):Oe=fe.sibling;var Ii=G(z,fe,$e.value,W);if(Ii===null){fe===null&&(fe=Oe);break}e&&fe&&Ii.alternate===null&&n(z,fe),V=f(Ii,V,Re),qe===null?ye=Ii:qe.sibling=Ii,qe=Ii,fe=Oe}if($e.done)return i(z,fe),Le&&Sa(z,Re),ye;if(fe===null){for(;!$e.done;Re++,$e=q.next())$e=te(z,$e.value,W),$e!==null&&(V=f($e,V,Re),qe===null?ye=$e:qe.sibling=$e,qe=$e);return Le&&Sa(z,Re),ye}for(fe=l(fe);!$e.done;Re++,$e=q.next())$e=K(fe,z,Re,$e.value,W),$e!==null&&(e&&$e.alternate!==null&&fe.delete($e.key===null?Re:$e.key),V=f($e,V,Re),qe===null?ye=$e:qe.sibling=$e,qe=$e);return e&&fe.forEach(function(kE){return n(z,kE)}),Le&&Sa(z,Re),ye}function We(z,V,q,W){if(typeof q=="object"&&q!==null&&q.type===P&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case U:e:{for(var ye=q.key;V!==null;){if(V.key===ye){if(ye=q.type,ye===P){if(V.tag===7){i(z,V.sibling),W=h(V,q.props.children),W.return=z,z=W;break e}}else if(V.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===w&&us(ye)===V.type){i(z,V.sibling),W=h(V,q.props),cl(W,q),W.return=z,z=W;break e}i(z,V);break}else n(z,V);V=V.sibling}q.type===P?(W=is(q.props.children,z.mode,W,q.key),W.return=z,z=W):(W=Po(q.type,q.key,q.props,null,z.mode,W),cl(W,q),W.return=z,z=W)}return _(z);case B:e:{for(ye=q.key;V!==null;){if(V.key===ye)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){i(z,V.sibling),W=h(V,q.children||[]),W.return=z,z=W;break e}else{i(z,V);break}else n(z,V);V=V.sibling}W=Yc(q,z.mode,W),W.return=z,z=W}return _(z);case w:return q=us(q),We(z,V,q,W)}if(Be(q))return he(z,V,q,W);if(k(q)){if(ye=k(q),typeof ye!="function")throw Error(r(150));return q=ye.call(q),ve(z,V,q,W)}if(typeof q.then=="function")return We(z,V,Qo(q),W);if(q.$$typeof===se)return We(z,V,qo(z,q),W);Yo(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,V!==null&&V.tag===6?(i(z,V.sibling),W=h(V,q),W.return=z,z=W):(i(z,V),W=Qc(q,z.mode,W),W.return=z,z=W),_(z)):i(z,V)}return function(z,V,q,W){try{ul=0;var ye=We(z,V,q,W);return Ys=null,ye}catch(fe){if(fe===Qs||fe===Go)throw fe;var qe=yn(29,fe,null,z.mode);return qe.lanes=W,qe.return=z,qe}finally{}}}var hs=ep(!0),tp=ep(!1),pi=!1;function lh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function oh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function gi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function yi(e,n,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ge&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=zo(e),km(e,null,i),n}return Bo(e,l,n,i),zo(e)}function hl(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,Ya(e,i)}}function uh(e,n){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var h=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var _={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?h=f=_:f=f.next=_,i=i.next}while(i!==null);f===null?h=f=n:f=f.next=n}else h=f=n;i={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var ch=!1;function dl(){if(ch){var e=Ks;if(e!==null)throw e}}function fl(e,n,i,l){ch=!1;var h=e.updateQueue;pi=!1;var f=h.firstBaseUpdate,_=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var D=T,$=D.next;D.next=null,_===null?f=$:_.next=$,_=D;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,T=Z.lastBaseUpdate,T!==_&&(T===null?Z.firstBaseUpdate=$:T.next=$,Z.lastBaseUpdate=D))}if(f!==null){var te=h.baseState;_=0,Z=$=D=null,T=f;do{var G=T.lane&-536870913,K=G!==T.lane;if(K?(Me&G)===G:(l&G)===G){G!==0&&G===Gs&&(ch=!0),Z!==null&&(Z=Z.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var he=e,ve=T;G=n;var We=i;switch(ve.tag){case 1:if(he=ve.payload,typeof he=="function"){te=he.call(We,te,G);break e}te=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=ve.payload,G=typeof he=="function"?he.call(We,te,G):he,G==null)break e;te=S({},te,G);break e;case 2:pi=!0}}G=T.callback,G!==null&&(e.flags|=64,K&&(e.flags|=8192),K=h.callbacks,K===null?h.callbacks=[G]:K.push(G))}else K={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Z===null?($=Z=K,D=te):Z=Z.next=K,_|=G;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;K=T,T=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);Z===null&&(D=te),h.baseState=D,h.firstBaseUpdate=$,h.lastBaseUpdate=Z,f===null&&(h.shared.lanes=0),Ti|=_,e.lanes=_,e.memoizedState=te}}function np(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function ap(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)np(i[e],n)}var Xs=L(null),Xo=L(0);function ip(e,n){e=Oa,ie(Xo,e),ie(Xs,n),Oa=e|n.baseLanes}function hh(){ie(Xo,Oa),ie(Xs,Xs.current)}function dh(){Oa=Xo.current,J(Xs),J(Xo)}var vn=L(null),Mn=null;function vi(e){var n=e.alternate;ie(gt,gt.current&1),ie(vn,e),Mn===null&&(n===null||Xs.current!==null||n.memoizedState!==null)&&(Mn=e)}function fh(e){ie(gt,gt.current),ie(vn,e),Mn===null&&(Mn=e)}function sp(e){e.tag===22?(ie(gt,gt.current),ie(vn,e),Mn===null&&(Mn=e)):_i()}function _i(){ie(gt,gt.current),ie(vn,vn.current)}function _n(e){J(vn),Mn===e&&(Mn=null),J(gt)}var gt=L(0);function Zo(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||_d(i)||bd(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var wa=0,xe=null,Ze=null,Tt=null,Jo=!1,Zs=!1,ds=!1,Wo=0,ml=0,Js=null,R0=0;function ht(){throw Error(r(321))}function mh(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!gn(e[i],n[i]))return!1;return!0}function ph(e,n,i,l,h,f){return wa=f,xe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,X.H=e===null||e.memoizedState===null?Hp:jh,ds=!1,f=i(l,h),ds=!1,Zs&&(f=lp(n,i,l,h)),rp(e),f}function rp(e){X.H=yl;var n=Ze!==null&&Ze.next!==null;if(wa=0,Tt=Ze=xe=null,Jo=!1,ml=0,Js=null,n)throw Error(r(300));e===null||St||(e=e.dependencies,e!==null&&Fo(e)&&(St=!0))}function lp(e,n,i,l){xe=e;var h=0;do{if(Zs&&(Js=null),ml=0,Zs=!1,25<=h)throw Error(r(301));if(h+=1,Tt=Ze=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}X.H=Fp,f=n(i,l)}while(Zs);return f}function C0(){var e=X.H,n=e.useState()[0];return n=typeof n.then=="function"?pl(n):n,e=e.useState()[0],(Ze!==null?Ze.memoizedState:null)!==e&&(xe.flags|=1024),n}function gh(){var e=Wo!==0;return Wo=0,e}function yh(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function vh(e){if(Jo){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Jo=!1}wa=0,Tt=Ze=xe=null,Zs=!1,ml=Wo=0,Js=null}function rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?xe.memoizedState=Tt=e:Tt=Tt.next=e,Tt}function yt(){if(Ze===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var n=Tt===null?xe.memoizedState:Tt.next;if(n!==null)Tt=n,Ze=e;else{if(e===null)throw xe.alternate===null?Error(r(467)):Error(r(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Tt===null?xe.memoizedState=Tt=e:Tt=Tt.next=e}return Tt}function eu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pl(e){var n=ml;return ml+=1,Js===null&&(Js=[]),e=Zm(Js,e,n),n=xe,(Tt===null?n.memoizedState:Tt.next)===null&&(n=n.alternate,X.H=n===null||n.memoizedState===null?Hp:jh),e}function tu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return pl(e);if(e.$$typeof===se)return Pt(e)}throw Error(r(438,String(e)))}function _h(e){var n=null,i=xe.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var l=xe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=eu(),xe.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),l=0;l<e;l++)i[l]=O;return n.index++,i}function Na(e,n){return typeof n=="function"?n(e):n}function nu(e){var n=yt();return bh(n,Ze,e)}function bh(e,n,i){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var h=e.baseQueue,f=l.pending;if(f!==null){if(h!==null){var _=h.next;h.next=f.next,f.next=_}n.baseQueue=h=f,l.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{n=h.next;var T=_=null,D=null,$=n,Z=!1;do{var te=$.lane&-536870913;if(te!==$.lane?(Me&te)===te:(wa&te)===te){var G=$.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),te===Gs&&(Z=!0);else if((wa&G)===G){$=$.next,G===Gs&&(Z=!0);continue}else te={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},D===null?(T=D=te,_=f):D=D.next=te,xe.lanes|=G,Ti|=G;te=$.action,ds&&i(f,te),f=$.hasEagerState?$.eagerState:i(f,te)}else G={lane:te,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},D===null?(T=D=G,_=f):D=D.next=G,xe.lanes|=te,Ti|=te;$=$.next}while($!==null&&$!==n);if(D===null?_=f:D.next=T,!gn(f,e.memoizedState)&&(St=!0,Z&&(i=Ks,i!==null)))throw i;e.memoizedState=f,e.baseState=_,e.baseQueue=D,l.lastRenderedState=f}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Eh(e){var n=yt(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var l=i.dispatch,h=i.pending,f=n.memoizedState;if(h!==null){i.pending=null;var _=h=h.next;do f=e(f,_.action),_=_.next;while(_!==h);gn(f,n.memoizedState)||(St=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),i.lastRenderedState=f}return[f,l]}function op(e,n,i){var l=xe,h=yt(),f=Le;if(f){if(i===void 0)throw Error(r(407));i=i()}else i=n();var _=!gn((Ze||h).memoizedState,i);if(_&&(h.memoizedState=i,St=!0),h=h.queue,Ah(hp.bind(null,l,h,e),[e]),h.getSnapshot!==n||_||Tt!==null&&Tt.memoizedState.tag&1){if(l.flags|=2048,Ws(9,{destroy:void 0},cp.bind(null,l,h,i,n),null),et===null)throw Error(r(349));f||(wa&127)!==0||up(l,n,i)}return i}function up(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=xe.updateQueue,n===null?(n=eu(),xe.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function cp(e,n,i,l){n.value=i,n.getSnapshot=l,dp(n)&&fp(e)}function hp(e,n,i){return i(function(){dp(n)&&fp(e)})}function dp(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!gn(e,i)}catch{return!0}}function fp(e){var n=as(e,2);n!==null&&fn(n,e,2)}function Th(e){var n=rn();if(typeof e=="function"){var i=e;if(e=i(),ds){An(!0);try{i()}finally{An(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:e},n}function mp(e,n,i,l){return e.baseState=i,bh(e,Ze,typeof l=="function"?l:Na)}function j0(e,n,i,l,h){if(su(e))throw Error(r(485));if(e=n.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};X.T!==null?i(!0):f.isTransition=!1,l(f),i=n.pending,i===null?(f.next=n.pending=f,pp(n,f)):(f.next=i.next,n.pending=i.next=f)}}function pp(e,n){var i=n.action,l=n.payload,h=e.state;if(n.isTransition){var f=X.T,_={};X.T=_;try{var T=i(h,l),D=X.S;D!==null&&D(_,T),gp(e,n,T)}catch($){Sh(e,n,$)}finally{f!==null&&_.types!==null&&(f.types=_.types),X.T=f}}else try{f=i(h,l),gp(e,n,f)}catch($){Sh(e,n,$)}}function gp(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){yp(e,n,l)},function(l){return Sh(e,n,l)}):yp(e,n,i)}function yp(e,n,i){n.status="fulfilled",n.value=i,vp(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,pp(e,i)))}function Sh(e,n,i){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=i,vp(n),n=n.next;while(n!==l)}e.action=null}function vp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function _p(e,n){return n}function bp(e,n){if(Le){var i=et.formState;if(i!==null){e:{var l=xe;if(Le){if(at){t:{for(var h=at,f=In;h.nodeType!==8;){if(!f){h=null;break t}if(h=On(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){at=On(h.nextSibling),l=h.data==="F!";break e}}fi(l)}l=!1}l&&(n=i[0])}}return i=rn(),i.memoizedState=i.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_p,lastRenderedState:n},i.queue=l,i=Bp.bind(null,xe,l),l.dispatch=i,l=Th(!1),f=Ch.bind(null,xe,!1,l.queue),l=rn(),h={state:n,dispatch:null,action:e,pending:null},l.queue=h,i=j0.bind(null,xe,h,f,i),h.dispatch=i,l.memoizedState=e,[n,i,!1]}function Ep(e){var n=yt();return Tp(n,Ze,e)}function Tp(e,n,i){if(n=bh(e,n,_p)[0],e=nu(Na)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=pl(n)}catch(_){throw _===Qs?Go:_}else l=n;n=yt();var h=n.queue,f=h.dispatch;return i!==n.memoizedState&&(xe.flags|=2048,Ws(9,{destroy:void 0},D0.bind(null,h,i),null)),[l,f,e]}function D0(e,n){e.action=n}function Sp(e){var n=yt(),i=Ze;if(i!==null)return Tp(n,i,e);yt(),n=n.memoizedState,i=yt();var l=i.queue.dispatch;return i.memoizedState=e,[n,l,!1]}function Ws(e,n,i,l){return e={tag:e,create:i,deps:l,inst:n,next:null},n=xe.updateQueue,n===null&&(n=eu(),xe.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,n.lastEffect=e),e}function Ap(){return yt().memoizedState}function au(e,n,i,l){var h=rn();xe.flags|=e,h.memoizedState=Ws(1|n,{destroy:void 0},i,l===void 0?null:l)}function iu(e,n,i,l){var h=yt();l=l===void 0?null:l;var f=h.memoizedState.inst;Ze!==null&&l!==null&&mh(l,Ze.memoizedState.deps)?h.memoizedState=Ws(n,f,i,l):(xe.flags|=e,h.memoizedState=Ws(1|n,f,i,l))}function xp(e,n){au(8390656,8,e,n)}function Ah(e,n){iu(2048,8,e,n)}function I0(e){xe.flags|=4;var n=xe.updateQueue;if(n===null)n=eu(),xe.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function wp(e){var n=yt().memoizedState;return I0({ref:n,nextImpl:e}),function(){if((Ge&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function Np(e,n){return iu(4,2,e,n)}function Rp(e,n){return iu(4,4,e,n)}function Cp(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function jp(e,n,i){i=i!=null?i.concat([e]):null,iu(4,4,Cp.bind(null,n,e),i)}function xh(){}function Dp(e,n){var i=yt();n=n===void 0?null:n;var l=i.memoizedState;return n!==null&&mh(n,l[1])?l[0]:(i.memoizedState=[e,n],e)}function Ip(e,n){var i=yt();n=n===void 0?null:n;var l=i.memoizedState;if(n!==null&&mh(n,l[1]))return l[0];if(l=e(),ds){An(!0);try{e()}finally{An(!1)}}return i.memoizedState=[l,n],l}function wh(e,n,i){return i===void 0||(wa&1073741824)!==0&&(Me&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=Mg(),xe.lanes|=e,Ti|=e,i)}function Mp(e,n,i,l){return gn(i,n)?i:Xs.current!==null?(e=wh(e,i,l),gn(e,n)||(St=!0),e):(wa&42)===0||(wa&1073741824)!==0&&(Me&261930)===0?(St=!0,e.memoizedState=i):(e=Mg(),xe.lanes|=e,Ti|=e,n)}function Op(e,n,i,l,h){var f=ae.p;ae.p=f!==0&&8>f?f:8;var _=X.T,T={};X.T=T,Ch(e,!1,n,i);try{var D=h(),$=X.S;if($!==null&&$(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=N0(D,l);gl(e,n,Z,Tn(e))}else gl(e,n,l,Tn(e))}catch(te){gl(e,n,{then:function(){},status:"rejected",reason:te},Tn())}finally{ae.p=f,_!==null&&T.types!==null&&(_.types=T.types),X.T=_}}function M0(){}function Nh(e,n,i,l){if(e.tag!==5)throw Error(r(476));var h=Vp(e).queue;Op(e,h,n,ue,i===null?M0:function(){return Lp(e),i(l)})}function Vp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:ue},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Lp(e){var n=Vp(e);n.next===null&&(n=e.alternate.memoizedState),gl(e,n.next.queue,{},Tn())}function Rh(){return Pt(Ml)}function Up(){return yt().memoizedState}function kp(){return yt().memoizedState}function O0(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=Tn();e=gi(i);var l=yi(n,e,i);l!==null&&(fn(l,n,i),hl(l,n,i)),n={cache:ah()},e.payload=n;return}n=n.return}}function V0(e,n,i){var l=Tn();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},su(e)?zp(n,i):(i=Gc(e,n,i,l),i!==null&&(fn(i,e,l),Pp(i,n,l)))}function Bp(e,n,i){var l=Tn();gl(e,n,i,l)}function gl(e,n,i,l){var h={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(su(e))zp(n,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var _=n.lastRenderedState,T=f(_,i);if(h.hasEagerState=!0,h.eagerState=T,gn(T,_))return Bo(e,n,h,0),et===null&&ko(),!1}catch{}finally{}if(i=Gc(e,n,h,l),i!==null)return fn(i,e,l),Pp(i,n,l),!0}return!1}function Ch(e,n,i,l){if(l={lane:2,revertLane:ld(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},su(e)){if(n)throw Error(r(479))}else n=Gc(e,i,l,2),n!==null&&fn(n,e,2)}function su(e){var n=e.alternate;return e===xe||n!==null&&n===xe}function zp(e,n){Zs=Jo=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function Pp(e,n,i){if((i&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,Ya(e,i)}}var yl={readContext:Pt,use:tu,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useLayoutEffect:ht,useInsertionEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useSyncExternalStore:ht,useId:ht,useHostTransitionStatus:ht,useFormState:ht,useActionState:ht,useOptimistic:ht,useMemoCache:ht,useCacheRefresh:ht};yl.useEffectEvent=ht;var Hp={readContext:Pt,use:tu,useCallback:function(e,n){return rn().memoizedState=[e,n===void 0?null:n],e},useContext:Pt,useEffect:xp,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,au(4194308,4,Cp.bind(null,n,e),i)},useLayoutEffect:function(e,n){return au(4194308,4,e,n)},useInsertionEffect:function(e,n){au(4,2,e,n)},useMemo:function(e,n){var i=rn();n=n===void 0?null:n;var l=e();if(ds){An(!0);try{e()}finally{An(!1)}}return i.memoizedState=[l,n],l},useReducer:function(e,n,i){var l=rn();if(i!==void 0){var h=i(n);if(ds){An(!0);try{i(n)}finally{An(!1)}}}else h=n;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=V0.bind(null,xe,e),[l.memoizedState,e]},useRef:function(e){var n=rn();return e={current:e},n.memoizedState=e},useState:function(e){e=Th(e);var n=e.queue,i=Bp.bind(null,xe,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:xh,useDeferredValue:function(e,n){var i=rn();return wh(i,e,n)},useTransition:function(){var e=Th(!1);return e=Op.bind(null,xe,e.queue,!0,!1),rn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var l=xe,h=rn();if(Le){if(i===void 0)throw Error(r(407));i=i()}else{if(i=n(),et===null)throw Error(r(349));(Me&127)!==0||up(l,n,i)}h.memoizedState=i;var f={value:i,getSnapshot:n};return h.queue=f,xp(hp.bind(null,l,f,e),[e]),l.flags|=2048,Ws(9,{destroy:void 0},cp.bind(null,l,f,i,n),null),i},useId:function(){var e=rn(),n=et.identifierPrefix;if(Le){var i=na,l=ta;i=(l&~(1<<32-en(l)-1)).toString(32)+i,n="_"+n+"R_"+i,i=Wo++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=R0++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Rh,useFormState:bp,useActionState:bp,useOptimistic:function(e){var n=rn();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Ch.bind(null,xe,!0,i),i.dispatch=n,[e,n]},useMemoCache:_h,useCacheRefresh:function(){return rn().memoizedState=O0.bind(null,xe)},useEffectEvent:function(e){var n=rn(),i={impl:e};return n.memoizedState=i,function(){if((Ge&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}},jh={readContext:Pt,use:tu,useCallback:Dp,useContext:Pt,useEffect:Ah,useImperativeHandle:jp,useInsertionEffect:Np,useLayoutEffect:Rp,useMemo:Ip,useReducer:nu,useRef:Ap,useState:function(){return nu(Na)},useDebugValue:xh,useDeferredValue:function(e,n){var i=yt();return Mp(i,Ze.memoizedState,e,n)},useTransition:function(){var e=nu(Na)[0],n=yt().memoizedState;return[typeof e=="boolean"?e:pl(e),n]},useSyncExternalStore:op,useId:Up,useHostTransitionStatus:Rh,useFormState:Ep,useActionState:Ep,useOptimistic:function(e,n){var i=yt();return mp(i,Ze,e,n)},useMemoCache:_h,useCacheRefresh:kp};jh.useEffectEvent=wp;var Fp={readContext:Pt,use:tu,useCallback:Dp,useContext:Pt,useEffect:Ah,useImperativeHandle:jp,useInsertionEffect:Np,useLayoutEffect:Rp,useMemo:Ip,useReducer:Eh,useRef:Ap,useState:function(){return Eh(Na)},useDebugValue:xh,useDeferredValue:function(e,n){var i=yt();return Ze===null?wh(i,e,n):Mp(i,Ze.memoizedState,e,n)},useTransition:function(){var e=Eh(Na)[0],n=yt().memoizedState;return[typeof e=="boolean"?e:pl(e),n]},useSyncExternalStore:op,useId:Up,useHostTransitionStatus:Rh,useFormState:Sp,useActionState:Sp,useOptimistic:function(e,n){var i=yt();return Ze!==null?mp(i,Ze,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:_h,useCacheRefresh:kp};Fp.useEffectEvent=wp;function Dh(e,n,i,l){n=e.memoizedState,i=i(l,n),i=i==null?n:S({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ih={enqueueSetState:function(e,n,i){e=e._reactInternals;var l=Tn(),h=gi(l);h.payload=n,i!=null&&(h.callback=i),n=yi(e,h,l),n!==null&&(fn(n,e,l),hl(n,e,l))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var l=Tn(),h=gi(l);h.tag=1,h.payload=n,i!=null&&(h.callback=i),n=yi(e,h,l),n!==null&&(fn(n,e,l),hl(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=Tn(),l=gi(i);l.tag=2,n!=null&&(l.callback=n),n=yi(e,l,i),n!==null&&(fn(n,e,i),hl(n,e,i))}};function qp(e,n,i,l,h,f,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,_):n.prototype&&n.prototype.isPureReactComponent?!al(i,l)||!al(h,f):!0}function $p(e,n,i,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,l),n.state!==e&&Ih.enqueueReplaceState(n,n.state,null)}function fs(e,n){var i=n;if("ref"in n){i={};for(var l in n)l!=="ref"&&(i[l]=n[l])}if(e=e.defaultProps){i===n&&(i=S({},i));for(var h in e)i[h]===void 0&&(i[h]=e[h])}return i}function Gp(e){Uo(e)}function Kp(e){console.error(e)}function Qp(e){Uo(e)}function ru(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Yp(e,n,i){try{var l=e.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Mh(e,n,i){return i=gi(i),i.tag=3,i.payload={element:null},i.callback=function(){ru(e,n)},i}function Xp(e){return e=gi(e),e.tag=3,e}function Zp(e,n,i,l){var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;e.payload=function(){return h(f)},e.callback=function(){Yp(n,i,l)}}var _=i.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){Yp(n,i,l),typeof h!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function L0(e,n,i,l,h){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=i.alternate,n!==null&&$s(n,i,h,!0),i=vn.current,i!==null){switch(i.tag){case 31:case 13:return Mn===null?vu():i.alternate===null&&dt===0&&(dt=3),i.flags&=-257,i.flags|=65536,i.lanes=h,l===Ko?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([l]):n.add(l),id(e,l,h)),!1;case 22:return i.flags|=65536,l===Ko?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([l]):i.add(l)),id(e,l,h)),!1}throw Error(r(435,i.tag))}return id(e,l,h),vu(),!1}if(Le)return n=vn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==Jc&&(e=Error(r(422),{cause:l}),rl(Cn(e,i)))):(l!==Jc&&(n=Error(r(423),{cause:l}),rl(Cn(n,i))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=Cn(l,i),h=Mh(e.stateNode,l,h),uh(e,h),dt!==4&&(dt=2)),!1;var f=Error(r(520),{cause:l});if(f=Cn(f,i),xl===null?xl=[f]:xl.push(f),dt!==4&&(dt=2),n===null)return!0;l=Cn(l,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=h&-h,i.lanes|=e,e=Mh(i.stateNode,l,e),uh(i,e),!1;case 1:if(n=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Si===null||!Si.has(f))))return i.flags|=65536,h&=-h,i.lanes|=h,h=Xp(h),Zp(h,e,i,l),uh(i,h),!1}i=i.return}while(i!==null);return!1}var Oh=Error(r(461)),St=!1;function Ht(e,n,i,l){n.child=e===null?tp(n,null,i,l):hs(n,e.child,i,l)}function Jp(e,n,i,l,h){i=i.render;var f=n.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return ls(n),l=ph(e,n,i,_,f,h),T=gh(),e!==null&&!St?(yh(e,n,h),Ra(e,n,h)):(Le&&T&&Xc(n),n.flags|=1,Ht(e,n,l,h),n.child)}function Wp(e,n,i,l,h){if(e===null){var f=i.type;return typeof f=="function"&&!Kc(f)&&f.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=f,eg(e,n,f,l,h)):(e=Po(i.type,null,l,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!Hh(e,h)){var _=f.memoizedProps;if(i=i.compare,i=i!==null?i:al,i(_,l)&&e.ref===n.ref)return Ra(e,n,h)}return n.flags|=1,e=Ta(f,l),e.ref=n.ref,e.return=n,n.child=e}function eg(e,n,i,l,h){if(e!==null){var f=e.memoizedProps;if(al(f,l)&&e.ref===n.ref)if(St=!1,n.pendingProps=l=f,Hh(e,h))(e.flags&131072)!==0&&(St=!0);else return n.lanes=e.lanes,Ra(e,n,h)}return Vh(e,n,i,l,h)}function tg(e,n,i,l){var h=l.children,f=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,e!==null){for(l=n.child=e.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~f}else l=0,n.child=null;return ng(e,n,f,i,l)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&$o(n,f!==null?f.cachePool:null),f!==null?ip(n,f):hh(),sp(n);else return l=n.lanes=536870912,ng(e,n,f!==null?f.baseLanes|i:i,i,l)}else f!==null?($o(n,f.cachePool),ip(n,f),_i(),n.memoizedState=null):(e!==null&&$o(n,null),hh(),_i());return Ht(e,n,h,i),n.child}function vl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function ng(e,n,i,l,h){var f=sh();return f=f===null?null:{parent:Et._currentValue,pool:f},n.memoizedState={baseLanes:i,cachePool:f},e!==null&&$o(n,null),hh(),sp(n),e!==null&&$s(e,n,l,!0),n.childLanes=h,null}function lu(e,n){return n=uu({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function ag(e,n,i){return hs(n,e.child,null,i),e=lu(n,n.pendingProps),e.flags|=2,_n(n),n.memoizedState=null,e}function U0(e,n,i){var l=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Le){if(l.mode==="hidden")return e=lu(n,l),n.lanes=536870912,vl(null,e);if(fh(n),(e=at)?(e=py(e,In),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:hi!==null?{id:ta,overflow:na}:null,retryLane:536870912,hydrationErrors:null},i=zm(e),i.return=n,n.child=i,zt=n,at=null)):e=null,e===null)throw fi(n);return n.lanes=536870912,null}return lu(n,l)}var f=e.memoizedState;if(f!==null){var _=f.dehydrated;if(fh(n),h)if(n.flags&256)n.flags&=-257,n=ag(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(r(558));else if(St||$s(e,n,i,!1),h=(i&e.childLanes)!==0,St||h){if(l=et,l!==null&&(_=Xa(l,i),_!==0&&_!==f.retryLane))throw f.retryLane=_,as(e,_),fn(l,e,_),Oh;vu(),n=ag(e,n,i)}else e=f.treeContext,at=On(_.nextSibling),zt=n,Le=!0,di=null,In=!1,e!==null&&Fm(n,e),n=lu(n,l),n.flags|=4096;return n}return e=Ta(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function ou(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Vh(e,n,i,l,h){return ls(n),i=ph(e,n,i,l,void 0,h),l=gh(),e!==null&&!St?(yh(e,n,h),Ra(e,n,h)):(Le&&l&&Xc(n),n.flags|=1,Ht(e,n,i,h),n.child)}function ig(e,n,i,l,h,f){return ls(n),n.updateQueue=null,i=lp(n,l,i,h),rp(e),l=gh(),e!==null&&!St?(yh(e,n,f),Ra(e,n,f)):(Le&&l&&Xc(n),n.flags|=1,Ht(e,n,i,f),n.child)}function sg(e,n,i,l,h){if(ls(n),n.stateNode===null){var f=Ps,_=i.contextType;typeof _=="object"&&_!==null&&(f=Pt(_)),f=new i(l,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Ih,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=l,f.state=n.memoizedState,f.refs={},lh(n),_=i.contextType,f.context=typeof _=="object"&&_!==null?Pt(_):Ps,f.state=n.memoizedState,_=i.getDerivedStateFromProps,typeof _=="function"&&(Dh(n,i,_,l),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&Ih.enqueueReplaceState(f,f.state,null),fl(n,l,f,h),dl(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){f=n.stateNode;var T=n.memoizedProps,D=fs(i,T);f.props=D;var $=f.context,Z=i.contextType;_=Ps,typeof Z=="object"&&Z!==null&&(_=Pt(Z));var te=i.getDerivedStateFromProps;Z=typeof te=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,Z||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||$!==_)&&$p(n,f,l,_),pi=!1;var G=n.memoizedState;f.state=G,fl(n,l,f,h),dl(),$=n.memoizedState,T||G!==$||pi?(typeof te=="function"&&(Dh(n,i,te,l),$=n.memoizedState),(D=pi||qp(n,i,D,l,G,$,_))?(Z||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=$),f.props=l,f.state=$,f.context=_,l=D):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{f=n.stateNode,oh(e,n),_=n.memoizedProps,Z=fs(i,_),f.props=Z,te=n.pendingProps,G=f.context,$=i.contextType,D=Ps,typeof $=="object"&&$!==null&&(D=Pt($)),T=i.getDerivedStateFromProps,($=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==te||G!==D)&&$p(n,f,l,D),pi=!1,G=n.memoizedState,f.state=G,fl(n,l,f,h),dl();var K=n.memoizedState;_!==te||G!==K||pi||e!==null&&e.dependencies!==null&&Fo(e.dependencies)?(typeof T=="function"&&(Dh(n,i,T,l),K=n.memoizedState),(Z=pi||qp(n,i,Z,l,G,K,D)||e!==null&&e.dependencies!==null&&Fo(e.dependencies))?($||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,K,D),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,K,D)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===e.memoizedProps&&G===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&G===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=K),f.props=l,f.state=K,f.context=D,l=Z):(typeof f.componentDidUpdate!="function"||_===e.memoizedProps&&G===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&G===e.memoizedState||(n.flags|=1024),l=!1)}return f=l,ou(e,n),l=(n.flags&128)!==0,f||l?(f=n.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&l?(n.child=hs(n,e.child,null,h),n.child=hs(n,null,i,h)):Ht(e,n,i,h),n.memoizedState=f.state,e=n.child):e=Ra(e,n,h),e}function rg(e,n,i,l){return ss(),n.flags|=256,Ht(e,n,i,l),n.child}var Lh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uh(e){return{baseLanes:e,cachePool:Ym()}}function kh(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=En),e}function lg(e,n,i){var l=n.pendingProps,h=!1,f=(n.flags&128)!==0,_;if((_=f)||(_=e!==null&&e.memoizedState===null?!1:(gt.current&2)!==0),_&&(h=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,e===null){if(Le){if(h?vi(n):_i(),(e=at)?(e=py(e,In),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:hi!==null?{id:ta,overflow:na}:null,retryLane:536870912,hydrationErrors:null},i=zm(e),i.return=n,n.child=i,zt=n,at=null)):e=null,e===null)throw fi(n);return bd(e)?n.lanes=32:n.lanes=536870912,null}var T=l.children;return l=l.fallback,h?(_i(),h=n.mode,T=uu({mode:"hidden",children:T},h),l=is(l,h,i,null),T.return=n,l.return=n,T.sibling=l,n.child=T,l=n.child,l.memoizedState=Uh(i),l.childLanes=kh(e,_,i),n.memoizedState=Lh,vl(null,l)):(vi(n),Bh(n,T))}var D=e.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(f)n.flags&256?(vi(n),n.flags&=-257,n=zh(e,n,i)):n.memoizedState!==null?(_i(),n.child=e.child,n.flags|=128,n=null):(_i(),T=l.fallback,h=n.mode,l=uu({mode:"visible",children:l.children},h),T=is(T,h,i,null),T.flags|=2,l.return=n,T.return=n,l.sibling=T,n.child=l,hs(n,e.child,null,i),l=n.child,l.memoizedState=Uh(i),l.childLanes=kh(e,_,i),n.memoizedState=Lh,n=vl(null,l));else if(vi(n),bd(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var $=_.dgst;_=$,l=Error(r(419)),l.stack="",l.digest=_,rl({value:l,source:null,stack:null}),n=zh(e,n,i)}else if(St||$s(e,n,i,!1),_=(i&e.childLanes)!==0,St||_){if(_=et,_!==null&&(l=Xa(_,i),l!==0&&l!==D.retryLane))throw D.retryLane=l,as(e,l),fn(_,e,l),Oh;_d(T)||vu(),n=zh(e,n,i)}else _d(T)?(n.flags|=192,n.child=e.child,n=null):(e=D.treeContext,at=On(T.nextSibling),zt=n,Le=!0,di=null,In=!1,e!==null&&Fm(n,e),n=Bh(n,l.children),n.flags|=4096);return n}return h?(_i(),T=l.fallback,h=n.mode,D=e.child,$=D.sibling,l=Ta(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,$!==null?T=Ta($,T):(T=is(T,h,i,null),T.flags|=2),T.return=n,l.return=n,l.sibling=T,n.child=l,vl(null,l),l=n.child,T=e.child.memoizedState,T===null?T=Uh(i):(h=T.cachePool,h!==null?(D=Et._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=Ym(),T={baseLanes:T.baseLanes|i,cachePool:h}),l.memoizedState=T,l.childLanes=kh(e,_,i),n.memoizedState=Lh,vl(e.child,l)):(vi(n),i=e.child,e=i.sibling,i=Ta(i,{mode:"visible",children:l.children}),i.return=n,i.sibling=null,e!==null&&(_=n.deletions,_===null?(n.deletions=[e],n.flags|=16):_.push(e)),n.child=i,n.memoizedState=null,i)}function Bh(e,n){return n=uu({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function uu(e,n){return e=yn(22,e,null,n),e.lanes=0,e}function zh(e,n,i){return hs(n,e.child,null,i),e=Bh(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function og(e,n,i){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),th(e.return,n,i)}function Ph(e,n,i,l,h,f){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:h,treeForkCount:f}:(_.isBackwards=n,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=i,_.tailMode=h,_.treeForkCount=f)}function ug(e,n,i){var l=n.pendingProps,h=l.revealOrder,f=l.tail;l=l.children;var _=gt.current,T=(_&2)!==0;if(T?(_=_&1|2,n.flags|=128):_&=1,ie(gt,_),Ht(e,n,l,i),l=Le?sl:0,!T&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&og(e,i,n);else if(e.tag===19)og(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(i=n.child,h=null;i!==null;)e=i.alternate,e!==null&&Zo(e)===null&&(h=i),i=i.sibling;i=h,i===null?(h=n.child,n.child=null):(h=i.sibling,i.sibling=null),Ph(n,!1,h,i,f,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&Zo(e)===null){n.child=h;break}e=h.sibling,h.sibling=i,i=h,h=e}Ph(n,!0,i,null,f,l);break;case"together":Ph(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Ra(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Ti|=n.lanes,(i&n.childLanes)===0)if(e!==null){if($s(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,i=Ta(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Ta(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function Hh(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Fo(e)))}function k0(e,n,i){switch(n.tag){case 3:mt(n,n.stateNode.containerInfo),mi(n,Et,e.memoizedState.cache),ss();break;case 27:case 5:Sn(n);break;case 4:mt(n,n.stateNode.containerInfo);break;case 10:mi(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,fh(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(vi(n),n.flags|=128,null):(i&n.child.childLanes)!==0?lg(e,n,i):(vi(n),e=Ra(e,n,i),e!==null?e.sibling:null);vi(n);break;case 19:var h=(e.flags&128)!==0;if(l=(i&n.childLanes)!==0,l||($s(e,n,i,!1),l=(i&n.childLanes)!==0),h){if(l)return ug(e,n,i);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(gt,gt.current),l)break;return null;case 22:return n.lanes=0,tg(e,n,i,n.pendingProps);case 24:mi(n,Et,e.memoizedState.cache)}return Ra(e,n,i)}function cg(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)St=!0;else{if(!Hh(e,i)&&(n.flags&128)===0)return St=!1,k0(e,n,i);St=(e.flags&131072)!==0}else St=!1,Le&&(n.flags&1048576)!==0&&Hm(n,sl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(e=us(n.elementType),n.type=e,typeof e=="function")Kc(e)?(l=fs(e,l),n.tag=1,n=sg(null,n,e,l,i)):(n.tag=0,n=Vh(null,n,e,l,i));else{if(e!=null){var h=e.$$typeof;if(h===de){n.tag=11,n=Jp(null,n,e,l,i);break e}else if(h===I){n.tag=14,n=Wp(null,n,e,l,i);break e}}throw n=ge(e)||e,Error(r(306,n,""))}}return n;case 0:return Vh(e,n,n.type,n.pendingProps,i);case 1:return l=n.type,h=fs(l,n.pendingProps),sg(e,n,l,h,i);case 3:e:{if(mt(n,n.stateNode.containerInfo),e===null)throw Error(r(387));l=n.pendingProps;var f=n.memoizedState;h=f.element,oh(e,n),fl(n,l,null,i);var _=n.memoizedState;if(l=_.cache,mi(n,Et,l),l!==f.cache&&nh(n,[Et],i,!0),dl(),l=_.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=rg(e,n,l,i);break e}else if(l!==h){h=Cn(Error(r(424)),n),rl(h),n=rg(e,n,l,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(at=On(e.firstChild),zt=n,Le=!0,di=null,In=!0,i=tp(n,null,l,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ss(),l===h){n=Ra(e,n,i);break e}Ht(e,n,l,i)}n=n.child}return n;case 26:return ou(e,n),e===null?(i=Ey(n.type,null,n.pendingProps,null))?n.memoizedState=i:Le||(i=n.type,e=n.pendingProps,l=xu(Ne.current).createElement(i),l[ut]=n,l[Bt]=e,Ft(l,i,e),pt(l),n.stateNode=l):n.memoizedState=Ey(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Sn(n),e===null&&Le&&(l=n.stateNode=vy(n.type,n.pendingProps,Ne.current),zt=n,In=!0,h=at,Ni(n.type)?(Ed=h,at=On(l.firstChild)):at=h),Ht(e,n,n.pendingProps.children,i),ou(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Le&&((h=l=at)&&(l=mE(l,n.type,n.pendingProps,In),l!==null?(n.stateNode=l,zt=n,at=On(l.firstChild),In=!1,h=!0):h=!1),h||fi(n)),Sn(n),h=n.type,f=n.pendingProps,_=e!==null?e.memoizedProps:null,l=f.children,gd(h,f)?l=null:_!==null&&gd(h,_)&&(n.flags|=32),n.memoizedState!==null&&(h=ph(e,n,C0,null,null,i),Ml._currentValue=h),ou(e,n),Ht(e,n,l,i),n.child;case 6:return e===null&&Le&&((e=i=at)&&(i=pE(i,n.pendingProps,In),i!==null?(n.stateNode=i,zt=n,at=null,e=!0):e=!1),e||fi(n)),null;case 13:return lg(e,n,i);case 4:return mt(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=hs(n,null,l,i):Ht(e,n,l,i),n.child;case 11:return Jp(e,n,n.type,n.pendingProps,i);case 7:return Ht(e,n,n.pendingProps,i),n.child;case 8:return Ht(e,n,n.pendingProps.children,i),n.child;case 12:return Ht(e,n,n.pendingProps.children,i),n.child;case 10:return l=n.pendingProps,mi(n,n.type,l.value),Ht(e,n,l.children,i),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,ls(n),h=Pt(h),l=l(h),n.flags|=1,Ht(e,n,l,i),n.child;case 14:return Wp(e,n,n.type,n.pendingProps,i);case 15:return eg(e,n,n.type,n.pendingProps,i);case 19:return ug(e,n,i);case 31:return U0(e,n,i);case 22:return tg(e,n,i,n.pendingProps);case 24:return ls(n),l=Pt(Et),e===null?(h=sh(),h===null&&(h=et,f=ah(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=i),h=f),n.memoizedState={parent:l,cache:h},lh(n),mi(n,Et,h)):((e.lanes&i)!==0&&(oh(e,n),fl(n,null,null,i),dl()),h=e.memoizedState,f=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),mi(n,Et,l)):(l=f.cache,mi(n,Et,l),l!==h.cache&&nh(n,[Et],i,!0))),Ht(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function Ca(e){e.flags|=4}function Fh(e,n,i,l,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(Ug())e.flags|=8192;else throw cs=Ko,rh}else e.flags&=-16777217}function hg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!wy(n))if(Ug())e.flags|=8192;else throw cs=Ko,rh}function cu(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Br():536870912,e.lanes|=n,ar|=n)}function _l(e,n){if(!Le)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function it(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(n)for(var h=e.child;h!==null;)i|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)i|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=i,n}function B0(e,n,i){var l=n.pendingProps;switch(Zc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(n),null;case 1:return it(n),null;case 3:return i=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),xa(Et),tt(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(qs(n)?Ca(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Wc())),it(n),null;case 26:var h=n.type,f=n.memoizedState;return e===null?(Ca(n),f!==null?(it(n),hg(n,f)):(it(n),Fh(n,h,null,l,i))):f?f!==e.memoizedState?(Ca(n),it(n),hg(n,f)):(it(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&Ca(n),it(n),Fh(n,h,e,l,i)),null;case 27:if(kn(n),i=Ne.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Ca(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return it(n),null}e=ce.current,qs(n)?qm(n):(e=vy(h,l,i),n.stateNode=e,Ca(n))}return it(n),null;case 5:if(kn(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Ca(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return it(n),null}if(f=ce.current,qs(n))qm(n);else{var _=xu(Ne.current);switch(f){case 1:f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=_.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?_.createElement(h,{is:l.is}):_.createElement(h)}}f[ut]=n,f[Bt]=l;e:for(_=n.child;_!==null;){if(_.tag===5||_.tag===6)f.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===n)break e;for(;_.sibling===null;){if(_.return===null||_.return===n)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}n.stateNode=f;e:switch(Ft(f,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ca(n)}}return it(n),Fh(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&Ca(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(e=Ne.current,qs(n)){if(e=n.stateNode,i=n.memoizedProps,l=null,h=zt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[ut]=n,e=!!(e.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||ly(e.nodeValue,i)),e||fi(n,!0)}else e=xu(e).createTextNode(l),e[ut]=n,n.stateNode=e}return it(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(l=qs(n),i!==null){if(e===null){if(!l)throw Error(r(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[ut]=n}else ss(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;it(n),e=!1}else i=Wc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(_n(n),n):(_n(n),null);if((n.flags&128)!==0)throw Error(r(558))}return it(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=qs(n),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[ut]=n}else ss(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;it(n),h=!1}else h=Wc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(_n(n),n):(_n(n),null)}return _n(n),(n.flags&128)!==0?(n.lanes=i,n):(i=l!==null,e=e!==null&&e.memoizedState!==null,i&&(l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),cu(n,n.updateQueue),it(n),null);case 4:return tt(),e===null&&hd(n.stateNode.containerInfo),it(n),null;case 10:return xa(n.type),it(n),null;case 19:if(J(gt),l=n.memoizedState,l===null)return it(n),null;if(h=(n.flags&128)!==0,f=l.rendering,f===null)if(h)_l(l,!1);else{if(dt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=Zo(e),f!==null){for(n.flags|=128,_l(l,!1),e=f.updateQueue,n.updateQueue=e,cu(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Bm(i,e),i=i.sibling;return ie(gt,gt.current&1|2),Le&&Sa(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&Ut()>pu&&(n.flags|=128,h=!0,_l(l,!1),n.lanes=4194304)}else{if(!h)if(e=Zo(f),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,cu(n,e),_l(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Le)return it(n),null}else 2*Ut()-l.renderingStartTime>pu&&i!==536870912&&(n.flags|=128,h=!0,_l(l,!1),n.lanes=4194304);l.isBackwards?(f.sibling=n.child,n.child=f):(e=l.last,e!==null?e.sibling=f:n.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Ut(),e.sibling=null,i=gt.current,ie(gt,h?i&1|2:i&1),Le&&Sa(n,l.treeForkCount),e):(it(n),null);case 22:case 23:return _n(n),dh(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(i&536870912)!==0&&(n.flags&128)===0&&(it(n),n.subtreeFlags&6&&(n.flags|=8192)):it(n),i=n.updateQueue,i!==null&&cu(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==i&&(n.flags|=2048),e!==null&&J(os),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),xa(Et),it(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function z0(e,n){switch(Zc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return xa(Et),tt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return kn(n),null;case 31:if(n.memoizedState!==null){if(_n(n),n.alternate===null)throw Error(r(340));ss()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(_n(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));ss()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return J(gt),null;case 4:return tt(),null;case 10:return xa(n.type),null;case 22:case 23:return _n(n),dh(),e!==null&&J(os),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return xa(Et),null;case 25:return null;default:return null}}function dg(e,n){switch(Zc(n),n.tag){case 3:xa(Et),tt();break;case 26:case 27:case 5:kn(n);break;case 4:tt();break;case 31:n.memoizedState!==null&&_n(n);break;case 13:_n(n);break;case 19:J(gt);break;case 10:xa(n.type);break;case 22:case 23:_n(n),dh(),e!==null&&J(os);break;case 24:xa(Et)}}function bl(e,n){try{var i=n.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var h=l.next;i=h;do{if((i.tag&e)===e){l=void 0;var f=i.create,_=i.inst;l=f(),_.destroy=l}i=i.next}while(i!==h)}}catch(T){Xe(n,n.return,T)}}function bi(e,n,i){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&e)===e){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,h=n;var D=i,$=T;try{$()}catch(Z){Xe(h,D,Z)}}}l=l.next}while(l!==f)}}catch(Z){Xe(n,n.return,Z)}}function fg(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{ap(n,i)}catch(l){Xe(e,e.return,l)}}}function mg(e,n,i){i.props=fs(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(l){Xe(e,n,l)}}function El(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof i=="function"?e.refCleanup=i(l):i.current=l}}catch(h){Xe(e,n,h)}}function aa(e,n){var i=e.ref,l=e.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(h){Xe(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(h){Xe(e,n,h)}else i.current=null}function pg(e){var n=e.type,i=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(h){Xe(e,e.return,h)}}function qh(e,n,i){try{var l=e.stateNode;oE(l,e.type,i,n),l[Bt]=n}catch(h){Xe(e,e.return,h)}}function gg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ni(e.type)||e.tag===4}function $h(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ni(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gh(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=It));else if(l!==4&&(l===27&&Ni(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(Gh(e,n,i),e=e.sibling;e!==null;)Gh(e,n,i),e=e.sibling}function hu(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(l!==4&&(l===27&&Ni(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(hu(e,n,i),e=e.sibling;e!==null;)hu(e,n,i),e=e.sibling}function yg(e){var n=e.stateNode,i=e.memoizedProps;try{for(var l=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);Ft(n,l,i),n[ut]=e,n[Bt]=i}catch(f){Xe(e,e.return,f)}}var ja=!1,At=!1,Kh=!1,vg=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function P0(e,n){if(e=e.containerInfo,md=Iu,e=jm(e),zc(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var _=0,T=-1,D=-1,$=0,Z=0,te=e,G=null;t:for(;;){for(var K;te!==i||h!==0&&te.nodeType!==3||(T=_+h),te!==f||l!==0&&te.nodeType!==3||(D=_+l),te.nodeType===3&&(_+=te.nodeValue.length),(K=te.firstChild)!==null;)G=te,te=K;for(;;){if(te===e)break t;if(G===i&&++$===h&&(T=_),G===f&&++Z===l&&(D=_),(K=te.nextSibling)!==null)break;te=G,G=te.parentNode}te=K}i=T===-1||D===-1?null:{start:T,end:D}}else i=null}i=i||{start:0,end:0}}else i=null;for(pd={focusedElem:e,selectionRange:i},Iu=!1,Vt=n;Vt!==null;)if(n=Vt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Vt=e;else for(;Vt!==null;){switch(n=Vt,f=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)h=e[i],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=n,h=f.memoizedProps,f=f.memoizedState,l=i.stateNode;try{var he=fs(i.type,h);e=l.getSnapshotBeforeUpdate(he,f),l.__reactInternalSnapshotBeforeUpdate=e}catch(ve){Xe(i,i.return,ve)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)vd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,Vt=e;break}Vt=n.return}}function _g(e,n,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:Ia(e,i),l&4&&bl(5,i);break;case 1:if(Ia(e,i),l&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(_){Xe(i,i.return,_)}else{var h=fs(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(_){Xe(i,i.return,_)}}l&64&&fg(i),l&512&&El(i,i.return);break;case 3:if(Ia(e,i),l&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{ap(e,n)}catch(_){Xe(i,i.return,_)}}break;case 27:n===null&&l&4&&yg(i);case 26:case 5:Ia(e,i),n===null&&l&4&&pg(i),l&512&&El(i,i.return);break;case 12:Ia(e,i);break;case 31:Ia(e,i),l&4&&Tg(e,i);break;case 13:Ia(e,i),l&4&&Sg(e,i),l&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=X0.bind(null,i),gE(e,i))));break;case 22:if(l=i.memoizedState!==null||ja,!l){n=n!==null&&n.memoizedState!==null||At,h=ja;var f=At;ja=l,(At=n)&&!f?Ma(e,i,(i.subtreeFlags&8772)!==0):Ia(e,i),ja=h,At=f}break;case 30:break;default:Ia(e,i)}}function bg(e){var n=e.alternate;n!==null&&(e.alternate=null,bg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&$i(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var rt=null,un=!1;function Da(e,n,i){for(i=i.child;i!==null;)Eg(e,n,i),i=i.sibling}function Eg(e,n,i){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount($a,i)}catch{}switch(i.tag){case 26:At||aa(i,n),Da(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:At||aa(i,n);var l=rt,h=un;Ni(i.type)&&(rt=i.stateNode,un=!1),Da(e,n,i),jl(i.stateNode),rt=l,un=h;break;case 5:At||aa(i,n);case 6:if(l=rt,h=un,rt=null,Da(e,n,i),rt=l,un=h,rt!==null)if(un)try{(rt.nodeType===9?rt.body:rt.nodeName==="HTML"?rt.ownerDocument.body:rt).removeChild(i.stateNode)}catch(f){Xe(i,n,f)}else try{rt.removeChild(i.stateNode)}catch(f){Xe(i,n,f)}break;case 18:rt!==null&&(un?(e=rt,fy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),hr(e)):fy(rt,i.stateNode));break;case 4:l=rt,h=un,rt=i.stateNode.containerInfo,un=!0,Da(e,n,i),rt=l,un=h;break;case 0:case 11:case 14:case 15:bi(2,i,n),At||bi(4,i,n),Da(e,n,i);break;case 1:At||(aa(i,n),l=i.stateNode,typeof l.componentWillUnmount=="function"&&mg(i,n,l)),Da(e,n,i);break;case 21:Da(e,n,i);break;case 22:At=(l=At)||i.memoizedState!==null,Da(e,n,i),At=l;break;default:Da(e,n,i)}}function Tg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{hr(e)}catch(i){Xe(n,n.return,i)}}}function Sg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{hr(e)}catch(i){Xe(n,n.return,i)}}function H0(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new vg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new vg),n;default:throw Error(r(435,e.tag))}}function du(e,n){var i=H0(e);n.forEach(function(l){if(!i.has(l)){i.add(l);var h=Z0.bind(null,e,l);l.then(h,h)}})}function cn(e,n){var i=n.deletions;if(i!==null)for(var l=0;l<i.length;l++){var h=i[l],f=e,_=n,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(Ni(T.type)){rt=T.stateNode,un=!1;break e}break;case 5:rt=T.stateNode,un=!1;break e;case 3:case 4:rt=T.stateNode.containerInfo,un=!0;break e}T=T.return}if(rt===null)throw Error(r(160));Eg(f,_,h),rt=null,un=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Ag(n,e),n=n.sibling}var Fn=null;function Ag(e,n){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:cn(n,e),hn(e),l&4&&(bi(3,e,e.return),bl(3,e),bi(5,e,e.return));break;case 1:cn(n,e),hn(e),l&512&&(At||i===null||aa(i,i.return)),l&64&&ja&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var h=Fn;if(cn(n,e),hn(e),l&512&&(At||i===null||aa(i,i.return)),l&4){var f=i!==null?i.memoizedState:null;if(l=e.memoizedState,i===null)if(l===null)if(e.stateNode===null){e:{l=e.type,i=e.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[ma]||f[ut]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Ft(f,l,i),f[ut]=e,pt(f),l=f;break e;case"link":var _=Ay("link","href",h).get(l+(i.href||""));if(_){for(var T=0;T<_.length;T++)if(f=_[T],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){_.splice(T,1);break t}}f=h.createElement(l),Ft(f,l,i),h.head.appendChild(f);break;case"meta":if(_=Ay("meta","content",h).get(l+(i.content||""))){for(T=0;T<_.length;T++)if(f=_[T],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){_.splice(T,1);break t}}f=h.createElement(l),Ft(f,l,i),h.head.appendChild(f);break;default:throw Error(r(468,l))}f[ut]=e,pt(f),l=f}e.stateNode=l}else xy(h,e.type,e.stateNode);else e.stateNode=Sy(h,l,e.memoizedProps);else f!==l?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,l===null?xy(h,e.type,e.stateNode):Sy(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&qh(e,e.memoizedProps,i.memoizedProps)}break;case 27:cn(n,e),hn(e),l&512&&(At||i===null||aa(i,i.return)),i!==null&&l&4&&qh(e,e.memoizedProps,i.memoizedProps);break;case 5:if(cn(n,e),hn(e),l&512&&(At||i===null||aa(i,i.return)),e.flags&32){h=e.stateNode;try{Nn(h,"")}catch(he){Xe(e,e.return,he)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,qh(e,h,i!==null?i.memoizedProps:h)),l&1024&&(Kh=!0);break;case 6:if(cn(n,e),hn(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,i=e.stateNode;try{i.nodeValue=l}catch(he){Xe(e,e.return,he)}}break;case 3:if(Ru=null,h=Fn,Fn=wu(n.containerInfo),cn(n,e),Fn=h,hn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{hr(n.containerInfo)}catch(he){Xe(e,e.return,he)}Kh&&(Kh=!1,xg(e));break;case 4:l=Fn,Fn=wu(e.stateNode.containerInfo),cn(n,e),hn(e),Fn=l;break;case 12:cn(n,e),hn(e);break;case 31:cn(n,e),hn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,du(e,l)));break;case 13:cn(n,e),hn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(mu=Ut()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,du(e,l)));break;case 22:h=e.memoizedState!==null;var D=i!==null&&i.memoizedState!==null,$=ja,Z=At;if(ja=$||h,At=Z||D,cn(n,e),At=Z,ja=$,hn(e),l&8192)e:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(i===null||D||ja||At||ms(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){D=i=n;try{if(f=D.stateNode,h)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=D.stateNode;var te=D.memoizedProps.style,G=te!=null&&te.hasOwnProperty("display")?te.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(he){Xe(D,D.return,he)}}}else if(n.tag===6){if(i===null){D=n;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(he){Xe(D,D.return,he)}}}else if(n.tag===18){if(i===null){D=n;try{var K=D.stateNode;h?my(K,!0):my(D.stateNode,!1)}catch(he){Xe(D,D.return,he)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,du(e,i))));break;case 19:cn(n,e),hn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,du(e,l)));break;case 30:break;case 21:break;default:cn(n,e),hn(e)}}function hn(e){var n=e.flags;if(n&2){try{for(var i,l=e.return;l!==null;){if(gg(l)){i=l;break}l=l.return}if(i==null)throw Error(r(160));switch(i.tag){case 27:var h=i.stateNode,f=$h(e);hu(e,f,h);break;case 5:var _=i.stateNode;i.flags&32&&(Nn(_,""),i.flags&=-33);var T=$h(e);hu(e,T,_);break;case 3:case 4:var D=i.stateNode.containerInfo,$=$h(e);Gh(e,$,D);break;default:throw Error(r(161))}}catch(Z){Xe(e,e.return,Z)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function xg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;xg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Ia(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)_g(e,n.alternate,n),n=n.sibling}function ms(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:bi(4,n,n.return),ms(n);break;case 1:aa(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&mg(n,n.return,i),ms(n);break;case 27:jl(n.stateNode);case 26:case 5:aa(n,n.return),ms(n);break;case 22:n.memoizedState===null&&ms(n);break;case 30:ms(n);break;default:ms(n)}e=e.sibling}}function Ma(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=e,f=n,_=f.flags;switch(f.tag){case 0:case 11:case 15:Ma(h,f,i),bl(4,f);break;case 1:if(Ma(h,f,i),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch($){Xe(l,l.return,$)}if(l=f,h=l.updateQueue,h!==null){var T=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)np(D[h],T)}catch($){Xe(l,l.return,$)}}i&&_&64&&fg(f),El(f,f.return);break;case 27:yg(f);case 26:case 5:Ma(h,f,i),i&&l===null&&_&4&&pg(f),El(f,f.return);break;case 12:Ma(h,f,i);break;case 31:Ma(h,f,i),i&&_&4&&Tg(h,f);break;case 13:Ma(h,f,i),i&&_&4&&Sg(h,f);break;case 22:f.memoizedState===null&&Ma(h,f,i),El(f,f.return);break;case 30:break;default:Ma(h,f,i)}n=n.sibling}}function Qh(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&ll(i))}function Yh(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ll(e))}function qn(e,n,i,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)wg(e,n,i,l),n=n.sibling}function wg(e,n,i,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:qn(e,n,i,l),h&2048&&bl(9,n);break;case 1:qn(e,n,i,l);break;case 3:qn(e,n,i,l),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ll(e)));break;case 12:if(h&2048){qn(e,n,i,l),e=n.stateNode;try{var f=n.memoizedProps,_=f.id,T=f.onPostCommit;typeof T=="function"&&T(_,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){Xe(n,n.return,D)}}else qn(e,n,i,l);break;case 31:qn(e,n,i,l);break;case 13:qn(e,n,i,l);break;case 23:break;case 22:f=n.stateNode,_=n.alternate,n.memoizedState!==null?f._visibility&2?qn(e,n,i,l):Tl(e,n):f._visibility&2?qn(e,n,i,l):(f._visibility|=2,er(e,n,i,l,(n.subtreeFlags&10256)!==0||!1)),h&2048&&Qh(_,n);break;case 24:qn(e,n,i,l),h&2048&&Yh(n.alternate,n);break;default:qn(e,n,i,l)}}function er(e,n,i,l,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=e,_=n,T=i,D=l,$=_.flags;switch(_.tag){case 0:case 11:case 15:er(f,_,T,D,h),bl(8,_);break;case 23:break;case 22:var Z=_.stateNode;_.memoizedState!==null?Z._visibility&2?er(f,_,T,D,h):Tl(f,_):(Z._visibility|=2,er(f,_,T,D,h)),h&&$&2048&&Qh(_.alternate,_);break;case 24:er(f,_,T,D,h),h&&$&2048&&Yh(_.alternate,_);break;default:er(f,_,T,D,h)}n=n.sibling}}function Tl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,l=n,h=l.flags;switch(l.tag){case 22:Tl(i,l),h&2048&&Qh(l.alternate,l);break;case 24:Tl(i,l),h&2048&&Yh(l.alternate,l);break;default:Tl(i,l)}n=n.sibling}}var Sl=8192;function tr(e,n,i){if(e.subtreeFlags&Sl)for(e=e.child;e!==null;)Ng(e,n,i),e=e.sibling}function Ng(e,n,i){switch(e.tag){case 26:tr(e,n,i),e.flags&Sl&&e.memoizedState!==null&&RE(i,Fn,e.memoizedState,e.memoizedProps);break;case 5:tr(e,n,i);break;case 3:case 4:var l=Fn;Fn=wu(e.stateNode.containerInfo),tr(e,n,i),Fn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Sl,Sl=16777216,tr(e,n,i),Sl=l):tr(e,n,i));break;default:tr(e,n,i)}}function Rg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Al(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];Vt=l,jg(l,e)}Rg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Cg(e),e=e.sibling}function Cg(e){switch(e.tag){case 0:case 11:case 15:Al(e),e.flags&2048&&bi(9,e,e.return);break;case 3:Al(e);break;case 12:Al(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,fu(e)):Al(e);break;default:Al(e)}}function fu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];Vt=l,jg(l,e)}Rg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:bi(8,n,n.return),fu(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,fu(n));break;default:fu(n)}e=e.sibling}}function jg(e,n){for(;Vt!==null;){var i=Vt;switch(i.tag){case 0:case 11:case 15:bi(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ll(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,Vt=l;else e:for(i=e;Vt!==null;){l=Vt;var h=l.sibling,f=l.return;if(bg(l),l===i){Vt=null;break e}if(h!==null){h.return=f,Vt=h;break e}Vt=f}}}var F0={getCacheForType:function(e){var n=Pt(Et),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return Pt(Et).controller.signal}},q0=typeof WeakMap=="function"?WeakMap:Map,Ge=0,et=null,De=null,Me=0,Ye=0,bn=null,Ei=!1,nr=!1,Xh=!1,Oa=0,dt=0,Ti=0,ps=0,Zh=0,En=0,ar=0,xl=null,dn=null,Jh=!1,mu=0,Dg=0,pu=1/0,gu=null,Si=null,Ct=0,Ai=null,ir=null,Va=0,Wh=0,ed=null,Ig=null,wl=0,td=null;function Tn(){return(Ge&2)!==0&&Me!==0?Me&-Me:X.T!==null?ld():fa()}function Mg(){if(En===0)if((Me&536870912)===0||Le){var e=Kn;Kn<<=1,(Kn&3932160)===0&&(Kn=262144),En=e}else En=536870912;return e=vn.current,e!==null&&(e.flags|=32),En}function fn(e,n,i){(e===et&&(Ye===2||Ye===9)||e.cancelPendingCommit!==null)&&(sr(e,0),xi(e,Me,En,!1)),Qa(e,i),((Ge&2)===0||e!==et)&&(e===et&&((Ge&2)===0&&(ps|=i),dt===4&&xi(e,Me,En,!1)),ia(e))}function Og(e,n,i){if((Ge&6)!==0)throw Error(r(327));var l=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Ka(e,n),h=l?K0(e,n):ad(e,n,!0),f=l;do{if(h===0){nr&&!l&&xi(e,n,0,!1);break}else{if(i=e.current.alternate,f&&!$0(i)){h=ad(e,n,!1),f=!1;continue}if(h===2){if(f=n,e.errorRecoveryDisabledLanes&f)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;e:{var T=e;h=xl;var D=T.current.memoizedState.isDehydrated;if(D&&(sr(T,_).flags|=256),_=ad(T,_,!1),_!==2){if(Xh&&!D){T.errorRecoveryDisabledLanes|=f,ps|=f,h=4;break e}f=dn,dn=h,f!==null&&(dn===null?dn=f:dn.push.apply(dn,f))}h=_}if(f=!1,h!==2)continue}}if(h===1){sr(e,0),xi(e,n,0,!0);break}e:{switch(l=e,f=h,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:xi(l,n,En,!Ei);break e;case 2:dn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=mu+300-Ut(),10<h)){if(xi(l,n,En,!Ei),xn(l,0,!0)!==0)break e;Va=n,l.timeoutHandle=hy(Vg.bind(null,l,i,dn,gu,Jh,n,En,ps,ar,Ei,f,"Throttled",-0,0),h);break e}Vg(l,i,dn,gu,Jh,n,En,ps,ar,Ei,f,null,-0,0)}}break}while(!0);ia(e)}function Vg(e,n,i,l,h,f,_,T,D,$,Z,te,G,K){if(e.timeoutHandle=-1,te=n.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:It},Ng(n,f,te);var he=(f&62914560)===f?mu-Ut():(f&4194048)===f?Dg-Ut():0;if(he=CE(te,he),he!==null){Va=f,e.cancelPendingCommit=he(Fg.bind(null,e,n,f,i,l,h,_,T,D,Z,te,null,G,K)),xi(e,f,_,!$);return}}Fg(e,n,f,i,l,h,_,T,D)}function $0(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var h=i[l],f=h.getSnapshot;h=h.value;try{if(!gn(f(),h))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function xi(e,n,i,l){n&=~Zh,n&=~ps,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var h=n;0<h;){var f=31-en(h),_=1<<f;l[f]=-1,h&=~_}i!==0&&zr(e,i,n)}function yu(){return(Ge&6)===0?(Nl(0),!1):!0}function nd(){if(De!==null){if(Ye===0)var e=De.return;else e=De,Aa=rs=null,vh(e),Ys=null,ul=0,e=De;for(;e!==null;)dg(e.alternate,e),e=e.return;De=null}}function sr(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,hE(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Va=0,nd(),et=e,De=i=Ta(e.current,null),Me=n,Ye=0,bn=null,Ei=!1,nr=Ka(e,n),Xh=!1,ar=En=Zh=ps=Ti=dt=0,dn=xl=null,Jh=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var h=31-en(l),f=1<<h;n|=e[h],l&=~f}return Oa=n,ko(),i}function Lg(e,n){xe=null,X.H=yl,n===Qs||n===Go?(n=Jm(),Ye=3):n===rh?(n=Jm(),Ye=4):Ye=n===Oh?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,bn=n,De===null&&(dt=1,ru(e,Cn(n,e.current)))}function Ug(){var e=vn.current;return e===null?!0:(Me&4194048)===Me?Mn===null:(Me&62914560)===Me||(Me&536870912)!==0?e===Mn:!1}function kg(){var e=X.H;return X.H=yl,e===null?yl:e}function Bg(){var e=X.A;return X.A=F0,e}function vu(){dt=4,Ei||(Me&4194048)!==Me&&vn.current!==null||(nr=!0),(Ti&134217727)===0&&(ps&134217727)===0||et===null||xi(et,Me,En,!1)}function ad(e,n,i){var l=Ge;Ge|=2;var h=kg(),f=Bg();(et!==e||Me!==n)&&(gu=null,sr(e,n)),n=!1;var _=dt;e:do try{if(Ye!==0&&De!==null){var T=De,D=bn;switch(Ye){case 8:nd(),_=6;break e;case 3:case 2:case 9:case 6:vn.current===null&&(n=!0);var $=Ye;if(Ye=0,bn=null,rr(e,T,D,$),i&&nr){_=0;break e}break;default:$=Ye,Ye=0,bn=null,rr(e,T,D,$)}}G0(),_=dt;break}catch(Z){Lg(e,Z)}while(!0);return n&&e.shellSuspendCounter++,Aa=rs=null,Ge=l,X.H=h,X.A=f,De===null&&(et=null,Me=0,ko()),_}function G0(){for(;De!==null;)zg(De)}function K0(e,n){var i=Ge;Ge|=2;var l=kg(),h=Bg();et!==e||Me!==n?(gu=null,pu=Ut()+500,sr(e,n)):nr=Ka(e,n);e:do try{if(Ye!==0&&De!==null){n=De;var f=bn;t:switch(Ye){case 1:Ye=0,bn=null,rr(e,n,f,1);break;case 2:case 9:if(Xm(f)){Ye=0,bn=null,Pg(n);break}n=function(){Ye!==2&&Ye!==9||et!==e||(Ye=7),ia(e)},f.then(n,n);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:Xm(f)?(Ye=0,bn=null,Pg(n)):(Ye=0,bn=null,rr(e,n,f,7));break;case 5:var _=null;switch(De.tag){case 26:_=De.memoizedState;case 5:case 27:var T=De;if(_?wy(_):T.stateNode.complete){Ye=0,bn=null;var D=T.sibling;if(D!==null)De=D;else{var $=T.return;$!==null?(De=$,_u($)):De=null}break t}}Ye=0,bn=null,rr(e,n,f,5);break;case 6:Ye=0,bn=null,rr(e,n,f,6);break;case 8:nd(),dt=6;break e;default:throw Error(r(462))}}Q0();break}catch(Z){Lg(e,Z)}while(!0);return Aa=rs=null,X.H=l,X.A=h,Ge=i,De!==null?0:(et=null,Me=0,ko(),dt)}function Q0(){for(;De!==null&&!Cc();)zg(De)}function zg(e){var n=cg(e.alternate,e,Oa);e.memoizedProps=e.pendingProps,n===null?_u(e):De=n}function Pg(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=ig(i,n,n.pendingProps,n.type,void 0,Me);break;case 11:n=ig(i,n,n.pendingProps,n.type.render,n.ref,Me);break;case 5:vh(n);default:dg(i,n),n=De=Bm(n,Oa),n=cg(i,n,Oa)}e.memoizedProps=e.pendingProps,n===null?_u(e):De=n}function rr(e,n,i,l){Aa=rs=null,vh(n),Ys=null,ul=0;var h=n.return;try{if(L0(e,h,n,i,Me)){dt=1,ru(e,Cn(i,e.current)),De=null;return}}catch(f){if(h!==null)throw De=h,f;dt=1,ru(e,Cn(i,e.current)),De=null;return}n.flags&32768?(Le||l===1?e=!0:nr||(Me&536870912)!==0?e=!1:(Ei=e=!0,(l===2||l===9||l===3||l===6)&&(l=vn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Hg(n,e)):_u(n)}function _u(e){var n=e;do{if((n.flags&32768)!==0){Hg(n,Ei);return}e=n.return;var i=B0(n.alternate,n,Oa);if(i!==null){De=i;return}if(n=n.sibling,n!==null){De=n;return}De=n=e}while(n!==null);dt===0&&(dt=5)}function Hg(e,n){do{var i=z0(e.alternate,e);if(i!==null){i.flags&=32767,De=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){De=e;return}De=e=i}while(e!==null);dt=6,De=null}function Fg(e,n,i,l,h,f,_,T,D){e.cancelPendingCommit=null;do bu();while(Ct!==0);if((Ge&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(f=n.lanes|n.childLanes,f|=$c,kt(e,i,f,_,T,D),e===et&&(De=et=null,Me=0),ir=n,Ai=e,Va=i,Wh=f,ed=h,Ig=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,J0(ha,function(){return Qg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,h=ae.p,ae.p=2,_=Ge,Ge|=4;try{P0(e,n,i)}finally{Ge=_,ae.p=h,X.T=l}}Ct=1,qg(),$g(),Gg()}}function qg(){if(Ct===1){Ct=0;var e=Ai,n=ir,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=X.T,X.T=null;var l=ae.p;ae.p=2;var h=Ge;Ge|=4;try{Ag(n,e);var f=pd,_=jm(e.containerInfo),T=f.focusedElem,D=f.selectionRange;if(_!==T&&T&&T.ownerDocument&&Cm(T.ownerDocument.documentElement,T)){if(D!==null&&zc(T)){var $=D.start,Z=D.end;if(Z===void 0&&(Z=$),"selectionStart"in T)T.selectionStart=$,T.selectionEnd=Math.min(Z,T.value.length);else{var te=T.ownerDocument||document,G=te&&te.defaultView||window;if(G.getSelection){var K=G.getSelection(),he=T.textContent.length,ve=Math.min(D.start,he),We=D.end===void 0?ve:Math.min(D.end,he);!K.extend&&ve>We&&(_=We,We=ve,ve=_);var z=Rm(T,ve),V=Rm(T,We);if(z&&V&&(K.rangeCount!==1||K.anchorNode!==z.node||K.anchorOffset!==z.offset||K.focusNode!==V.node||K.focusOffset!==V.offset)){var q=te.createRange();q.setStart(z.node,z.offset),K.removeAllRanges(),ve>We?(K.addRange(q),K.extend(V.node,V.offset)):(q.setEnd(V.node,V.offset),K.addRange(q))}}}}for(te=[],K=T;K=K.parentNode;)K.nodeType===1&&te.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<te.length;T++){var W=te[T];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Iu=!!md,pd=md=null}finally{Ge=h,ae.p=l,X.T=i}}e.current=n,Ct=2}}function $g(){if(Ct===2){Ct=0;var e=Ai,n=ir,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=X.T,X.T=null;var l=ae.p;ae.p=2;var h=Ge;Ge|=4;try{_g(e,n.alternate,n)}finally{Ge=h,ae.p=l,X.T=i}}Ct=3}}function Gg(){if(Ct===4||Ct===3){Ct=0,Lr();var e=Ai,n=ir,i=Va,l=Ig;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ct=5:(Ct=0,ir=Ai=null,Kg(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Si=null),Hr(i),n=n.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot($a,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=X.T,h=ae.p,ae.p=2,X.T=null;try{for(var f=e.onRecoverableError,_=0;_<l.length;_++){var T=l[_];f(T.value,{componentStack:T.stack})}}finally{X.T=n,ae.p=h}}(Va&3)!==0&&bu(),ia(e),h=e.pendingLanes,(i&261930)!==0&&(h&42)!==0?e===td?wl++:(wl=0,td=e):wl=0,Nl(0)}}function Kg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,ll(n)))}function bu(){return qg(),$g(),Gg(),Qg()}function Qg(){if(Ct!==5)return!1;var e=Ai,n=Wh;Wh=0;var i=Hr(Va),l=X.T,h=ae.p;try{ae.p=32>i?32:i,X.T=null,i=ed,ed=null;var f=Ai,_=Va;if(Ct=0,ir=Ai=null,Va=0,(Ge&6)!==0)throw Error(r(331));var T=Ge;if(Ge|=4,Cg(f.current),wg(f,f.current,_,i),Ge=T,Nl(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot($a,f)}catch{}return!0}finally{ae.p=h,X.T=l,Kg(e,n)}}function Yg(e,n,i){n=Cn(i,n),n=Mh(e.stateNode,n,2),e=yi(e,n,2),e!==null&&(Qa(e,2),ia(e))}function Xe(e,n,i){if(e.tag===3)Yg(e,e,i);else for(;n!==null;){if(n.tag===3){Yg(n,e,i);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Si===null||!Si.has(l))){e=Cn(i,e),i=Xp(2),l=yi(n,i,2),l!==null&&(Zp(i,l,n,e),Qa(l,2),ia(l));break}}n=n.return}}function id(e,n,i){var l=e.pingCache;if(l===null){l=e.pingCache=new q0;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(i)||(Xh=!0,h.add(i),e=Y0.bind(null,e,n,i),n.then(e,e))}function Y0(e,n,i){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,et===e&&(Me&i)===i&&(dt===4||dt===3&&(Me&62914560)===Me&&300>Ut()-mu?(Ge&2)===0&&sr(e,0):Zh|=i,ar===Me&&(ar=0)),ia(e)}function Xg(e,n){n===0&&(n=Br()),e=as(e,n),e!==null&&(Qa(e,n),ia(e))}function X0(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),Xg(e,i)}function Z0(e,n){var i=0;switch(e.tag){case 31:case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(i=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),Xg(e,i)}function J0(e,n){return Hi(e,n)}var Eu=null,lr=null,sd=!1,Tu=!1,rd=!1,wi=0;function ia(e){e!==lr&&e.next===null&&(lr===null?Eu=lr=e:lr=lr.next=e),Tu=!0,sd||(sd=!0,eE())}function Nl(e,n){if(!rd&&Tu){rd=!0;do for(var i=!1,l=Eu;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var _=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-en(42|e)+1)-1,f&=h&~(_&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,ey(l,f))}else f=Me,f=xn(l,l===et?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Ka(l,f)||(i=!0,ey(l,f));l=l.next}while(i);rd=!1}}function W0(){Zg()}function Zg(){Tu=sd=!1;var e=0;wi!==0&&cE()&&(e=wi);for(var n=Ut(),i=null,l=Eu;l!==null;){var h=l.next,f=Jg(l,n);f===0?(l.next=null,i===null?Eu=h:i.next=h,h===null&&(lr=i)):(i=l,(e!==0||(f&3)!==0)&&(Tu=!0)),l=h}Ct!==0&&Ct!==5||Nl(e),wi!==0&&(wi=0)}function Jg(e,n){for(var i=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var _=31-en(f),T=1<<_,D=h[_];D===-1?((T&i)===0||(T&l)!==0)&&(h[_]=Ns(T,n)):D<=n&&(e.expiredLanes|=T),f&=~T}if(n=et,i=Me,i=xn(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,i===0||e===n&&(Ye===2||Ye===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&ws(l),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Ka(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(l!==null&&ws(l),Hr(i)){case 2:case 8:i=Dt;break;case 32:i=ha;break;case 268435456:i=Ur;break;default:i=ha}return l=Wg.bind(null,e),i=Hi(i,l),e.callbackPriority=n,e.callbackNode=i,n}return l!==null&&l!==null&&ws(l),e.callbackPriority=2,e.callbackNode=null,2}function Wg(e,n){if(Ct!==0&&Ct!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(bu()&&e.callbackNode!==i)return null;var l=Me;return l=xn(e,e===et?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Og(e,l,n),Jg(e,Ut()),e.callbackNode!=null&&e.callbackNode===i?Wg.bind(null,e):null)}function ey(e,n){if(bu())return null;Og(e,n,!0)}function eE(){dE(function(){(Ge&6)!==0?Hi(Rt,W0):Zg()})}function ld(){if(wi===0){var e=Gs;e===0&&(e=qi,qi<<=1,(qi&261888)===0&&(qi=256)),wi=e}return wi}function ty(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Jn(""+e)}function ny(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function tE(e,n,i,l,h){if(n==="submit"&&i&&i.stateNode===h){var f=ty((h[Bt]||null).action),_=l.submitter;_&&(n=(n=_[Bt]||null)?ty(n.formAction):_.getAttribute("formAction"),n!==null&&(f=n,_=null));var T=new Xi("action","action",null,l,h);e.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(wi!==0){var D=_?ny(h,_):new FormData(h);Nh(i,{pending:!0,data:D,method:h.method,action:f},null,D)}}else typeof f=="function"&&(T.preventDefault(),D=_?ny(h,_):new FormData(h),Nh(i,{pending:!0,data:D,method:h.method,action:f},f,D))},currentTarget:h}]})}}for(var od=0;od<qc.length;od++){var ud=qc[od],nE=ud.toLowerCase(),aE=ud[0].toUpperCase()+ud.slice(1);Hn(nE,"on"+aE)}Hn(Mm,"onAnimationEnd"),Hn(Om,"onAnimationIteration"),Hn(Vm,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(_0,"onTransitionRun"),Hn(b0,"onTransitionStart"),Hn(E0,"onTransitionCancel"),Hn(Lm,"onTransitionEnd"),Zn("onMouseEnter",["mouseout","mouseover"]),Zn("onMouseLeave",["mouseout","mouseover"]),Zn("onPointerEnter",["pointerout","pointerover"]),Zn("onPointerLeave",["pointerout","pointerover"]),tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tn("onBeforeInput",["compositionend","keypress","textInput","paste"]),tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rl));function ay(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],h=l.event;l=l.listeners;e:{var f=void 0;if(n)for(var _=l.length-1;0<=_;_--){var T=l[_],D=T.instance,$=T.currentTarget;if(T=T.listener,D!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=$;try{f(h)}catch(Z){Uo(Z)}h.currentTarget=null,f=D}else for(_=0;_<l.length;_++){if(T=l[_],D=T.instance,$=T.currentTarget,T=T.listener,D!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=$;try{f(h)}catch(Z){Uo(Z)}h.currentTarget=null,f=D}}}}function Ie(e,n){var i=n[Za];i===void 0&&(i=n[Za]=new Set);var l=e+"__bubble";i.has(l)||(iy(n,e,2,!1),i.add(l))}function cd(e,n,i){var l=0;n&&(l|=4),iy(i,e,l,n)}var Su="_reactListening"+Math.random().toString(36).slice(2);function hd(e){if(!e[Su]){e[Su]=!0,Rs.forEach(function(i){i!=="selectionchange"&&(iE.has(i)||cd(i,!1,e),cd(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Su]||(n[Su]=!0,cd("selectionchange",!1,n))}}function iy(e,n,i,l){switch(My(n)){case 2:var h=IE;break;case 8:h=ME;break;default:h=wd}i=h.bind(null,n,i,e),h=void 0,!Xr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(n,i,{capture:!0,passive:h}):e.addEventListener(n,i,!0):h!==void 0?e.addEventListener(n,i,{passive:h}):e.addEventListener(n,i,!1)}function dd(e,n,i,l,h){var f=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===h)break;if(_===4)for(_=l.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;T!==null;){if(_=pa(T),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){l=f=_;continue e}T=T.parentNode}}l=l.return}Eo(function(){var $=f,Z=Ms(i),te=[];e:{var G=Um.get(e);if(G!==void 0){var K=Xi,he=e;switch(e){case"keypress":if(Yi(i)===0)break e;case"keydown":case"keyup":K=jo;break;case"focusin":he="focus",K=li;break;case"focusout":he="blur",K=li;break;case"beforeblur":case"afterblur":K=li;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=So;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Ao;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Io;break;case Mm:case Om:case Vm:K=Ls;break;case Lm:K=Us;break;case"scroll":case"scrollend":K=To;break;case"wheel":K=Oo;break;case"copy":case"cut":case"paste":K=wo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=tl;break;case"toggle":case"beforetoggle":K=ui}var ve=(n&4)!==0,We=!ve&&(e==="scroll"||e==="scrollend"),z=ve?G!==null?G+"Capture":null:G;ve=[];for(var V=$,q;V!==null;){var W=V;if(q=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||q===null||z===null||(W=ln(V,z),W!=null&&ve.push(Cl(V,W,q))),We)break;V=V.return}0<ve.length&&(G=new K(G,he,null,i,Z),te.push({event:G,listeners:ve}))}}if((n&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",G&&i!==Is&&(he=i.relatedTarget||i.fromElement)&&(pa(he)||he[Yn]))break e;if((K||G)&&(G=Z.window===Z?Z:(G=Z.ownerDocument)?G.defaultView||G.parentWindow:window,K?(he=i.relatedTarget||i.toElement,K=$,he=he?pa(he):null,he!==null&&(We=c(he),ve=he.tag,he!==We||ve!==5&&ve!==27&&ve!==6)&&(he=null)):(K=null,he=$),K!==he)){if(ve=So,W="onMouseLeave",z="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(ve=tl,W="onPointerLeave",z="onPointerEnter",V="pointer"),We=K==null?G:Gi(K),q=he==null?G:Gi(he),G=new ve(W,V+"leave",K,i,Z),G.target=We,G.relatedTarget=q,W=null,pa(Z)===$&&(ve=new ve(z,V+"enter",he,i,Z),ve.target=q,ve.relatedTarget=We,W=ve),We=W,K&&he)t:{for(ve=sE,z=K,V=he,q=0,W=z;W;W=ve(W))q++;W=0;for(var ye=V;ye;ye=ve(ye))W++;for(;0<q-W;)z=ve(z),q--;for(;0<W-q;)V=ve(V),W--;for(;q--;){if(z===V||V!==null&&z===V.alternate){ve=z;break t}z=ve(z),V=ve(V)}ve=null}else ve=null;K!==null&&sy(te,G,K,ve,!1),he!==null&&We!==null&&sy(te,We,he,ve,!0)}}e:{if(G=$?Gi($):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var qe=Tm;else if(on(G))if(Sm)qe=g0;else{qe=m0;var fe=f0}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?$&&Qr($.elementType)&&(qe=Tm):qe=p0;if(qe&&(qe=qe(e,$))){es(te,qe,i,Z);break e}fe&&fe(e,G,$),e==="focusout"&&$&&G.type==="number"&&$.memoizedProps.value!=null&&Ds(G,"number",G.value)}switch(fe=$?Gi($):window,e){case"focusin":(on(fe)||fe.contentEditable==="true")&&(ks=fe,Pc=$,il=null);break;case"focusout":il=Pc=ks=null;break;case"mousedown":Hc=!0;break;case"contextmenu":case"mouseup":case"dragend":Hc=!1,Dm(te,i,Z);break;case"selectionchange":if(v0)break;case"keydown":case"keyup":Dm(te,i,Z)}var Re;if(p)e:{switch(e){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Ce?Qe(e,i)&&(Oe="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Oe="onCompositionStart");Oe&&(H&&i.locale!=="ko"&&(Ce||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Ce&&(Re=ai()):(pn=Z,Os="value"in pn?pn.value:pn.textContent,Ce=!0)),fe=Au($,Oe),0<fe.length&&(Oe=new Jr(Oe,e,null,i,Z),te.push({event:Oe,listeners:fe}),Re?Oe.data=Re:(Re=bt(i),Re!==null&&(Oe.data=Re)))),(Re=A?Mt(e,i):Ot(e,i))&&(Oe=Au($,"onBeforeInput"),0<Oe.length&&(fe=new Jr("onBeforeInput","beforeinput",null,i,Z),te.push({event:fe,listeners:Oe}),fe.data=Re)),tE(te,e,$,i,Z)}ay(te,n)})}function Cl(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Au(e,n){for(var i=n+"Capture",l=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=ln(e,i),h!=null&&l.unshift(Cl(e,h,f)),h=ln(e,n),h!=null&&l.push(Cl(e,h,f))),e.tag===3)return l;e=e.return}return[]}function sE(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function sy(e,n,i,l,h){for(var f=n._reactName,_=[];i!==null&&i!==l;){var T=i,D=T.alternate,$=T.stateNode;if(T=T.tag,D!==null&&D===l)break;T!==5&&T!==26&&T!==27||$===null||(D=$,h?($=ln(i,f),$!=null&&_.unshift(Cl(i,$,D))):h||($=ln(i,f),$!=null&&_.push(Cl(i,$,D)))),i=i.return}_.length!==0&&e.push({event:n,listeners:_})}var rE=/\r\n?/g,lE=/\u0000|\uFFFD/g;function ry(e){return(typeof e=="string"?e:""+e).replace(rE,`
`).replace(lE,"")}function ly(e,n){return n=ry(n),ry(e)===n}function Je(e,n,i,l,h,f){switch(i){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Nn(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Nn(e,""+l);break;case"className":ei(e,"class",l);break;case"tabIndex":ei(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ei(e,i,l);break;case"style":_o(e,l,f);break;case"data":if(n!=="object"){ei(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=Jn(""+l),e.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(n!=="input"&&Je(e,n,"name",h.name,h,null),Je(e,n,"formEncType",h.formEncType,h,null),Je(e,n,"formMethod",h.formMethod,h,null),Je(e,n,"formTarget",h.formTarget,h,null)):(Je(e,n,"encType",h.encType,h,null),Je(e,n,"method",h.method,h,null),Je(e,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=Jn(""+l),e.setAttribute(i,l);break;case"onClick":l!=null&&(e.onclick=It);break;case"onScroll":l!=null&&Ie("scroll",e);break;case"onScrollEnd":l!=null&&Ie("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(i=l.__html,i!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=i}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}i=Jn(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""+l):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":l===!0?e.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,l):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(i,l):e.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(i):e.setAttribute(i,l);break;case"popover":Ie("beforetoggle",e),Ie("toggle",e),Wa(e,"popover",l);break;case"xlinkActuate":wn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":wn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":wn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":wn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":wn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":wn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":wn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":wn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":wn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Wa(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Vc.get(i)||i,Wa(e,i,l))}}function fd(e,n,i,l,h,f){switch(i){case"style":_o(e,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(i=l.__html,i!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=i}}break;case"children":typeof l=="string"?Nn(e,l):(typeof l=="number"||typeof l=="bigint")&&Nn(e,""+l);break;case"onScroll":l!=null&&Ie("scroll",e);break;case"onScrollEnd":l!=null&&Ie("scrollend",e);break;case"onClick":l!=null&&(e.onclick=It);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ja.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(h=i.endsWith("Capture"),n=i.slice(2,h?i.length-7:void 0),f=e[Bt]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(n,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,l,h);break e}i in e?e[i]=l:l===!0?e.setAttribute(i,""):Wa(e,i,l)}}}function Ft(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ie("error",e),Ie("load",e);var l=!1,h=!1,f;for(f in i)if(i.hasOwnProperty(f)){var _=i[f];if(_!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Je(e,n,f,_,i,null)}}h&&Je(e,n,"srcSet",i.srcSet,i,null),l&&Je(e,n,"src",i.src,i,null);return;case"input":Ie("invalid",e);var T=f=_=h=null,D=null,$=null;for(l in i)if(i.hasOwnProperty(l)){var Z=i[l];if(Z!=null)switch(l){case"name":h=Z;break;case"type":_=Z;break;case"checked":D=Z;break;case"defaultChecked":$=Z;break;case"value":f=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,n));break;default:Je(e,n,l,Z,i,null)}}Ki(e,f,T,D,$,_,h,!1);return;case"select":Ie("invalid",e),l=_=f=null;for(h in i)if(i.hasOwnProperty(h)&&(T=i[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:Je(e,n,h,T,i,null)}n=f,i=_,e.multiple=!!l,n!=null?Fe(e,!!l,n,!1):i!=null&&Fe(e,!!l,i,!0);return;case"textarea":Ie("invalid",e),f=h=l=null;for(_ in i)if(i.hasOwnProperty(_)&&(T=i[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:Je(e,n,_,T,i,null)}ni(e,l,h,f);return;case"option":for(D in i)if(i.hasOwnProperty(D)&&(l=i[D],l!=null))switch(D){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Je(e,n,D,l,i,null)}return;case"dialog":Ie("beforetoggle",e),Ie("toggle",e),Ie("cancel",e),Ie("close",e);break;case"iframe":case"object":Ie("load",e);break;case"video":case"audio":for(l=0;l<Rl.length;l++)Ie(Rl[l],e);break;case"image":Ie("error",e),Ie("load",e);break;case"details":Ie("toggle",e);break;case"embed":case"source":case"link":Ie("error",e),Ie("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in i)if(i.hasOwnProperty($)&&(l=i[$],l!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Je(e,n,$,l,i,null)}return;default:if(Qr(n)){for(Z in i)i.hasOwnProperty(Z)&&(l=i[Z],l!==void 0&&fd(e,n,Z,l,i,void 0));return}}for(T in i)i.hasOwnProperty(T)&&(l=i[T],l!=null&&Je(e,n,T,l,i,null))}function oE(e,n,i,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,_=null,T=null,D=null,$=null,Z=null;for(K in i){var te=i[K];if(i.hasOwnProperty(K)&&te!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":D=te;default:l.hasOwnProperty(K)||Je(e,n,K,null,l,te)}}for(var G in l){var K=l[G];if(te=i[G],l.hasOwnProperty(G)&&(K!=null||te!=null))switch(G){case"type":f=K;break;case"name":h=K;break;case"checked":$=K;break;case"defaultChecked":Z=K;break;case"value":_=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,n));break;default:K!==te&&Je(e,n,G,K,l,te)}}ti(e,_,T,D,$,Z,f,h);return;case"select":K=_=T=G=null;for(f in i)if(D=i[f],i.hasOwnProperty(f)&&D!=null)switch(f){case"value":break;case"multiple":K=D;default:l.hasOwnProperty(f)||Je(e,n,f,null,l,D)}for(h in l)if(f=l[h],D=i[h],l.hasOwnProperty(h)&&(f!=null||D!=null))switch(h){case"value":G=f;break;case"defaultValue":T=f;break;case"multiple":_=f;default:f!==D&&Je(e,n,h,f,l,D)}n=T,i=_,l=K,G!=null?Fe(e,!!i,G,!1):!!l!=!!i&&(n!=null?Fe(e,!!i,n,!0):Fe(e,!!i,i?[]:"",!1));return;case"textarea":K=G=null;for(T in i)if(h=i[T],i.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Je(e,n,T,null,l,h)}for(_ in l)if(h=l[_],f=i[_],l.hasOwnProperty(_)&&(h!=null||f!=null))switch(_){case"value":G=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==f&&Je(e,n,_,h,l,f)}Qi(e,G,K);return;case"option":for(var he in i)if(G=i[he],i.hasOwnProperty(he)&&G!=null&&!l.hasOwnProperty(he))switch(he){case"selected":e.selected=!1;break;default:Je(e,n,he,null,l,G)}for(D in l)if(G=l[D],K=i[D],l.hasOwnProperty(D)&&G!==K&&(G!=null||K!=null))switch(D){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Je(e,n,D,G,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in i)G=i[ve],i.hasOwnProperty(ve)&&G!=null&&!l.hasOwnProperty(ve)&&Je(e,n,ve,null,l,G);for($ in l)if(G=l[$],K=i[$],l.hasOwnProperty($)&&G!==K&&(G!=null||K!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,n));break;default:Je(e,n,$,G,l,K)}return;default:if(Qr(n)){for(var We in i)G=i[We],i.hasOwnProperty(We)&&G!==void 0&&!l.hasOwnProperty(We)&&fd(e,n,We,void 0,l,G);for(Z in l)G=l[Z],K=i[Z],!l.hasOwnProperty(Z)||G===K||G===void 0&&K===void 0||fd(e,n,Z,G,l,K);return}}for(var z in i)G=i[z],i.hasOwnProperty(z)&&G!=null&&!l.hasOwnProperty(z)&&Je(e,n,z,null,l,G);for(te in l)G=l[te],K=i[te],!l.hasOwnProperty(te)||G===K||G==null&&K==null||Je(e,n,te,G,l,K)}function oy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uE(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var h=i[l],f=h.transferSize,_=h.initiatorType,T=h.duration;if(f&&T&&oy(_)){for(_=0,T=h.responseEnd,l+=1;l<i.length;l++){var D=i[l],$=D.startTime;if($>T)break;var Z=D.transferSize,te=D.initiatorType;Z&&oy(te)&&(D=D.responseEnd,_+=Z*(D<T?1:(T-$)/(D-$)))}if(--l,n+=8*(f+_)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var md=null,pd=null;function xu(e){return e.nodeType===9?e:e.ownerDocument}function uy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cy(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function gd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var yd=null;function cE(){var e=window.event;return e&&e.type==="popstate"?e===yd?!1:(yd=e,!0):(yd=null,!1)}var hy=typeof setTimeout=="function"?setTimeout:void 0,hE=typeof clearTimeout=="function"?clearTimeout:void 0,dy=typeof Promise=="function"?Promise:void 0,dE=typeof queueMicrotask=="function"?queueMicrotask:typeof dy<"u"?function(e){return dy.resolve(null).then(e).catch(fE)}:hy;function fE(e){setTimeout(function(){throw e})}function Ni(e){return e==="head"}function fy(e,n){var i=n,l=0;do{var h=i.nextSibling;if(e.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"||i==="/&"){if(l===0){e.removeChild(h),hr(n);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")jl(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,jl(i);for(var f=i.firstChild;f;){var _=f.nextSibling,T=f.nodeName;f[ma]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=_}}else i==="body"&&jl(e.ownerDocument.body);i=h}while(i);hr(n)}function my(e,n){var i=e;e=0;do{var l=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=l}while(i)}function vd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":vd(i),$i(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function mE(e,n,i,l){for(;e.nodeType===1;){var h=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ma])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=On(e.nextSibling),e===null)break}return null}function pE(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=On(e.nextSibling),e===null))return null;return e}function py(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=On(e.nextSibling),e===null))return null;return e}function _d(e){return e.data==="$?"||e.data==="$~"}function bd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function gE(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var l=function(){n(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function On(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Ed=null;function gy(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return On(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function yy(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function vy(e,n,i){switch(n=xu(i),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function jl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);$i(e)}var Vn=new Map,_y=new Set;function wu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var La=ae.d;ae.d={f:yE,r:vE,D:_E,C:bE,L:EE,m:TE,X:AE,S:SE,M:xE};function yE(){var e=La.f(),n=yu();return e||n}function vE(e){var n=ga(e);n!==null&&n.tag===5&&n.type==="form"?Lp(n):La.r(e)}var or=typeof document>"u"?null:document;function by(e,n,i){var l=or;if(l&&typeof n=="string"&&n){var h=ct(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof i=="string"&&(h+='[crossorigin="'+i+'"]'),_y.has(h)||(_y.add(h),e={rel:e,crossOrigin:i,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),Ft(n,"link",e),pt(n),l.head.appendChild(n)))}}function _E(e){La.D(e),by("dns-prefetch",e,null)}function bE(e,n){La.C(e,n),by("preconnect",e,n)}function EE(e,n,i){La.L(e,n,i);var l=or;if(l&&e&&n){var h='link[rel="preload"][as="'+ct(n)+'"]';n==="image"&&i&&i.imageSrcSet?(h+='[imagesrcset="'+ct(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(h+='[imagesizes="'+ct(i.imageSizes)+'"]')):h+='[href="'+ct(e)+'"]';var f=h;switch(n){case"style":f=ur(e);break;case"script":f=cr(e)}Vn.has(f)||(e=S({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),Vn.set(f,e),l.querySelector(h)!==null||n==="style"&&l.querySelector(Dl(f))||n==="script"&&l.querySelector(Il(f))||(n=l.createElement("link"),Ft(n,"link",e),pt(n),l.head.appendChild(n)))}}function TE(e,n){La.m(e,n);var i=or;if(i&&e){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+ct(l)+'"][href="'+ct(e)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=cr(e)}if(!Vn.has(f)&&(e=S({rel:"modulepreload",href:e},n),Vn.set(f,e),i.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Il(f)))return}l=i.createElement("link"),Ft(l,"link",e),pt(l),i.head.appendChild(l)}}}function SE(e,n,i){La.S(e,n,i);var l=or;if(l&&e){var h=zn(l).hoistableStyles,f=ur(e);n=n||"default";var _=h.get(f);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(Dl(f)))T.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":n},i),(i=Vn.get(f))&&Td(e,i);var D=_=l.createElement("link");pt(D),Ft(D,"link",e),D._p=new Promise(function($,Z){D.onload=$,D.onerror=Z}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Nu(_,n,l)}_={type:"stylesheet",instance:_,count:1,state:T},h.set(f,_)}}}function AE(e,n){La.X(e,n);var i=or;if(i&&e){var l=zn(i).hoistableScripts,h=cr(e),f=l.get(h);f||(f=i.querySelector(Il(h)),f||(e=S({src:e,async:!0},n),(n=Vn.get(h))&&Sd(e,n),f=i.createElement("script"),pt(f),Ft(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function xE(e,n){La.M(e,n);var i=or;if(i&&e){var l=zn(i).hoistableScripts,h=cr(e),f=l.get(h);f||(f=i.querySelector(Il(h)),f||(e=S({src:e,async:!0,type:"module"},n),(n=Vn.get(h))&&Sd(e,n),f=i.createElement("script"),pt(f),Ft(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function Ey(e,n,i,l){var h=(h=Ne.current)?wu(h):null;if(!h)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=ur(i.href),i=zn(h).hoistableStyles,l=i.get(n),l||(l={type:"style",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=ur(i.href);var f=zn(h).hoistableStyles,_=f.get(e);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,_),(f=h.querySelector(Dl(e)))&&!f._p&&(_.instance=f,_.state.loading=5),Vn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Vn.set(e,i),f||wE(h,e,i,_.state))),n&&l===null)throw Error(r(528,""));return _}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=cr(i),i=zn(h).hoistableScripts,l=i.get(n),l||(l={type:"script",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function ur(e){return'href="'+ct(e)+'"'}function Dl(e){return'link[rel="stylesheet"]['+e+"]"}function Ty(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function wE(e,n,i,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Ft(n,"link",i),pt(n),e.head.appendChild(n))}function cr(e){return'[src="'+ct(e)+'"]'}function Il(e){return"script[async]"+e}function Sy(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+ct(i.href)+'"]');if(l)return n.instance=l,pt(l),l;var h=S({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),pt(l),Ft(l,"style",h),Nu(l,i.precedence,e),n.instance=l;case"stylesheet":h=ur(i.href);var f=e.querySelector(Dl(h));if(f)return n.state.loading|=4,n.instance=f,pt(f),f;l=Ty(i),(h=Vn.get(h))&&Td(l,h),f=(e.ownerDocument||e).createElement("link"),pt(f);var _=f;return _._p=new Promise(function(T,D){_.onload=T,_.onerror=D}),Ft(f,"link",l),n.state.loading|=4,Nu(f,i.precedence,e),n.instance=f;case"script":return f=cr(i.src),(h=e.querySelector(Il(f)))?(n.instance=h,pt(h),h):(l=i,(h=Vn.get(f))&&(l=S({},i),Sd(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),pt(h),Ft(h,"link",l),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Nu(l,i.precedence,e));return n.instance}function Nu(e,n,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===n)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Td(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Sd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Ru=null;function Ay(e,n,i){if(Ru===null){var l=new Map,h=Ru=new Map;h.set(i,l)}else h=Ru,l=h.get(i),l||(l=new Map,h.set(i,l));if(l.has(e))return l;for(l.set(e,null),i=i.getElementsByTagName(e),h=0;h<i.length;h++){var f=i[h];if(!(f[ma]||f[ut]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(n)||"";_=e+_;var T=l.get(_);T?T.push(f):l.set(_,[f])}}return l}function xy(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function NE(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function wy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function RE(e,n,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=ur(l.href),f=n.querySelector(Dl(h));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Cu.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=f,pt(f);return}f=n.ownerDocument||n,l=Ty(l),(h=Vn.get(h))&&Td(l,h),f=f.createElement("link"),pt(f);var _=f;_._p=new Promise(function(T,D){_.onload=T,_.onerror=D}),Ft(f,"link",l),i.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Cu.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var Ad=0;function CE(e,n){return e.stylesheets&&e.count===0&&Du(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var l=setTimeout(function(){if(e.stylesheets&&Du(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+n);0<e.imgBytes&&Ad===0&&(Ad=62500*uE());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Du(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Ad?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Cu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Du(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ju=null;function Du(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ju=new Map,n.forEach(jE,e),ju=null,Cu.call(e))}function jE(e,n){if(!(n.state.loading&4)){var i=ju.get(e);if(i)var l=i.get(null);else{i=new Map,ju.set(e,i);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var _=h[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(i.set(_.dataset.precedence,_),l=_)}l&&i.set(null,l)}h=n.instance,_=h.getAttribute("data-precedence"),f=i.get(_)||l,f===l&&i.set(null,h),i.set(_,h),this.count++,l=Cu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var Ml={$$typeof:se,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function DE(e,n,i,l,h,f,_,T,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=da(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=da(0),this.hiddenUpdates=da(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Ny(e,n,i,l,h,f,_,T,D,$,Z,te){return e=new DE(e,n,i,_,D,$,Z,te,T),n=1,f===!0&&(n|=24),f=yn(3,null,null,n),e.current=f,f.stateNode=e,n=ah(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:l,isDehydrated:i,cache:n},lh(f),e}function Ry(e){return e?(e=Ps,e):Ps}function Cy(e,n,i,l,h,f){h=Ry(h),l.context===null?l.context=h:l.pendingContext=h,l=gi(n),l.payload={element:i},f=f===void 0?null:f,f!==null&&(l.callback=f),i=yi(e,l,n),i!==null&&(fn(i,e,n),hl(i,e,n))}function jy(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function xd(e,n){jy(e,n),(e=e.alternate)&&jy(e,n)}function Dy(e){if(e.tag===13||e.tag===31){var n=as(e,67108864);n!==null&&fn(n,e,67108864),xd(e,67108864)}}function Iy(e){if(e.tag===13||e.tag===31){var n=Tn();n=Pr(n);var i=as(e,n);i!==null&&fn(i,e,n),xd(e,n)}}var Iu=!0;function IE(e,n,i,l){var h=X.T;X.T=null;var f=ae.p;try{ae.p=2,wd(e,n,i,l)}finally{ae.p=f,X.T=h}}function ME(e,n,i,l){var h=X.T;X.T=null;var f=ae.p;try{ae.p=8,wd(e,n,i,l)}finally{ae.p=f,X.T=h}}function wd(e,n,i,l){if(Iu){var h=Nd(l);if(h===null)dd(e,n,l,Mu,i),Oy(e,l);else if(VE(h,e,n,i,l))l.stopPropagation();else if(Oy(e,l),n&4&&-1<OE.indexOf(e)){for(;h!==null;){var f=ga(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=Bn(f.pendingLanes);if(_!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var D=1<<31-en(_);T.entanglements[1]|=D,_&=~D}ia(f),(Ge&6)===0&&(pu=Ut()+500,Nl(0))}}break;case 31:case 13:T=as(f,2),T!==null&&fn(T,f,2),yu(),xd(f,2)}if(f=Nd(l),f===null&&dd(e,n,l,Mu,i),f===h)break;h=f}h!==null&&l.stopPropagation()}else dd(e,n,l,null,i)}}function Nd(e){return e=Ms(e),Rd(e)}var Mu=null;function Rd(e){if(Mu=null,e=pa(e),e!==null){var n=c(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=m(n),e!==null)return e;e=null}else if(i===31){if(e=g(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Mu=e,null}function My(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ho()){case Rt:return 2;case Dt:return 8;case ha:case fo:return 32;case Ur:return 268435456;default:return 32}default:return 32}}var Cd=!1,Ri=null,Ci=null,ji=null,Ol=new Map,Vl=new Map,Di=[],OE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Oy(e,n){switch(e){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":ji=null;break;case"pointerover":case"pointerout":Ol.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vl.delete(n.pointerId)}}function Ll(e,n,i,l,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:i,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},n!==null&&(n=ga(n),n!==null&&Dy(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function VE(e,n,i,l,h){switch(n){case"focusin":return Ri=Ll(Ri,e,n,i,l,h),!0;case"dragenter":return Ci=Ll(Ci,e,n,i,l,h),!0;case"mouseover":return ji=Ll(ji,e,n,i,l,h),!0;case"pointerover":var f=h.pointerId;return Ol.set(f,Ll(Ol.get(f)||null,e,n,i,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Vl.set(f,Ll(Vl.get(f)||null,e,n,i,l,h)),!0}return!1}function Vy(e){var n=pa(e.target);if(n!==null){var i=c(n);if(i!==null){if(n=i.tag,n===13){if(n=m(i),n!==null){e.blockedOn=n,po(e.priority,function(){Iy(i)});return}}else if(n===31){if(n=g(i),n!==null){e.blockedOn=n,po(e.priority,function(){Iy(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ou(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=Nd(e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);Is=l,i.target.dispatchEvent(l),Is=null}else return n=ga(i),n!==null&&Dy(n),e.blockedOn=i,!1;n.shift()}return!0}function Ly(e,n,i){Ou(e)&&i.delete(n)}function LE(){Cd=!1,Ri!==null&&Ou(Ri)&&(Ri=null),Ci!==null&&Ou(Ci)&&(Ci=null),ji!==null&&Ou(ji)&&(ji=null),Ol.forEach(Ly),Vl.forEach(Ly)}function Vu(e,n){e.blockedOn===n&&(e.blockedOn=null,Cd||(Cd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,LE)))}var Lu=null;function Uy(e){Lu!==e&&(Lu=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Lu===e&&(Lu=null);for(var n=0;n<e.length;n+=3){var i=e[n],l=e[n+1],h=e[n+2];if(typeof l!="function"){if(Rd(l||i)===null)continue;break}var f=ga(i);f!==null&&(e.splice(n,3),n-=3,Nh(f,{pending:!0,data:h,method:i.method,action:l},l,h))}}))}function hr(e){function n(D){return Vu(D,e)}Ri!==null&&Vu(Ri,e),Ci!==null&&Vu(Ci,e),ji!==null&&Vu(ji,e),Ol.forEach(n),Vl.forEach(n);for(var i=0;i<Di.length;i++){var l=Di[i];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Di.length&&(i=Di[0],i.blockedOn===null);)Vy(i),i.blockedOn===null&&Di.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var h=i[l],f=i[l+1],_=h[Bt]||null;if(typeof f=="function")_||Uy(i);else if(_){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,_=f[Bt]||null)T=_.formAction;else if(Rd(h)!==null)continue}else T=_.action;typeof T=="function"?i[l+1]=T:(i.splice(l,3),l-=3),Uy(i)}}}function ky(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function jd(e){this._internalRoot=e}Uu.prototype.render=jd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var i=n.current,l=Tn();Cy(i,l,e,n,null,null)},Uu.prototype.unmount=jd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Cy(e.current,2,null,e,null,null),yu(),n[Yn]=null}};function Uu(e){this._internalRoot=e}Uu.prototype.unstable_scheduleHydration=function(e){if(e){var n=fa();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Di.length&&n!==0&&n<Di[i].priority;i++);Di.splice(i,0,e),i===0&&Vy(e)}};var By=t.version;if(By!=="19.2.0")throw Error(r(527,By,"19.2.0"));ae.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=v(n),e=e!==null?E(e):null,e=e===null?null:e.stateNode,e};var UE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ku.isDisabled&&ku.supportsFiber)try{$a=ku.inject(UE),Kt=ku}catch{}}return kl.createRoot=function(e,n){if(!o(e))throw Error(r(299));var i=!1,l="",h=Gp,f=Kp,_=Qp;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError)),n=Ny(e,1,!1,null,null,i,l,null,h,f,_,ky),e[Yn]=n.current,hd(e),new jd(n)},kl.hydrateRoot=function(e,n,i){if(!o(e))throw Error(r(299));var l=!1,h="",f=Gp,_=Kp,T=Qp,D=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(_=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.formState!==void 0&&(D=i.formState)),n=Ny(e,1,!0,n,i??null,l,h,D,f,_,T,ky),n.context=Ry(null),i=n.current,l=Tn(),l=Pr(l),h=gi(l),h.callback=null,yi(i,h,l),i=l,n.current.lanes=i,Qa(n,i),ia(n),e[Yn]=n.current,hd(e),new Uu(n)},kl.version="19.2.0",kl}var Yy;function KE(){if(Yy)return Md.exports;Yy=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Md.exports=GE(),Md.exports}var QE=KE();var Xy="popstate";function YE(s={}){function t(r,o){let{pathname:c,search:m,hash:g}=r.location;return tf("",{pathname:c,search:m,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function a(r,o){return typeof o=="string"?o:Ql(o)}return ZE(t,a,null,s)}function lt(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function Un(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function XE(){return Math.random().toString(36).substring(2,10)}function Zy(s,t){return{usr:s.state,key:s.key,idx:t}}function tf(s,t,a=null,r){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?Rr(t):t,state:a,key:t&&t.key||r||XE()}}function Ql({pathname:s="/",search:t="",hash:a=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function Rr(s){let t={};if(s){let a=s.indexOf("#");a>=0&&(t.hash=s.substring(a),s=s.substring(0,a));let r=s.indexOf("?");r>=0&&(t.search=s.substring(r),s=s.substring(0,r)),s&&(t.pathname=s)}return t}function ZE(s,t,a,r={}){let{window:o=document.defaultView,v5Compat:c=!1}=r,m=o.history,g="POP",y=null,v=E();v==null&&(v=0,m.replaceState({...m.state,idx:v},""));function E(){return(m.state||{idx:null}).idx}function S(){g="POP";let j=E(),F=j==null?null:j-v;v=j,y&&y({action:g,location:P.location,delta:F})}function C(j,F){g="PUSH";let ee=tf(P.location,j,F);v=E()+1;let se=Zy(ee,v),de=P.createHref(ee);try{m.pushState(se,"",de)}catch(Te){if(Te instanceof DOMException&&Te.name==="DataCloneError")throw Te;o.location.assign(de)}c&&y&&y({action:g,location:P.location,delta:1})}function U(j,F){g="REPLACE";let ee=tf(P.location,j,F);v=E();let se=Zy(ee,v),de=P.createHref(ee);m.replaceState(se,"",de),c&&y&&y({action:g,location:P.location,delta:0})}function B(j){return JE(j)}let P={get action(){return g},get location(){return s(o,m)},listen(j){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(Xy,S),y=j,()=>{o.removeEventListener(Xy,S),y=null}},createHref(j){return t(o,j)},createURL:B,encodeLocation(j){let F=B(j);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:C,replace:U,go(j){return m.go(j)}};return P}function JE(s,t=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),lt(a,"No window.location.(origin|href) available to create URL");let r=typeof s=="string"?s:Ql(s);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=a+r),new URL(r,a)}function A_(s,t,a="/"){return WE(s,t,a,!1)}function WE(s,t,a,r){let o=typeof t=="string"?Rr(t):t,c=ka(o.pathname||"/",a);if(c==null)return null;let m=x_(s);eT(m);let g=null;for(let y=0;g==null&&y<m.length;++y){let v=hT(c);g=uT(m[y],v,r)}return g}function x_(s,t=[],a=[],r="",o=!1){let c=(m,g,y=o,v)=>{let E={relativePath:v===void 0?m.path||"":v,caseSensitive:m.caseSensitive===!0,childrenIndex:g,route:m};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(r)&&y)return;lt(E.relativePath.startsWith(r),`Absolute route path "${E.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(r.length)}let S=Ua([r,E.relativePath]),C=a.concat(E);m.children&&m.children.length>0&&(lt(m.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),x_(m.children,t,C,S,y)),!(m.path==null&&!m.index)&&t.push({path:S,score:lT(S,m.index),routesMeta:C})};return s.forEach((m,g)=>{if(m.path===""||!m.path?.includes("?"))c(m,g);else for(let y of w_(m.path))c(m,g,!0,y)}),t}function w_(s){let t=s.split("/");if(t.length===0)return[];let[a,...r]=t,o=a.endsWith("?"),c=a.replace(/\?$/,"");if(r.length===0)return o?[c,""]:[c];let m=w_(r.join("/")),g=[];return g.push(...m.map(y=>y===""?c:[c,y].join("/"))),o&&g.push(...m),g.map(y=>s.startsWith("/")&&y===""?"/":y)}function eT(s){s.sort((t,a)=>t.score!==a.score?a.score-t.score:oT(t.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}var tT=/^:[\w-]+$/,nT=3,aT=2,iT=1,sT=10,rT=-2,Jy=s=>s==="*";function lT(s,t){let a=s.split("/"),r=a.length;return a.some(Jy)&&(r+=rT),t&&(r+=aT),a.filter(o=>!Jy(o)).reduce((o,c)=>o+(tT.test(c)?nT:c===""?iT:sT),r)}function oT(s,t){return s.length===t.length&&s.slice(0,-1).every((r,o)=>r===t[o])?s[s.length-1]-t[t.length-1]:0}function uT(s,t,a=!1){let{routesMeta:r}=s,o={},c="/",m=[];for(let g=0;g<r.length;++g){let y=r[g],v=g===r.length-1,E=c==="/"?t:t.slice(c.length)||"/",S=ac({path:y.relativePath,caseSensitive:y.caseSensitive,end:v},E),C=y.route;if(!S&&v&&a&&!r[r.length-1].route.index&&(S=ac({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},E)),!S)return null;Object.assign(o,S.params),m.push({params:o,pathname:Ua([c,S.pathname]),pathnameBase:gT(Ua([c,S.pathnameBase])),route:C}),S.pathnameBase!=="/"&&(c=Ua([c,S.pathnameBase]))}return m}function ac(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[a,r]=cT(s.path,s.caseSensitive,s.end),o=t.match(a);if(!o)return null;let c=o[0],m=c.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:r.reduce((v,{paramName:E,isOptional:S},C)=>{if(E==="*"){let B=g[C]||"";m=c.slice(0,c.length-B.length).replace(/(.)\/+$/,"$1")}const U=g[C];return S&&!U?v[E]=void 0:v[E]=(U||"").replace(/%2F/g,"/"),v},{}),pathname:c,pathnameBase:m,pattern:s}}function cT(s,t=!1,a=!0){Un(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let r=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,g,y)=>(r.push({paramName:g,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(r.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function hT(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Un(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function ka(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,r=s.charAt(a);return r&&r!=="/"?null:s.slice(a)||"/"}var dT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fT=s=>dT.test(s);function mT(s,t="/"){let{pathname:a,search:r="",hash:o=""}=typeof s=="string"?Rr(s):s,c;if(a)if(fT(a))c=a;else{if(a.includes("//")){let m=a;a=a.replace(/\/\/+/g,"/"),Un(!1,`Pathnames cannot have embedded double slashes - normalizing ${m} -> ${a}`)}a.startsWith("/")?c=Wy(a.substring(1),"/"):c=Wy(a,t)}else c=t;return{pathname:c,search:yT(r),hash:vT(o)}}function Wy(s,t){let a=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?a.length>1&&a.pop():o!=="."&&a.push(o)}),a.length>1?a.join("/"):"/"}function Ud(s,t,a,r){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pT(s){return s.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function jf(s){let t=pT(s);return t.map((a,r)=>r===t.length-1?a.pathname:a.pathnameBase)}function Df(s,t,a,r=!1){let o;typeof s=="string"?o=Rr(s):(o={...s},lt(!o.pathname||!o.pathname.includes("?"),Ud("?","pathname","search",o)),lt(!o.pathname||!o.pathname.includes("#"),Ud("#","pathname","hash",o)),lt(!o.search||!o.search.includes("#"),Ud("#","search","hash",o)));let c=s===""||o.pathname==="",m=c?"/":o.pathname,g;if(m==null)g=a;else{let S=t.length-1;if(!r&&m.startsWith("..")){let C=m.split("/");for(;C[0]==="..";)C.shift(),S-=1;o.pathname=C.join("/")}g=S>=0?t[S]:"/"}let y=mT(o,g),v=m&&m!=="/"&&m.endsWith("/"),E=(c||m===".")&&a.endsWith("/");return!y.pathname.endsWith("/")&&(v||E)&&(y.pathname+="/"),y}var Ua=s=>s.join("/").replace(/\/\/+/g,"/"),gT=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),yT=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,vT=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function _T(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var N_=["POST","PUT","PATCH","DELETE"];new Set(N_);var bT=["GET",...N_];new Set(bT);var Cr=R.createContext(null);Cr.displayName="DataRouter";var yc=R.createContext(null);yc.displayName="DataRouterState";R.createContext(!1);var R_=R.createContext({isTransitioning:!1});R_.displayName="ViewTransition";var ET=R.createContext(new Map);ET.displayName="Fetchers";var TT=R.createContext(null);TT.displayName="Await";var Gn=R.createContext(null);Gn.displayName="Navigation";var no=R.createContext(null);no.displayName="Location";var oa=R.createContext({outlet:null,matches:[],isDataRoute:!1});oa.displayName="Route";var If=R.createContext(null);If.displayName="RouteError";function ST(s,{relative:t}={}){lt(jr(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:r}=R.useContext(Gn),{hash:o,pathname:c,search:m}=ao(s,{relative:t}),g=c;return a!=="/"&&(g=c==="/"?a:Ua([a,c])),r.createHref({pathname:g,search:m,hash:o})}function jr(){return R.useContext(no)!=null}function Pa(){return lt(jr(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(no).location}var C_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function j_(s){R.useContext(Gn).static||R.useLayoutEffect(s)}function vc(){let{isDataRoute:s}=R.useContext(oa);return s?LT():AT()}function AT(){lt(jr(),"useNavigate() may be used only in the context of a <Router> component.");let s=R.useContext(Cr),{basename:t,navigator:a}=R.useContext(Gn),{matches:r}=R.useContext(oa),{pathname:o}=Pa(),c=JSON.stringify(jf(r)),m=R.useRef(!1);return j_(()=>{m.current=!0}),R.useCallback((y,v={})=>{if(Un(m.current,C_),!m.current)return;if(typeof y=="number"){a.go(y);return}let E=Df(y,JSON.parse(c),o,v.relative==="path");s==null&&t!=="/"&&(E.pathname=E.pathname==="/"?t:Ua([t,E.pathname])),(v.replace?a.replace:a.push)(E,v.state,v)},[t,a,c,o,s])}R.createContext(null);function ao(s,{relative:t}={}){let{matches:a}=R.useContext(oa),{pathname:r}=Pa(),o=JSON.stringify(jf(a));return R.useMemo(()=>Df(s,JSON.parse(o),r,t==="path"),[s,o,r,t])}function xT(s,t){return D_(s,t)}function D_(s,t,a,r,o){lt(jr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=R.useContext(Gn),{matches:m}=R.useContext(oa),g=m[m.length-1],y=g?g.params:{},v=g?g.pathname:"/",E=g?g.pathnameBase:"/",S=g&&g.route;{let ee=S&&S.path||"";I_(v,!S||ee.endsWith("*")||ee.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${ee}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ee}"> to <Route path="${ee==="/"?"*":`${ee}/*`}">.`)}let C=Pa(),U;if(t){let ee=typeof t=="string"?Rr(t):t;lt(E==="/"||ee.pathname?.startsWith(E),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${ee.pathname}" was given in the \`location\` prop.`),U=ee}else U=C;let B=U.pathname||"/",P=B;if(E!=="/"){let ee=E.replace(/^\//,"").split("/");P="/"+B.replace(/^\//,"").split("/").slice(ee.length).join("/")}let j=A_(s,{pathname:P});Un(S||j!=null,`No routes matched location "${U.pathname}${U.search}${U.hash}" `),Un(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${U.pathname}${U.search}${U.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let F=jT(j&&j.map(ee=>Object.assign({},ee,{params:Object.assign({},y,ee.params),pathname:Ua([E,c.encodeLocation?c.encodeLocation(ee.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathname]),pathnameBase:ee.pathnameBase==="/"?E:Ua([E,c.encodeLocation?c.encodeLocation(ee.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathnameBase])})),m,a,r,o);return t&&F?R.createElement(no.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...U},navigationType:"POP"}},F):F}function wT(){let s=VT(),t=_T(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),a=s instanceof Error?s.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},m=null;return console.error("Error handled by React Router default ErrorBoundary:",s),m=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:c},"ErrorBoundary")," or"," ",R.createElement("code",{style:c},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),a?R.createElement("pre",{style:o},a):null,m)}var NT=R.createElement(wT,null),RT=class extends R.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){this.props.onError?this.props.onError(s,t):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?R.createElement(oa.Provider,{value:this.props.routeContext},R.createElement(If.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function CT({routeContext:s,match:t,children:a}){let r=R.useContext(Cr);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(oa.Provider,{value:s},a)}function jT(s,t=[],a=null,r=null,o=null){if(s==null){if(!a)return null;if(a.errors)s=a.matches;else if(t.length===0&&!a.initialized&&a.matches.length>0)s=a.matches;else return null}let c=s,m=a?.errors;if(m!=null){let E=c.findIndex(S=>S.route.id&&m?.[S.route.id]!==void 0);lt(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),c=c.slice(0,Math.min(c.length,E+1))}let g=!1,y=-1;if(a)for(let E=0;E<c.length;E++){let S=c[E];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(y=E),S.route.id){let{loaderData:C,errors:U}=a,B=S.route.loader&&!C.hasOwnProperty(S.route.id)&&(!U||U[S.route.id]===void 0);if(S.route.lazy||B){g=!0,y>=0?c=c.slice(0,y+1):c=[c[0]];break}}}let v=a&&r?(E,S)=>{r(E,{location:a.location,params:a.matches?.[0]?.params??{},errorInfo:S})}:void 0;return c.reduceRight((E,S,C)=>{let U,B=!1,P=null,j=null;a&&(U=m&&S.route.id?m[S.route.id]:void 0,P=S.route.errorElement||NT,g&&(y<0&&C===0?(I_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),B=!0,j=null):y===C&&(B=!0,j=S.route.hydrateFallbackElement||null)));let F=t.concat(c.slice(0,C+1)),ee=()=>{let se;return U?se=P:B?se=j:S.route.Component?se=R.createElement(S.route.Component,null):S.route.element?se=S.route.element:se=E,R.createElement(CT,{match:S,routeContext:{outlet:E,matches:F,isDataRoute:a!=null},children:se})};return a&&(S.route.ErrorBoundary||S.route.errorElement||C===0)?R.createElement(RT,{location:a.location,revalidation:a.revalidation,component:P,error:U,children:ee(),routeContext:{outlet:null,matches:F,isDataRoute:!0},onError:v}):ee()},null)}function Mf(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DT(s){let t=R.useContext(Cr);return lt(t,Mf(s)),t}function IT(s){let t=R.useContext(yc);return lt(t,Mf(s)),t}function MT(s){let t=R.useContext(oa);return lt(t,Mf(s)),t}function Of(s){let t=MT(s),a=t.matches[t.matches.length-1];return lt(a.route.id,`${s} can only be used on routes that contain a unique "id"`),a.route.id}function OT(){return Of("useRouteId")}function VT(){let s=R.useContext(If),t=IT("useRouteError"),a=Of("useRouteError");return s!==void 0?s:t.errors?.[a]}function LT(){let{router:s}=DT("useNavigate"),t=Of("useNavigate"),a=R.useRef(!1);return j_(()=>{a.current=!0}),R.useCallback(async(o,c={})=>{Un(a.current,C_),a.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:t,...c}))},[s,t])}var ev={};function I_(s,t,a){!t&&!ev[s]&&(ev[s]=!0,Un(!1,a))}R.memo(UT);function UT({routes:s,future:t,state:a,unstable_onError:r}){return D_(s,void 0,a,r,t)}function kT({to:s,replace:t,state:a,relative:r}){lt(jr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=R.useContext(Gn);Un(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=R.useContext(oa),{pathname:m}=Pa(),g=vc(),y=Df(s,jf(c),m,r==="path"),v=JSON.stringify(y);return R.useEffect(()=>{g(JSON.parse(v),{replace:t,state:a,relative:r})},[g,v,r,t,a]),null}function Ln(s){lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function BT({basename:s="/",children:t=null,location:a,navigationType:r="POP",navigator:o,static:c=!1}){lt(!jr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=s.replace(/^\/*/,"/"),g=R.useMemo(()=>({basename:m,navigator:o,static:c,future:{}}),[m,o,c]);typeof a=="string"&&(a=Rr(a));let{pathname:y="/",search:v="",hash:E="",state:S=null,key:C="default"}=a,U=R.useMemo(()=>{let B=ka(y,m);return B==null?null:{location:{pathname:B,search:v,hash:E,state:S,key:C},navigationType:r}},[m,y,v,E,S,C,r]);return Un(U!=null,`<Router basename="${m}"> is not able to match the URL "${y}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:R.createElement(Gn.Provider,{value:g},R.createElement(no.Provider,{children:t,value:U}))}function zT({children:s,location:t}){return xT(nf(s),t)}function nf(s,t=[]){let a=[];return R.Children.forEach(s,(r,o)=>{if(!R.isValidElement(r))return;let c=[...t,o];if(r.type===R.Fragment){a.push.apply(a,nf(r.props.children,c));return}lt(r.type===Ln,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),lt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let m={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(m.children=nf(r.props.children,c)),a.push(m)}),a}var Zu="get",Ju="application/x-www-form-urlencoded";function _c(s){return s!=null&&typeof s.tagName=="string"}function PT(s){return _c(s)&&s.tagName.toLowerCase()==="button"}function HT(s){return _c(s)&&s.tagName.toLowerCase()==="form"}function FT(s){return _c(s)&&s.tagName.toLowerCase()==="input"}function qT(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function $T(s,t){return s.button===0&&(!t||t==="_self")&&!qT(s)}var Bu=null;function GT(){if(Bu===null)try{new FormData(document.createElement("form"),0),Bu=!1}catch{Bu=!0}return Bu}var KT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kd(s){return s!=null&&!KT.has(s)?(Un(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ju}"`),null):s}function QT(s,t){let a,r,o,c,m;if(HT(s)){let g=s.getAttribute("action");r=g?ka(g,t):null,a=s.getAttribute("method")||Zu,o=kd(s.getAttribute("enctype"))||Ju,c=new FormData(s)}else if(PT(s)||FT(s)&&(s.type==="submit"||s.type==="image")){let g=s.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=s.getAttribute("formaction")||g.getAttribute("action");if(r=y?ka(y,t):null,a=s.getAttribute("formmethod")||g.getAttribute("method")||Zu,o=kd(s.getAttribute("formenctype"))||kd(g.getAttribute("enctype"))||Ju,c=new FormData(g,s),!GT()){let{name:v,type:E,value:S}=s;if(E==="image"){let C=v?`${v}.`:"";c.append(`${C}x`,"0"),c.append(`${C}y`,"0")}else v&&c.append(v,S)}}else{if(_c(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Zu,r=null,o=Ju,m=s}return c&&o==="text/plain"&&(m=c,c=void 0),{action:r,method:a.toLowerCase(),encType:o,formData:c,body:m}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Vf(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function YT(s,t,a){let r=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return r.pathname==="/"?r.pathname=`_root.${a}`:t&&ka(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${a}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${a}`,r}async function XT(s,t){if(s.id in t)return t[s.id];try{let a=await import(s.module);return t[s.id]=a,a}catch(a){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ZT(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function JT(s,t,a){let r=await Promise.all(s.map(async o=>{let c=t.routes[o.route.id];if(c){let m=await XT(c,a);return m.links?m.links():[]}return[]}));return nS(r.flat(1).filter(ZT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function tv(s,t,a,r,o,c){let m=(y,v)=>a[v]?y.route.id!==a[v].route.id:!0,g=(y,v)=>a[v].pathname!==y.pathname||a[v].route.path?.endsWith("*")&&a[v].params["*"]!==y.params["*"];return c==="assets"?t.filter((y,v)=>m(y,v)||g(y,v)):c==="data"?t.filter((y,v)=>{let E=r.routes[y.route.id];if(!E||!E.hasLoader)return!1;if(m(y,v)||g(y,v))return!0;if(y.route.shouldRevalidate){let S=y.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function WT(s,t,{includeHydrateFallback:a}={}){return eS(s.map(r=>{let o=t.routes[r.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),a&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function eS(s){return[...new Set(s)]}function tS(s){let t={},a=Object.keys(s).sort();for(let r of a)t[r]=s[r];return t}function nS(s,t){let a=new Set;return new Set(t),s.reduce((r,o)=>{let c=JSON.stringify(tS(o));return a.has(c)||(a.add(c),r.push({key:c,link:o})),r},[])}function M_(){let s=R.useContext(Cr);return Vf(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function aS(){let s=R.useContext(yc);return Vf(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Lf=R.createContext(void 0);Lf.displayName="FrameworkContext";function O_(){let s=R.useContext(Lf);return Vf(s,"You must render this element inside a <HydratedRouter> element"),s}function iS(s,t){let a=R.useContext(Lf),[r,o]=R.useState(!1),[c,m]=R.useState(!1),{onFocus:g,onBlur:y,onMouseEnter:v,onMouseLeave:E,onTouchStart:S}=t,C=R.useRef(null);R.useEffect(()=>{if(s==="render"&&m(!0),s==="viewport"){let P=F=>{F.forEach(ee=>{m(ee.isIntersecting)})},j=new IntersectionObserver(P,{threshold:.5});return C.current&&j.observe(C.current),()=>{j.disconnect()}}},[s]),R.useEffect(()=>{if(r){let P=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(P)}}},[r]);let U=()=>{o(!0)},B=()=>{o(!1),m(!1)};return a?s!=="intent"?[c,C,{}]:[c,C,{onFocus:Bl(g,U),onBlur:Bl(y,B),onMouseEnter:Bl(v,U),onMouseLeave:Bl(E,B),onTouchStart:Bl(S,U)}]:[!1,C,{}]}function Bl(s,t){return a=>{s&&s(a),a.defaultPrevented||t(a)}}function sS({page:s,...t}){let{router:a}=M_(),r=R.useMemo(()=>A_(a.routes,s,a.basename),[a.routes,s,a.basename]);return r?R.createElement(lS,{page:s,matches:r,...t}):null}function rS(s){let{manifest:t,routeModules:a}=O_(),[r,o]=R.useState([]);return R.useEffect(()=>{let c=!1;return JT(s,t,a).then(m=>{c||o(m)}),()=>{c=!0}},[s,t,a]),r}function lS({page:s,matches:t,...a}){let r=Pa(),{manifest:o,routeModules:c}=O_(),{basename:m}=M_(),{loaderData:g,matches:y}=aS(),v=R.useMemo(()=>tv(s,t,y,o,r,"data"),[s,t,y,o,r]),E=R.useMemo(()=>tv(s,t,y,o,r,"assets"),[s,t,y,o,r]),S=R.useMemo(()=>{if(s===r.pathname+r.search+r.hash)return[];let B=new Set,P=!1;if(t.forEach(F=>{let ee=o.routes[F.route.id];!ee||!ee.hasLoader||(!v.some(se=>se.route.id===F.route.id)&&F.route.id in g&&c[F.route.id]?.shouldRevalidate||ee.hasClientLoader?P=!0:B.add(F.route.id))}),B.size===0)return[];let j=YT(s,m,"data");return P&&B.size>0&&j.searchParams.set("_routes",t.filter(F=>B.has(F.route.id)).map(F=>F.route.id).join(",")),[j.pathname+j.search]},[m,g,r,o,v,t,s,c]),C=R.useMemo(()=>WT(E,o),[E,o]),U=rS(E);return R.createElement(R.Fragment,null,S.map(B=>R.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...a})),C.map(B=>R.createElement("link",{key:B,rel:"modulepreload",href:B,...a})),U.map(({key:B,link:P})=>R.createElement("link",{key:B,nonce:a.nonce,...P})))}function oS(...s){return t=>{s.forEach(a=>{typeof a=="function"?a(t):a!=null&&(a.current=t)})}}var V_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{V_&&(window.__reactRouterVersion="7.9.6")}catch{}function uS({basename:s,children:t,window:a}){let r=R.useRef();r.current==null&&(r.current=YE({window:a,v5Compat:!0}));let o=r.current,[c,m]=R.useState({action:o.action,location:o.location}),g=R.useCallback(y=>{R.startTransition(()=>m(y))},[m]);return R.useLayoutEffect(()=>o.listen(g),[o,g]),R.createElement(BT,{basename:s,children:t,location:c.location,navigationType:c.action,navigator:o})}var L_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ic=R.forwardRef(function({onClick:t,discover:a="render",prefetch:r="none",relative:o,reloadDocument:c,replace:m,state:g,target:y,to:v,preventScrollReset:E,viewTransition:S,...C},U){let{basename:B}=R.useContext(Gn),P=typeof v=="string"&&L_.test(v),j,F=!1;if(typeof v=="string"&&P&&(j=v,V_))try{let N=new URL(window.location.href),O=v.startsWith("//")?new URL(N.protocol+v):new URL(v),M=ka(O.pathname,B);O.origin===N.origin&&M!=null?v=M+O.search+O.hash:F=!0}catch{Un(!1,`<Link to="${v}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ee=ST(v,{relative:o}),[se,de,Te]=iS(r,C),re=dS(v,{replace:m,state:g,target:y,preventScrollReset:E,relative:o,viewTransition:S});function I(N){t&&t(N),N.defaultPrevented||re(N)}let w=R.createElement("a",{...C,...Te,href:j||ee,onClick:F||c?t:I,ref:oS(U,de),target:y,"data-discover":!P&&a==="render"?"true":void 0});return se&&!P?R.createElement(R.Fragment,null,w,R.createElement(sS,{page:ee})):w});ic.displayName="Link";var af=R.forwardRef(function({"aria-current":t="page",caseSensitive:a=!1,className:r="",end:o=!1,style:c,to:m,viewTransition:g,children:y,...v},E){let S=ao(m,{relative:v.relative}),C=Pa(),U=R.useContext(yc),{navigator:B,basename:P}=R.useContext(Gn),j=U!=null&&yS(S)&&g===!0,F=B.encodeLocation?B.encodeLocation(S).pathname:S.pathname,ee=C.pathname,se=U&&U.navigation&&U.navigation.location?U.navigation.location.pathname:null;a||(ee=ee.toLowerCase(),se=se?se.toLowerCase():null,F=F.toLowerCase()),se&&P&&(se=ka(se,P)||se);const de=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let Te=ee===F||!o&&ee.startsWith(F)&&ee.charAt(de)==="/",re=se!=null&&(se===F||!o&&se.startsWith(F)&&se.charAt(F.length)==="/"),I={isActive:Te,isPending:re,isTransitioning:j},w=Te?t:void 0,N;typeof r=="function"?N=r(I):N=[r,Te?"active":null,re?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let O=typeof c=="function"?c(I):c;return R.createElement(ic,{...v,"aria-current":w,className:N,ref:E,style:O,to:m,viewTransition:g},typeof y=="function"?y(I):y)});af.displayName="NavLink";var cS=R.forwardRef(({discover:s="render",fetcherKey:t,navigate:a,reloadDocument:r,replace:o,state:c,method:m=Zu,action:g,onSubmit:y,relative:v,preventScrollReset:E,viewTransition:S,...C},U)=>{let B=pS(),P=gS(g,{relative:v}),j=m.toLowerCase()==="get"?"get":"post",F=typeof g=="string"&&L_.test(g),ee=se=>{if(y&&y(se),se.defaultPrevented)return;se.preventDefault();let de=se.nativeEvent.submitter,Te=de?.getAttribute("formmethod")||m;B(de||se.currentTarget,{fetcherKey:t,method:Te,navigate:a,replace:o,state:c,relative:v,preventScrollReset:E,viewTransition:S})};return R.createElement("form",{ref:U,method:j,action:P,onSubmit:r?y:ee,...C,"data-discover":!F&&s==="render"?"true":void 0})});cS.displayName="Form";function hS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U_(s){let t=R.useContext(Cr);return lt(t,hS(s)),t}function dS(s,{target:t,replace:a,state:r,preventScrollReset:o,relative:c,viewTransition:m}={}){let g=vc(),y=Pa(),v=ao(s,{relative:c});return R.useCallback(E=>{if($T(E,t)){E.preventDefault();let S=a!==void 0?a:Ql(y)===Ql(v);g(s,{replace:S,state:r,preventScrollReset:o,relative:c,viewTransition:m})}},[y,g,v,a,r,t,s,o,c,m])}var fS=0,mS=()=>`__${String(++fS)}__`;function pS(){let{router:s}=U_("useSubmit"),{basename:t}=R.useContext(Gn),a=OT();return R.useCallback(async(r,o={})=>{let{action:c,method:m,encType:g,formData:y,body:v}=QT(r,t);if(o.navigate===!1){let E=o.fetcherKey||mS();await s.fetch(E,a,o.action||c,{preventScrollReset:o.preventScrollReset,formData:y,body:v,formMethod:o.method||m,formEncType:o.encType||g,flushSync:o.flushSync})}else await s.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:y,body:v,formMethod:o.method||m,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:a,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,t,a])}function gS(s,{relative:t}={}){let{basename:a}=R.useContext(Gn),r=R.useContext(oa);lt(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),c={...ao(s||".",{relative:t})},m=Pa();if(s==null){c.search=m.search;let g=new URLSearchParams(c.search),y=g.getAll("index");if(y.some(E=>E==="")){g.delete("index"),y.filter(S=>S).forEach(S=>g.append("index",S));let E=g.toString();c.search=E?`?${E}`:""}}return(!s||s===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(c.pathname=c.pathname==="/"?a:Ua([a,c.pathname])),Ql(c)}function yS(s,{relative:t}={}){let a=R.useContext(R_);lt(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=U_("useViewTransitionState"),o=ao(s,{relative:t});if(!a.isTransitioning)return!1;let c=ka(a.currentLocation.pathname,r)||a.currentLocation.pathname,m=ka(a.nextLocation.pathname,r)||a.nextLocation.pathname;return ac(o.pathname,m)!=null||ac(o.pathname,c)!=null}const k_=R.createContext(void 0),_r="https://auth.sfdatahub.com".replace(/\/+$/,""),nv=_r?`${_r}/auth/me`:"",av=_r?`${_r}/auth/logout`:"";function vS({children:s}){const[t,a]=R.useState("idle"),[r,o]=R.useState(null),c=R.useRef(!1),m=R.useCallback(async()=>{if(!nv){console.warn("[Auth] AUTH_BASE_URL not configured; treating as unauthenticated."),o(null),a("unauthenticated");return}if(!c.current){c.current=!0,a(C=>C==="authenticated"?C:"loading");try{const C=await fetch(nv,{method:"GET",credentials:"include"});if(C.status===200){const U=await C.json(),B=U?.user??U;B?(o(B),a("authenticated")):(o(null),a("unauthenticated"));return}if(C.status===401||C.status===403){o(null),a("unauthenticated");return}console.error(`[Auth] Session check failed (${C.status}).`),o(null),a("error")}catch(C){console.error("[Auth] Failed to refresh session.",C),o(null),a("error")}finally{c.current=!1}}},[]);R.useEffect(()=>{m()},[m]);const g=R.useCallback(C=>{if(!_r){console.warn(`[Auth] Cannot initiate ${C} login without AUTH_BASE_URL.`);return}const U=new URL(`/auth/${C}/login`,_r);U.searchParams.set("redirect",window.location.href),window.location.href=U.toString()},[]),y=R.useCallback(async()=>{if(!av){console.warn("[Auth] AUTH_BASE_URL is not configured. Clearing local session only."),o(null),a("unauthenticated");return}try{const C=await fetch(av,{method:"POST",credentials:"include"});if(!C.ok)throw new Error(`Logout failed (${C.status}).`)}catch(C){console.error("[Auth] Failed to logout. Clearing local session anyway.",C)}finally{o(null),a("unauthenticated")}},[]),v=R.useCallback(async()=>{await m()},[m]);R.useEffect(()=>{c.current=!1},[t,r]);const E=t==="idle"||t==="loading",S=R.useMemo(()=>({status:t,user:r,isLoading:E,login:g,logout:y,refresh:v}),[t,r,E,g,y,v]);return d.jsx(k_.Provider,{value:S,children:s})}function io(){const s=R.useContext(k_);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s}const _S=[{label:"Dashboard",to:"/"},{label:"Admin Users",to:"/users"},{label:"Access & Features",to:"/access"},{label:"Scans uploaded",to:"/admin/scans-uploaded"},{label:"Todo-Liste",to:"/admin/todo"},{label:"Feedback overview",to:"/admin/feedback"},{label:"Logs",to:"/logs"},{label:"APIs & Services",to:"/apis"},{label:"Settings",to:"/settings"}],bS=[{label:"CLI Commands",to:"/cli-commands"}];function ES(s){return s.some(t=>["admin","owner","developer","dev"].includes(t.toLowerCase()))}function TS({open:s,onClose:t}){const{user:a}=io(),r=a?.roles??[],o=ES(r);return d.jsxs("aside",{className:`sidebar ${s?"sidebar--open":""}`,children:[d.jsxs("div",{className:"sidebar__header",children:[d.jsx("p",{children:"Control Panel"}),d.jsx("small",{children:"Admin tools"})]}),d.jsxs("nav",{className:"sidebar__nav",children:[o&&d.jsxs("div",{className:"sidebar__section",children:[d.jsx("p",{className:"sidebar__section-title",children:"Dev Tools"}),bS.map(c=>d.jsx(af,{to:c.to,end:c.to==="/",className:({isActive:m})=>`sidebar__link ${m?"sidebar__link--active":""}`,onClick:t,children:c.label},c.to))]}),d.jsxs("div",{className:"sidebar__section",children:[d.jsx("p",{className:"sidebar__section-title",children:"Navigation"}),_S.map(c=>d.jsx(af,{to:c.to,end:c.to==="/",className:({isActive:m})=>`sidebar__link ${m?"sidebar__link--active":""}`,onClick:t,children:c.label},c.to))]})]})]})}function SS({onToggleSidebar:s,isSidebarOpen:t}){const{user:a,status:r,isLoading:o,login:c,logout:m}=io(),[g,y]=R.useState(!1),v=R.useRef(null),E=R.useMemo(()=>a?a.displayName||a.providers?.[a.provider]?.displayName||"User":"Guest",[a]),S=R.useMemo(()=>{if(a?.avatarUrl)return a.avatarUrl;const P=a?.providers?.[a?.provider??"discord"]?.avatarUrl;return P||null},[a]),C=R.useMemo(()=>(a?.roles??[]).filter(j=>["admin","owner","developer","mod","moderator"].includes(j.toLowerCase())),[a]);R.useEffect(()=>{const P=j=>{v.current&&!v.current.contains(j.target)&&y(!1)};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]),R.useEffect(()=>{o&&y(!1)},[o]);const U=P=>{c(P)},B=async()=>{await m(),y(!1)};return d.jsxs("header",{className:"topbar",children:[d.jsxs("div",{className:"topbar__left",children:[d.jsxs("button",{type:"button",className:"topbar__burger","aria-label":"Toggle navigation","aria-expanded":t??!1,onClick:s,children:[d.jsx("span",{}),d.jsx("span",{}),d.jsx("span",{})]}),d.jsxs("div",{className:"topbar__branding",children:[d.jsx("span",{className:"topbar__logo",children:"SFDataHub"}),d.jsx("span",{className:"topbar__subtitle",children:"Control Panel"})]})]}),d.jsx("div",{className:"topbar__user",children:o?d.jsxs("div",{className:"topbar__badge topbar__badge--muted",children:[d.jsx("span",{className:"topbar__spinner","aria-hidden":"true"}),d.jsx("span",{className:"sr-only",children:"Checking session..."}),d.jsx("span",{children:"Loading"})]}):r==="unauthenticated"?d.jsxs("div",{className:"topbar__auth",children:[d.jsx("button",{type:"button",className:"topbar__login topbar__login--discord",onClick:()=>U("discord"),children:"Login Discord"}),d.jsx("button",{type:"button",className:"topbar__login topbar__login--google",onClick:()=>U("google"),children:"Login Google"})]}):d.jsxs("div",{className:"topbar__account",ref:v,children:[d.jsxs("button",{type:"button",className:"topbar__account-btn","aria-haspopup":"menu","aria-expanded":g,onClick:()=>y(P=>!P),children:[S?d.jsx("img",{className:"topbar__avatar-img",src:S,alt:E}):d.jsx("div",{className:"topbar__avatar",children:E?.[0]??"A"}),d.jsxs("div",{className:"topbar__meta",children:[d.jsx("p",{children:E}),d.jsxs("div",{className:"topbar__roles",children:[C.length===0?d.jsx("small",{className:"topbar__role",children:"User"}):null,C.map(P=>d.jsx("span",{className:"topbar__role topbar__role--badge",children:P},P))]})]})]}),g&&d.jsxs("div",{className:"topbar__dropdown",role:"menu",children:[d.jsxs("div",{className:"topbar__dropdown-header",children:[d.jsx("p",{className:"topbar__dropdown-name",children:E}),d.jsxs("p",{className:"topbar__dropdown-sub",children:["Signed in via ",a?.provider]})]}),d.jsx("button",{type:"button",className:"topbar__dropdown-item",onClick:()=>{typeof window<"u"&&window.open("https://sfdatahub.com/","_blank","noopener,noreferrer")},children:"Back to SFDataHub"}),d.jsx("button",{type:"button",className:"topbar__dropdown-item",onClick:B,children:"Logout"})]})]})})]})}function ua({title:s,description:t,children:a,headerContent:r}){return d.jsxs("section",{className:"content-shell",children:[d.jsx("div",{className:"content-shell__header",children:r??d.jsxs("div",{children:[d.jsx("p",{className:"content-shell__eyebrow",children:"SFDataHub"}),d.jsx("h1",{children:s}),t&&d.jsx("p",{className:"content-shell__description",children:t})]})}),d.jsx("div",{className:"content-shell__body",children:a})]})}function Ha({title:s,subtitle:t,hintRight:a}){return d.jsxs("div",{className:"page-header",children:[d.jsxs("div",{className:"page-header__left",children:[d.jsx("p",{className:"content-shell__eyebrow",children:"SFDataHub"}),d.jsx("h1",{className:"page-header__title",children:s}),t&&d.jsx("p",{className:"page-header__subtitle",children:t})]}),a&&d.jsx("p",{className:"page-header__hint",children:a})]})}const vs=[{id:"auth-api",name:"Auth API",kind:"api",description:"Handles login via Discord/Google and issues JWTs so SFDataHub can gate session information.",url:"https://auth.sfdatahub.com",status:"ok",docsUrl:"",owner:"Backend",healthCheck:{type:"http",url:"https://auth.sfdatahub.com/health",timeoutMs:5e3}},{id:"scan-import-api",name:"Scan Import API",kind:"api",description:"Accepts HAR/CSV uploads from the UI and writes parsed scan data into Firestore.",status:"unknown",docsUrl:"",owner:"Backend"},{id:"firestore",name:"Firestore Database",kind:"db",description:"Primary database for player, guild and scan data (project `sfdatahub-staging`).",url:"https://console.firebase.google.com/project/sfdatahub-staging/firestore/data",status:"ok",docsUrl:"",owner:"Infra",healthCheck:{type:"firestore",firestoreCollection:"stats_public",firestoreDocument:"toplists_bundle_v1",timeoutMs:5e3}},{id:"goatcounter",name:"GoatCounter Analytics",kind:"analytics",description:"Privacy-friendly traffic stats for SFDataHub (page views, referrers, etc.).",url:"https://example.goatcounter.com/sfdatahub",status:"ok",docsUrl:"",owner:"Analytics"}],B_=6e3;function AS(s){return s===200?"ok":s>=500?"down":s>=400?"degraded":"unknown"}async function xS(s,t){const a=new AbortController,r=setTimeout(()=>a.abort(),t??B_),o=performance.now();try{const c=await fetch(s,{method:"GET",signal:a.signal}),m=Math.round(performance.now()-o),g=AS(c.status);return clearTimeout(r),{status:g,latencyMs:m,checkedAt:new Date().toISOString(),errorMessage:c.ok?void 0:`HTTP ${c.status}`}}catch(c){clearTimeout(r);const m=c instanceof Error?c.message:"Network error";return{status:(c instanceof DOMException&&c.name==="AbortError","down"),latencyMs:Math.round(performance.now()-o),checkedAt:new Date().toISOString(),errorMessage:m}}}async function wS(s,t,a,r){const o="AIzaSyDEktl9zQMkxiKDMZ1y4IFOALr43wkGtNA",c=a?`${t}/${a}`:t,g=`${`https://firestore.googleapis.com/v1/projects/${s}/databases/(default)/documents/${c}`}?pageSize=1&key=${o}`,y=new AbortController,v=setTimeout(()=>y.abort(),r??B_),E=performance.now();try{const S=await fetch(g,{method:"GET",signal:y.signal}),C=Math.round(performance.now()-E);return clearTimeout(v),S.ok?{status:"ok",latencyMs:C,checkedAt:new Date().toISOString()}:{status:S.status>=500?"down":"degraded",latencyMs:C,checkedAt:new Date().toISOString(),errorMessage:`HTTP ${S.status}`}}catch(S){clearTimeout(v);const C=S instanceof Error?S.message:"Network error";return{status:"down",latencyMs:Math.round(performance.now()-E),checkedAt:new Date().toISOString(),errorMessage:C}}}async function NS(s){const{healthCheck:t}=s;if(!t)return[s.id,{status:s.status??"unknown"}];if(t.type==="http"){const o=await xS(t.url,t.timeoutMs);return[s.id,o]}const r=await wS("sfdatahub-staging",t.firestoreCollection,t.firestoreDocument,t.timeoutMs);return[s.id,r]}function z_(s=vs){const[t,a]=R.useState({}),[r,o]=R.useState(!1),[c,m]=R.useState(void 0),g=R.useMemo(()=>s.filter(v=>v.healthCheck),[s]),y=R.useCallback(async()=>{if(g.length===0){a({});return}o(!0),m(void 0);try{const v=await Promise.all(g.map(S=>NS(S))),E={};for(const[S,C]of v)E[S]=C;a(E)}catch(v){const E=v instanceof Error?v.message:"Health check failed";m(E)}finally{o(!1)}},[g]);return R.useEffect(()=>{y()},[]),{healthMap:t,isLoading:r,error:c,refresh:y}}const RS=[{label:"All",value:"all"},{label:"APIs",value:"api"},{label:"Database",value:"db"},{label:"Analytics",value:"analytics"},{label:"Other",value:"other"}],CS=[{label:"All",value:"all"},{label:"OK",value:"ok"},{label:"Degraded",value:"degraded"},{label:"Down",value:"down"},{label:"Unknown",value:"unknown"}],zu={ok:{label:"OK",tone:"ok"},degraded:{label:"Degraded",tone:"warning"},down:{label:"Down",tone:"down"},unknown:{label:"Unknown",tone:"unknown"}},iv={api:"API",db:"Database",analytics:"Analytics",worker:"Worker",other:"Other"};function jS(s){return s.trim().toLowerCase()}function DS(){const s=vc(),{healthMap:t,isLoading:a}=z_(vs),[r,o]=R.useState("all"),[c,m]=R.useState("all"),[g,y]=R.useState(""),[v,E]=R.useState(null),S=R.useMemo(()=>{const B=jS(g);return vs.filter(P=>{const F=t[P.id]?.status??P.status??"unknown";if(r!=="all"){if(r==="other"){if(P.kind!=="other"&&P.kind!=="worker")return!1}else if(P.kind!==r)return!1}return!(c!=="all"&&F!==c||B&&!`${P.name} ${P.description}`.toLowerCase().includes(B))})},[r,c,g,t]),C=B=>{s("/logs",{state:{defaultFilters:{service:B}}})},U=B=>zu[B.status??"unknown"];return d.jsxs(ua,{title:"APIs & Services",description:"Catalog of backend services, databases and analytics powering SFDataHub",headerContent:d.jsx(Ha,{title:"APIs & Services",subtitle:"Catalog of backend services, databases and analytics powering SFDataHub",hintRight:"Data currently based on static config - health checks later"}),children:[d.jsxs("div",{className:"service-filters",children:[d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Category"}),d.jsx("select",{value:r,onChange:B=>o(B.target.value),children:RS.map(B=>d.jsx("option",{value:B.value,children:B.label},B.value))})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Status"}),d.jsx("select",{value:c,onChange:B=>m(B.target.value),children:CS.map(B=>d.jsx("option",{value:B.value,children:B.label},B.value))})]}),d.jsxs("label",{className:"filter-control filter-control--grow",children:[d.jsx("span",{children:"Search by name or description"}),d.jsx("input",{value:g,onChange:B=>y(B.target.value),placeholder:"Search text"})]})]}),d.jsx("div",{className:"service-grid",children:S.map(B=>{const P=t[B.id],j=P?zu[P.status]:U(B);return d.jsxs("article",{className:"service-card service-card--catalog",children:[d.jsxs("header",{className:"service-card__head",children:[d.jsxs("div",{children:[d.jsx("p",{className:"service-card__name",children:B.name}),d.jsx("p",{className:"service-card__desc",children:B.description}),P?.latencyMs!==void 0&&d.jsxs("p",{className:"service-card__meta",children:["Latency: ",P.latencyMs," ms"]}),a&&!P&&d.jsx("p",{className:"service-card__meta",children:"Checking health"})]}),d.jsxs("div",{className:"service-card__status",children:[d.jsx("span",{className:`status-badge status-badge--${j.tone}`,children:j.label}),d.jsx("span",{className:"kind-pill kind-pill--light",children:iv[B.kind]})]})]}),B.owner&&d.jsxs("p",{className:"service-card__owner",children:["Owner: ",d.jsx("span",{children:B.owner})]}),d.jsxs("div",{className:"service-card__actions",children:[B.url?d.jsx("a",{className:"text-link",href:B.url,target:"_blank",rel:"noreferrer",children:"Open service"}):null,B.docsUrl?d.jsx("a",{className:"text-link",href:B.docsUrl,target:"_blank",rel:"noreferrer",children:"Docs"}):null,d.jsx("button",{type:"button",className:"text-link",onClick:()=>C(B.id),children:"View logs"}),d.jsx("button",{type:"button",className:"text-link text-link--muted",onClick:()=>E(B),children:"Details"})]})]},B.id)})}),v&&d.jsxs("aside",{className:"service-detail-drawer",children:[d.jsxs("div",{className:"service-detail-drawer__header",children:[d.jsxs("div",{children:[d.jsx("p",{className:"monitoring-panel__eyebrow",children:"Service details"}),d.jsx("h2",{children:v.name}),d.jsx("p",{className:"service-detail-drawer__description",children:v.description})]}),d.jsxs("div",{className:"service-detail-drawer__header-meta",children:[d.jsx("span",{className:`status-chip status-chip--${t[v.id]?.status??v.status??"unknown"}`,children:zu[t[v.id]?.status??v.status??"unknown"]?.label}),d.jsx("button",{type:"button",className:"btn secondary",onClick:()=>E(null),children:"Close"})]})]}),d.jsxs("div",{className:"service-detail-drawer__meta",children:[d.jsxs("div",{children:[d.jsx("span",{children:"Kind"}),d.jsx("strong",{children:iv[v.kind]})]}),d.jsxs("div",{children:[d.jsx("span",{children:"Status"}),d.jsx("strong",{children:(v&&(t[v.id]?.status?zu[t[v.id].status]:U(v))).label})]}),d.jsxs("div",{children:[d.jsx("span",{children:"Owner"}),d.jsx("strong",{children:v.owner??"Unassigned"})]}),d.jsxs("div",{children:[d.jsx("span",{children:"Docs"}),v.docsUrl?d.jsx("a",{className:"text-link",href:v.docsUrl,target:"_blank",rel:"noreferrer",children:"Open docs"}):d.jsx("strong",{children:"Not linked"})]}),d.jsxs("div",{children:[d.jsx("span",{children:"Endpoint"}),v.url?d.jsx("a",{className:"text-link",href:v.url,target:"_blank",rel:"noreferrer",children:"Open service"}):d.jsx("strong",{children:"Not linked"})]})]}),d.jsx("p",{className:"service-detail-drawer__hint",children:"How to debug issues for this service: capture failing requests, check logs with the prefilled filter, and loop in the listed owner if escalations are needed."}),v&&t[v.id]?.errorMessage&&d.jsxs("p",{className:"service-detail-drawer__hint",children:["Last check failed: ",t[v.id].errorMessage]}),d.jsx("div",{className:"service-detail-drawer__footer",children:d.jsx("button",{type:"button",className:"btn secondary",onClick:()=>C(v.id),children:"View logs for this service"})})]})]})}const sv={ok:{label:"OK",tone:"ok"},degraded:{label:"Degraded",tone:"warning"},down:{label:"Down",tone:"down"},unknown:{label:"Unknown",tone:"unknown"}},rv={api:"API",db:"DB",analytics:"Analytics",worker:"Worker",other:"Other"},Pu={errorsLast24h:3,warningsLast24h:12,lastError:{timestamp:"Nov 22, 2025  09:14 UTC",service:"Scan Import API"}};function IS(){const{healthMap:s,isLoading:t}=z_(vs);return d.jsxs(ua,{title:"SFDataHub Control Panel",description:"Overview of services, errors and analytics",headerContent:d.jsx(Ha,{title:"SFDataHub Control Panel",subtitle:"Overview of services, errors and analytics"}),children:[d.jsx("div",{className:"dashboard-meta",children:d.jsx("span",{className:"env-badge",children:"STAGING"})}),d.jsx("div",{className:"service-grid",children:vs.map(a=>{const r=s[a.id],o=r?.status??a.status??"unknown",c=sv[o]??sv.unknown;return d.jsxs("article",{className:"service-card",children:[d.jsxs("div",{className:"service-card__head",children:[d.jsxs("div",{children:[d.jsx("p",{className:"service-card__name",children:a.name}),d.jsx("p",{className:"service-card__desc",children:a.description}),t&&!r&&d.jsx("p",{className:"service-card__meta",children:"Checking health"}),r?.latencyMs!==void 0&&d.jsxs("p",{className:"service-card__meta",children:["Latency: ",r.latencyMs," ms"]}),r?.checkedAt&&d.jsxs("p",{className:"service-card__meta",children:["Last check: ",new Date(r.checkedAt).toLocaleTimeString()]})]}),d.jsx("span",{className:`status-badge status-badge--${c.tone}`,children:c.label})]}),d.jsxs("div",{className:"service-card__tags",children:[d.jsx("span",{className:"kind-pill kind-pill--light",children:rv[a.kind]}),d.jsx("span",{className:"kind-pill",children:a.kind.toUpperCase()})]}),d.jsxs("div",{className:"service-card__actions",children:[d.jsx(ic,{className:"text-link",to:"/apis",children:"View in APIs & Services"}),a.url?d.jsx("a",{className:"text-link",href:a.url,target:"_blank",rel:"noreferrer",children:"Open service"}):d.jsx("span",{className:"text-link text-link--muted",children:"Endpoint TBD"})]})]},a.id)})}),d.jsxs("section",{className:"monitoring-panel",children:[d.jsxs("header",{className:"monitoring-panel__header",children:[d.jsxs("div",{children:[d.jsx("p",{className:"monitoring-panel__eyebrow",children:"Errors & Logs"}),d.jsx("h2",{children:"System insight"})]}),d.jsx(ic,{className:"btn secondary",to:"/logs",state:{defaultFilters:{service:"auth-api",level:"error"}},children:"Open Logs"})]}),d.jsxs("div",{className:"monitoring-panel__grid",children:[d.jsxs("div",{children:[d.jsx("p",{className:"monitoring-panel__label",children:"Errors last 24h"}),d.jsx("p",{className:"monitoring-panel__value",children:Pu.errorsLast24h})]}),d.jsxs("div",{children:[d.jsx("p",{className:"monitoring-panel__label",children:"Warnings last 24h"}),d.jsx("p",{className:"monitoring-panel__value",children:Pu.warningsLast24h})]}),d.jsxs("div",{children:[d.jsx("p",{className:"monitoring-panel__label",children:"Last error"}),d.jsx("p",{className:"monitoring-panel__value",children:Pu.lastError.timestamp}),d.jsxs("p",{className:"monitoring-panel__meta",children:["Service: ",Pu.lastError.service]})]})]})]}),d.jsxs("section",{className:"service-detail-panel",children:[d.jsxs("div",{className:"service-detail-panel__header",children:[d.jsx("p",{className:"monitoring-panel__eyebrow",children:"What does each API do?"}),d.jsx("h2",{children:"Service catalog"})]}),d.jsx("div",{className:"service-detail-panel__list",children:vs.map(a=>d.jsxs("article",{className:"service-detail-panel__card",children:[d.jsxs("div",{className:"service-detail-panel__row",children:[d.jsxs("div",{children:[d.jsx("p",{className:"service-detail-panel__name",children:a.name}),d.jsx("p",{className:"service-detail-panel__kind",children:rv[a.kind]})]}),a.url?d.jsx("a",{className:"text-link",href:a.url,target:"_blank",rel:"noreferrer",children:"Visit endpoint"}):d.jsx("span",{className:"text-link text-link--muted",children:"URL TBD"})]}),d.jsx("p",{className:"service-detail-panel__desc",children:a.description})]},a.id))})]})]})}const lv="https://auth.sfdatahub.com".replace(/\/+$/,""),MS="/admin/logs",OS=200,VS=500,LS=()=>{if(!lv)throw new Error("Auth API base URL is missing (VITE_AUTH_BASE_URL).");return lv},US=s=>typeof s=="number"&&Number.isFinite(s)?Math.min(VS,Math.max(1,Math.round(s))):OS;async function ov(s){const t=LS(),a=US(s?.limit),r=new URL(`${t}${MS}`);r.searchParams.set("limit",String(a)),typeof s?.cursor=="string"&&s.cursor.length&&r.searchParams.set("cursor",s.cursor);const o=await fetch(r.toString(),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});let c={};try{c=await o.json()}catch{c={}}if(!o.ok){const g=c.error??c.message??o.statusText;throw new Error(g||`Request failed (${o.status}).`)}if(c.ok!==!0||!Array.isArray(c.items)){const g=c.error??"Failed to load logs.";throw new Error(g)}const m=typeof c.nextCursor=="string"?c.nextCursor:null;return{items:c.items,nextCursor:m}}const uv=200;function kS(){const[s,t]=R.useState([]),[a,r]=R.useState(!1),[o,c]=R.useState(null),[m,g]=R.useState(null),y=R.useCallback(async()=>{r(!0),c(null);try{const E=await ov({limit:uv});t(E.items),g(E.nextCursor)}catch(E){const S=E instanceof Error?E.message:"Failed to load logs.";c(S)}finally{r(!1)}},[]),v=R.useCallback(async()=>{if(m){c(null);try{const E=await ov({limit:uv,cursor:m});t(S=>[...S,...E.items]),g(E.nextCursor)}catch(E){const S=E instanceof Error?E.message:"Failed to load logs.";c(S)}}},[m]);return R.useEffect(()=>{y()},[y]),{logs:s,loading:a,error:o,loadMore:v,hasMore:!!m,reload:y}}const BS=[{label:"All services",value:"all"},{label:"Auth API",value:"auth-api"},{label:"Scan Import API",value:"scan-import-api"},{label:"Firestore Database",value:"firestore"},{label:"GoatCounter Analytics",value:"goatcounter"},{label:"Other",value:"other"}],zS=[{label:"All levels",value:"all"},{label:"Errors",value:"error"},{label:"Warnings",value:"warning"},{label:"Info",value:"info"}],PS={"1h":3600*1e3,"24h":1440*60*1e3,"7d":10080*60*1e3,all:null},HS=[{label:"Last hour",value:"1h"},{label:"Last 24 hours",value:"24h"},{label:"Last 7 days",value:"7d"},{label:"All time",value:"all"}],FS=[{label:"All events",value:"all"},{label:"User roles",value:"userRoles"},{label:"Feature access",value:"featureAccess"}],cv=Object.fromEntries(vs.map(s=>[s.id,s.name]));function hv(s){const t=new Date(s);if(Number.isNaN(t.getTime()))return s;const a=t.toISOString().slice(0,10),r=t.toISOString().slice(11,16);return`${a} - ${r}`}function qS(){const t=Pa().state?.defaultFilters??{},[a,r]=R.useState(t.service??"all"),[o,c]=R.useState(t.level??"all"),[m,g]=R.useState(t.timeRange??"24h"),[y,v]=R.useState(t.search??""),[E,S]=R.useState("all"),[C,U]=R.useState(null),{logs:B,loading:P,error:j,hasMore:F,loadMore:ee,reload:se}=kS(),de=R.useMemo(()=>{const re=Date.now(),I=y.trim().toLowerCase();return B.filter(w=>{if(a!=="all"&&w.service!==a||o!=="all"&&w.level!==o)return!1;const N=PS[m];if(N!==null){const O=Date.parse(w.timestamp);if(Number.isNaN(O)||O<re-N)return!1}if(I&&!w.message.toLowerCase().includes(I))return!1;if(E!=="all"){const O=w.context,M=O&&typeof O=="object"&&"action"in O?String(O.action):"";if(E==="userRoles"&&!M.startsWith("user.role.")||E==="featureAccess"&&!M.startsWith("feature.access."))return!1}return!0})},[B,a,o,m,y,E]),Te=R.useMemo(()=>({error:de.filter(re=>re.level==="error").length,warning:de.filter(re=>re.level==="warning").length,info:de.filter(re=>re.level==="info").length}),[de]);return d.jsxs(ua,{title:"Logs",description:"Inspect errors, warnings and info across SFDataHub services",headerContent:d.jsx(Ha,{title:"Logs",subtitle:"Inspect errors, warnings and info across SFDataHub services",hintRight:"Live audit log feed from auth-api"}),children:[d.jsxs("div",{className:"logs-filters",children:[d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Service"}),d.jsx("select",{value:a,onChange:re=>r(re.target.value),children:BS.map(re=>d.jsx("option",{value:re.value,children:re.label},re.value))})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Level"}),d.jsx("select",{value:o,onChange:re=>c(re.target.value),children:zS.map(re=>d.jsx("option",{value:re.value,children:re.label},re.value))})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Event type"}),d.jsx("select",{value:E,onChange:re=>S(re.target.value),children:FS.map(re=>d.jsx("option",{value:re.value,children:re.label},re.value))})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Time range"}),d.jsx("select",{value:m,onChange:re=>g(re.target.value),children:HS.map(re=>d.jsx("option",{value:re.value,children:re.label},re.value))})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Search message"}),d.jsx("input",{value:y,onChange:re=>v(re.target.value),placeholder:"Search text"})]})]}),d.jsxs("div",{className:"logs-summary",children:[d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Errors"}),d.jsx("strong",{children:Te.error})]}),d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Warnings"}),d.jsx("strong",{children:Te.warning})]}),d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Info"}),d.jsx("strong",{children:Te.info})]})]}),j&&d.jsx("div",{className:"logs-error",children:d.jsx("p",{children:j})}),d.jsx("div",{className:"logs-actions",children:d.jsx("button",{type:"button",className:"btn secondary",onClick:se,disabled:P,children:"Refresh"})}),d.jsx("div",{className:"log-table",children:P&&B.length===0?d.jsx("p",{className:"logs-empty",children:"Loading logs"}):de.length===0?d.jsx("p",{className:"logs-empty",children:"No logs for the selected filters"}):de.map(re=>d.jsxs("button",{type:"button",className:"log-row",onClick:()=>U(re),children:[d.jsxs("div",{className:"log-row__head",children:[d.jsx("span",{className:"log-row__timestamp",children:hv(re.timestamp)}),d.jsx("span",{className:`log-badge log-badge--${re.level}`,children:re.level})]}),d.jsxs("div",{className:"log-row__body",children:[d.jsx("span",{className:"log-row__service",children:cv[re.service]??"Other"}),d.jsx("span",{className:"log-row__message",children:re.message})]})]},re.id))}),F&&d.jsx("div",{className:"logs-load-more",children:d.jsx("button",{type:"button",className:"btn secondary",onClick:ee,disabled:P,children:"Load more"})}),C&&d.jsx("div",{className:"log-modal",role:"dialog","aria-modal":"true",children:d.jsxs("div",{className:"log-modal__content",children:[d.jsxs("div",{className:"log-modal__header",children:[d.jsxs("div",{children:[d.jsx("p",{className:"log-modal__eyebrow",children:C.level.toUpperCase()}),d.jsx("h2",{children:C.message})]}),d.jsx("button",{type:"button",className:"btn secondary",onClick:()=>U(null),children:"Close"})]}),d.jsxs("div",{className:"log-modal__body",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Timestamp:"})," ",hv(C.timestamp)]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Service:"})," ",cv[C.service]??"Other"]}),C.details&&d.jsxs("div",{children:[d.jsx("p",{className:"log-modal__section-title",children:"Details"}),d.jsx("p",{children:C.details})]}),C.context!=null&&d.jsxs("div",{children:[d.jsx("p",{className:"log-modal__section-title",children:"Context"}),d.jsx("pre",{children:JSON.stringify(C.context,null,2)})]})]})]})})]})}function $S(){return d.jsxs(ua,{title:"Settings",description:"Konfiguriere Plattform- und Moderationseinstellungen.",children:[d.jsxs("div",{className:"placeholder-card",children:[d.jsx("h3",{children:"Theme"}),d.jsx("p",{children:"Dark Mode ist aktiviert. Weitere Optionen folgen im nchsten Release."})]}),d.jsxs("div",{className:"placeholder-card",children:[d.jsx("h3",{children:"Benachrichtigungen"}),d.jsx("p",{children:"Keine kritischen Alerts. Aktiviert: E-Mail an alle Moderatoren."})]})]})}function GS(s){return s.reduce((t,a)=>(a.roles.includes("admin")&&(t.admins+=1),a.roles.includes("moderator")&&(t.moderators+=1),(a.status==="suspended"||a.status==="banned")&&(t.suspended+=1),t),{admins:0,moderators:0,invited:0,suspended:0})}const sc="https://auth.sfdatahub.com".replace(/\/+$/,""),P_="/admin/users",H_=["user","moderator","developer","admin"],KS={admin:"admin",owner:"admin",moderator:"moderator",mod:"moderator",developer:"developer",dev:"developer",creator:"developer",user:"user"},QS=s=>{switch(s){case"admin":case"owner":return"admin";case"moderator":case"mod":return"mod";case"developer":case"creator":return"creator";default:return"user"}},YS=["active","suspended","banned"],XS=["discord","google"],ZS=s=>{const t=a=>{const r=H_.indexOf(a);return r===-1?Number.MAX_SAFE_INTEGER:r};return[...s].sort((a,r)=>t(a)-t(r))},F_=s=>typeof s=="string"&&XS.includes(s),dv=s=>{if(typeof s=="number"){const t=new Date(s);return Number.isNaN(t.getTime())?null:t.toISOString()}if(typeof s=="string"){const t=new Date(s);return Number.isNaN(t.getTime())?null:t.toISOString()}return null},JS=s=>{if(!Array.isArray(s))return["user"];const t=s.map(r=>KS[String(r).toLowerCase()]).filter(r=>!!r),a=Array.from(new Set(t));return a.length?ZS(a):["user"]},WS=s=>typeof s=="string"&&YS.includes(s)?s:"active",eA=s=>{if(!s||typeof s!="object")return;const t={};return Object.entries(s).forEach(([a,r])=>{F_(a)&&(!r||typeof r!="object"||(t[a]={id:String(r.id??""),displayName:typeof r.displayName=="string"?r.displayName:void 0,avatarUrl:typeof r.avatarUrl=="string"?r.avatarUrl:void 0}))}),Object.keys(t).length?t:void 0},q_=s=>{const t=s??{},a=typeof t.id=="string"&&t.id.length?t.id:"unknown-user",r=typeof t.userId=="string"&&t.userId.length?t.userId:a??"unknown-user",o=Array.isArray(t.flags)?t.flags.map(c=>String(c)):void 0;return{id:a,userId:r,displayName:typeof t.displayName=="string"&&t.displayName.length?t.displayName:t.profile?.displayName??null,avatarUrl:typeof t.avatarUrl=="string"?t.avatarUrl:null,primaryProvider:F_(t.primaryProvider)?t.primaryProvider:null,providers:eA(t.providers),profile:t.profile,roles:JS(t.roles),status:WS(t.status),createdAt:dv(t.createdAt),lastLoginAt:dv(t.lastLoginAt),notes:typeof t.notes=="string"?t.notes:null,flags:o,isSystem:t.isSystem===!0||t.system===!0||(o??[]).includes("system")}},$_=async s=>{if(s.ok){if(s.status===204)return{};try{return await s.json()}catch{return{}}}try{const t=await s.json(),a=t?.error??t?.message??s.statusText;throw new Error(a||`Failed with status ${s.status}.`)}catch(t){throw t instanceof Error?t:new Error(s.statusText||"Request failed.")}};async function tA(){if(!sc)throw new Error("Auth API base URL is missing (VITE_AUTH_BASE_URL).");const s=await fetch(`${sc}${P_}`,{method:"GET",credentials:"include"}),t=await $_(s);return(Array.isArray(t?.users)?t.users:[]).map(q_)}async function nA(s,t){if(!sc)throw new Error("Auth API base URL is missing (VITE_AUTH_BASE_URL).");if(!s)throw new Error("User id is required to update roles.");const a=Array.from(new Set(t.map(QS).filter(g=>!!g)));a.length||a.push("user");const r=`${sc}${P_}/${encodeURIComponent(s)}/roles`,o=await fetch(r,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({roles:a})}),c=await $_(o),m=c?.user??c;return q_(m)}const G_=H_;function aA(){const[s,t]=R.useState([]),[a,r]=R.useState(!1),[o,c]=R.useState(null),m=R.useCallback(async v=>{if(!v?.cancelled){r(!0),c(null);try{const E=await tA();v?.cancelled||t(E)}catch(E){const S=E instanceof Error?E.message:"Unexpected error while loading admin users.";v?.cancelled||(c(S),t([]))}finally{v?.cancelled||r(!1)}}},[]);R.useEffect(()=>{const v={cancelled:!1};return m(v),()=>{v.cancelled=!0}},[m]);const g=R.useCallback(()=>{m()},[m]),y=R.useCallback(v=>{t(E=>{let S=!1;const C=E.map(U=>U.userId===v.userId||U.id===v.id?(S=!0,v):U);return S?C:[v,...C]})},[]);return{users:s,isLoading:a,error:o,refresh:g,replaceUser:y}}const iA=G_,sA=[{label:"All roles",value:"all"},{label:"Admin",value:"admin"},{label:"Moderator",value:"moderator"},{label:"Developer",value:"developer"},{label:"User",value:"user"}],rA=[{label:"All statuses",value:"all"},{label:"Active",value:"active"},{label:"Suspended",value:"suspended"},{label:"Banned",value:"banned"}],fv={discord:"Discord",google:"Google"},Bd={admin:"Admin",moderator:"Moderator",mod:"Moderator",creator:"Developer",developer:"Developer",user:"User",owner:"Owner"},mv={active:"Active",suspended:"Suspended",banned:"Banned"},zd=s=>{const t=a=>{const r=G_.indexOf(a);return r===-1?Number.MAX_SAFE_INTEGER:r};return[...s].sort((a,r)=>t(a)-t(r))},lA=s=>s.isSystem===!0||(s.flags??[]).includes("system"),pv=(s,t)=>s.userId===t.userId||s.id===t.id;function oA(s){return s.trim().toLowerCase()}function Hu(s){if(!s)return"-";const t=new Date(s);if(Number.isNaN(t.getTime()))return s;const a=t.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}),r=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});return`${a} at ${r}`}function Fu(s){return s.displayName??s.profile?.displayName??s.userId??"Unknown user"}function gv(s){const t=new Set;s.primaryProvider&&t.add(s.primaryProvider);const a=s.providers??{};return Object.keys(a).forEach(r=>t.add(r)),Array.from(t)}function uA(){const[s,t]=R.useState("all"),[a,r]=R.useState("all"),[o,c]=R.useState(""),[m,g]=R.useState(null),[y,v]=R.useState(null),[E,S]=R.useState(null),[C,U]=R.useState(!1),B=R.useRef(null),{users:P,isLoading:j,error:F,refresh:ee,replaceUser:se}=aA(),{user:de}=io(),re=R.useMemo(()=>(de?.roles??[]).map(x=>x.toLowerCase()),[de]).some(x=>x==="admin"||x==="owner"),I=R.useMemo(()=>{const x=oA(o);return P.filter(ge=>{if(s!=="all"&&!ge.roles.includes(s)||a!=="all"&&ge.status!==a)return!1;const Be=Fu(ge).toLowerCase();return!(x&&!`${Be} ${ge.id}`.toLowerCase().includes(x))})},[s,a,o,P]),w=R.useMemo(()=>{if(!y)return;const x=typeof window<"u"?Math.max(12,window.innerWidth-260):null,ge=typeof window<"u"?Math.max(12,window.innerHeight-220):null;return{left:x?Math.min(y.x,x):y.x,top:ge?Math.min(y.y,ge):y.y}},[y]);R.useEffect(()=>{if(!m)return;const x=P.find(ge=>pv(ge,m));x&&x!==m&&g(x)},[m,P]);const N=R.useCallback(()=>{v(null),S(null),U(!1)},[]),O=R.useCallback((x,ge)=>{!re||lA(ge)||typeof window<"u"&&window.matchMedia?.("(pointer: coarse)").matches||(x.preventDefault(),v({user:ge,x:x.clientX,y:x.clientY,roles:zd(ge.roles)}),S(null),U(!1))},[re]);R.useEffect(()=>{if(!y)return;const x=Be=>{Be.key==="Escape"&&N()},ge=Be=>{B.current&&(B.current.contains(Be.target)||N())};return window.addEventListener("keydown",x),window.addEventListener("mousedown",ge),()=>{window.removeEventListener("keydown",x),window.removeEventListener("mousedown",ge)}},[N,y]);const M=R.useCallback(async x=>{if(!y||C)return;const ge=y.roles,Be=new Set(ge);Be.has(x)?Be.delete(x):Be.add(x);const X=zd(Array.from(Be));v({...y,roles:X}),U(!0),S(null);try{const ae=await nA(y.user.userId||y.user.id,X);se(ae),g(ue=>ue&&pv(ue,ae)?ae:ue),v(ue=>ue&&{...ue,user:ae,roles:zd(ae.roles)})}catch(ae){S(ae instanceof Error?ae.message:"Failed to update roles."),v(ue=>ue&&{...ue,roles:ge})}finally{U(!1)}},[C,se,y]),k=R.useMemo(()=>GS(I),[I]);return d.jsxs(ua,{title:"Admin Users",description:"View and edit admin users from auth-api (right-click a user to toggle roles).",headerContent:d.jsx(Ha,{title:"Admin Users",subtitle:"Manage access to SFDataHub admin tools via auth-api.",hintRight:"GET /admin/users  PATCH /admin/users/:userId/roles"}),children:[d.jsxs("div",{className:"admin-top",children:[d.jsx("p",{className:"admin-top__hint",children:F?`Couldn't load admin users. ${F}`:"Connected to auth-api (roles editable)."}),d.jsxs("div",{className:"admin-top__actions",children:[j&&d.jsx("span",{className:"admin-top__status",children:"Loading..."}),d.jsx("button",{type:"button",className:"btn secondary",onClick:ee,disabled:j,children:"Refresh"})]})]}),d.jsxs("div",{className:"admin-filters",children:[d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Role"}),d.jsx("select",{value:s,onChange:x=>t(x.target.value),children:sA.map(x=>d.jsx("option",{value:x.value,children:x.label},x.value))})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Status"}),d.jsx("select",{value:a,onChange:x=>r(x.target.value),children:rA.map(x=>d.jsx("option",{value:x.value,children:x.label},x.value))})]}),d.jsxs("label",{className:"filter-control filter-control--grow",children:[d.jsx("span",{children:"Search by name or id"}),d.jsx("input",{value:o,onChange:x=>c(x.target.value),placeholder:"Search text"})]})]}),d.jsxs("div",{className:"admin-summary",children:[d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Total admins"}),d.jsx("strong",{children:k.admins})]}),d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Moderators"}),d.jsx("strong",{children:k.moderators})]}),d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Invited users"}),d.jsx("strong",{children:k.invited})]}),d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Suspended users"}),d.jsx("strong",{children:k.suspended})]})]}),d.jsxs("div",{className:"user-table",children:[I.map(x=>d.jsxs("button",{type:"button",className:"user-row",onClick:()=>g(x),onContextMenu:ge=>O(ge,x),children:[d.jsxs("div",{className:"user-cell user-cell--name",children:[d.jsx("p",{className:"user-name",children:Fu(x)}),d.jsx("p",{className:"user-id",children:x.id})]}),d.jsx("div",{className:"user-cell user-cell--providers",children:gv(x).map(ge=>d.jsx("span",{className:`pill provider-pill provider-pill--${ge}`,children:fv[ge]},ge))}),d.jsx("div",{className:"user-cell user-cell--roles",children:x.roles.map(ge=>d.jsx("span",{className:`pill role-pill role-pill--${ge}`,children:Bd[ge]??ge},ge))}),d.jsx("div",{className:"user-cell",children:d.jsx("span",{className:`status-chip status-chip--${x.status}`,children:mv[x.status]})}),d.jsx("div",{className:"user-cell",children:d.jsxs("p",{className:"user-meta",children:[d.jsx("span",{className:"user-meta__label",children:"Created"}),Hu(x.createdAt)]})}),d.jsx("div",{className:"user-cell",children:d.jsxs("p",{className:"user-meta",children:[d.jsx("span",{className:"user-meta__label",children:"Last login"}),Hu(x.lastLoginAt)]})})]},x.id)),I.length===0&&d.jsx("div",{className:"placeholder-card",children:d.jsx("p",{children:"No users match your filters."})})]}),y&&d.jsx("div",{className:"role-menu-overlay",onClick:N,children:d.jsxs("div",{ref:B,className:"role-menu",style:w,onClick:x=>x.stopPropagation(),children:[d.jsxs("div",{className:"role-menu__header",children:[d.jsx("p",{className:"role-menu__eyebrow",children:"Roles"}),d.jsx("h3",{className:"role-menu__title",children:Fu(y.user)}),d.jsx("p",{className:"role-menu__id",children:y.user.userId})]}),E&&d.jsx("p",{className:"role-menu__error",children:E}),d.jsx("div",{className:"role-menu__roles",children:iA.map(x=>{const ge=y.roles.includes(x);return d.jsx("button",{type:"button",className:`pill role-pill role-pill--${x} ${ge?"":"pill--ghost"}`,onClick:()=>M(x),disabled:C,"aria-pressed":ge,children:Bd[x]??x},x)})}),d.jsxs("div",{className:"role-menu__footer",children:[d.jsx("span",{className:"role-menu__status",children:C?"Saving...":"Right-click a user to manage roles"}),d.jsx("button",{type:"button",className:"text-link",onClick:N,disabled:C,children:"Close"})]})]})}),m&&d.jsxs("aside",{className:"user-detail-drawer",children:[d.jsxs("div",{className:"user-detail-drawer__header",children:[d.jsxs("div",{children:[d.jsx("p",{className:"monitoring-panel__eyebrow",children:"User details"}),d.jsx("h2",{children:Fu(m)}),d.jsx("p",{className:"user-detail-drawer__id",children:m.userId})]}),d.jsxs("div",{className:"user-detail-drawer__header-meta",children:[d.jsx("span",{className:`status-chip status-chip--${m.status}`,children:mv[m.status]}),d.jsx("button",{type:"button",className:"btn secondary",onClick:()=>g(null),children:"Close"})]})]}),d.jsxs("div",{className:"user-detail-drawer__grid",children:[d.jsxs("div",{children:[d.jsx("p",{className:"user-meta__label",children:"Providers"}),d.jsx("div",{className:"user-detail-drawer__badges",children:gv(m).map(x=>d.jsx("span",{className:`pill provider-pill provider-pill--${x}`,children:fv[x]},x))})]}),d.jsxs("div",{children:[d.jsx("p",{className:"user-meta__label",children:"Roles"}),d.jsx("div",{className:"user-detail-drawer__badges",children:m.roles.map(x=>d.jsx("span",{className:`pill role-pill role-pill--${x}`,children:Bd[x]??x},x))})]}),d.jsxs("div",{children:[d.jsx("p",{className:"user-meta__label",children:"Created"}),d.jsx("p",{className:"user-meta",children:Hu(m.createdAt)})]}),d.jsxs("div",{children:[d.jsx("p",{className:"user-meta__label",children:"Last login"}),d.jsx("p",{className:"user-meta",children:Hu(m.lastLoginAt)})]})]}),d.jsxs("div",{className:"user-detail-drawer__activity",children:[d.jsx("p",{className:"monitoring-panel__eyebrow",children:"Activity (coming soon)"}),d.jsx("p",{className:"user-meta",children:"Recent actions and audit logs will appear here once wired to the backend."})]})]})]})}const br="https://auth.sfdatahub.com".replace(/\/+$/,"");async function Uf(s){if(s.ok)return s.json();let t="";try{t=(await s.json())?.error??s.statusText}catch{t=s.statusText}throw new Error(`Request failed (${s.status}): ${t}`)}async function K_(s,t){if(!br)throw new Error("AUTH base URL missing (VITE_AUTH_BASE_URL).");if(!s)throw new Error("Feature id is required.");const a=`${br}/admin/access-control/features/${encodeURIComponent(s)}`,r=await fetch(a,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Uf(r)}async function cA(s,t){if(!br)throw new Error("AUTH base URL missing (VITE_AUTH_BASE_URL).");if(!s)throw new Error("Group id is required.");const a=`${br}/admin/access-control/groups/${encodeURIComponent(s)}`,r=await fetch(a,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Uf(r)}async function hA(){if(!br)throw new Error("AUTH base URL missing (VITE_AUTH_BASE_URL).");const s=`${br}/admin/access-control`,t=await fetch(s,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});return Uf(t)}const dA=["public","logged_in","beta","dev_only","hidden"];function rc(s){if(s&&typeof s.toDate=="function"){const t=s.toDate();return t instanceof Date&&!Number.isNaN(t.getTime())?t:null}if(s instanceof Date)return Number.isNaN(s.getTime())?null:s;if(typeof s=="number"){const t=new Date(s);return Number.isNaN(t.getTime())?null:t}if(typeof s=="string"&&s.trim()){const t=new Date(s);return Number.isNaN(t.getTime())?null:t}return null}function fA(s){return typeof s=="string"&&s.trim()?s.trim():"controlPanel"}function mA(s){if(typeof s=="string"&&s.trim()){const t=s.trim().toLowerCase();return dA.includes(t),t}return"hidden"}function kf(s,t="user"){return typeof s=="string"&&s.trim()?s.trim().toLowerCase():t}function Q_(s){if(!Array.isArray(s))return;const t=s.map(a=>kf(a)).filter((a,r,o)=>a&&o.indexOf(a)===r);return t.length?t:void 0}function sf(s){if(!Array.isArray(s))return;const t=s.map(a=>typeof a=="string"?a.trim():"").filter(a=>a.length>0);return t.length?t:void 0}function pA(s,t){return{id:s,route:typeof t.route=="string"&&t.route.trim()?t.route:"/",area:fA(t.area),titleKey:typeof t.titleKey=="string"&&t.titleKey.trim()?t.titleKey:s,status:mA(t.status),minRole:kf(t.minRole),allowedRoles:Q_(t.allowedRoles),allowedGroups:sf(t.allowedGroups),allowedUserIds:sf(t.allowedUserIds),showInTopbar:t.showInTopbar===!0,showInSidebar:t.showInSidebar===!0,navOrder:typeof t.navOrder=="number"?t.navOrder:void 0,isExperimental:t.isExperimental===!0,createdAt:rc(t.createdAt),updatedAt:rc(t.updatedAt),createdBy:typeof t.createdBy=="string"?t.createdBy:void 0,updatedBy:typeof t.updatedBy=="string"?t.updatedBy:void 0}}function gA(s,t){return{id:s,label:typeof t.label=="string"&&t.label.trim()?t.label:s,description:typeof t.description=="string"?t.description:void 0,userIds:sf(t.userIds),minRole:t.minRole?kf(t.minRole):void 0,allowedRoles:Q_(t.allowedRoles),isSystem:t.isSystem===!0,createdAt:rc(t.createdAt),updatedAt:rc(t.updatedAt),createdBy:typeof t.createdBy=="string"?t.createdBy:void 0,updatedBy:typeof t.updatedBy=="string"?t.updatedBy:void 0}}function yA(){const[s,t]=R.useState([]),[a,r]=R.useState([]),[o,c]=R.useState(!0),[m,g]=R.useState(null),{user:y,isLoading:v}=io(),E=R.useCallback(async U=>{c(!0),g(null);try{const B=await hA();if(U?.cancelled)return;const P=(B.features??[]).map(F=>{const ee=typeof F.id=="string"?F.id:"";return ee?pA(ee,F):null}).filter(Boolean),j=(B.groups??[]).map(F=>{const ee=typeof F.id=="string"?F.id:"";return ee?gA(ee,F):null}).filter(Boolean);P.sort((F,ee)=>{const se=F.navOrder??Number.MAX_SAFE_INTEGER,de=ee.navOrder??Number.MAX_SAFE_INTEGER;return se!==de?se-de:F.route.localeCompare(ee.route)}),j.sort((F,ee)=>F.id.localeCompare(ee.id)),t(P),r(j)}catch(B){const P=B instanceof Error?B.message:"Failed to load access data from auth-api.";console.error("[AccessControl] Failed to load access data:",B),U?.cancelled||(g(P),t([]),r([]))}finally{U?.cancelled||c(!1)}},[]);R.useEffect(()=>{const U={cancelled:!1};return v?(g(null),()=>{U.cancelled=!0}):y?(E(U),()=>{U.cancelled=!0}):(t([]),r([]),c(!1),g(null),()=>{U.cancelled=!0})},[v,y,E]);const S=R.useCallback(()=>{if(v||!y){t([]),r([]),c(!1),g(null);return}E()},[v,y,E]),C=R.useCallback(async(U,B)=>{await K_(U,B);const P=B;t(j=>j.map(F=>F.id===U?{...F,...P}:F))},[]);return{features:s,accessGroups:a,isLoading:o,error:m,refresh:S,updateFeature:C}}const yv=[{value:"all",label:"All statuses"},{value:"public",label:"Public"},{value:"logged_in",label:"Logged in"},{value:"beta",label:"Beta"},{value:"dev_only",label:"Dev only"},{value:"hidden",label:"Hidden"}],vA={public:{label:"Public",tone:"status-badge--public"},logged_in:{label:"Logged in",tone:"status-badge--logged-in"},beta:{label:"Beta",tone:"status-badge--beta"},dev_only:{label:"Dev only",tone:"status-badge--dev"},hidden:{label:"Hidden",tone:"status-badge--hidden"}},_A={guest:"Guest",admin:"Admin",owner:"Owner",mod:"Moderator",moderator:"Moderator",developer:"Developer",user:"User"},qu=["guest","user","moderator","developer","admin"];function vv(s){return s.trim().toLowerCase()}function bA(s,t){return t?`${s.route} ${s.titleKey} ${s.area}`.toLowerCase().includes(t):!0}function EA(s,t){return t?`${s.id} ${s.label??""}`.toLowerCase().includes(t):!0}function _v(s,t){return`${s}:${t}`}function Mi(s){return s?_A[s]??s:""}function TA(s){if(!s)return"";const t=Date.now(),a=s.getTime()-t,r=Math.abs(a),o=Math.round(r/6e4),c=Math.round(r/(3600*1e3)),m=Math.round(r/(1440*60*1e3));return o<90?a>=0?`in ${o}m`:`${o}m ago`:c<48?a>=0?`in ${c}h`:`${c}h ago`:m<10?a>=0?`in ${m}d`:`${m}d ago`:s.toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}function Pd(s,t){const a=s??[],r=t??[];return a.length!==r.length?!1:a.every(o=>r.includes(o))}function SA(){const s=vc(),{features:t,accessGroups:a,isLoading:r,error:o,refresh:c,updateFeature:m}=yA(),[g,y]=R.useState(""),[v,E]=R.useState("all"),[S,C]=R.useState(""),[U,B]=R.useState(null),[P,j]=R.useState(null),[F,ee]=R.useState(null),[se,de]=R.useState(!1),[Te,re]=R.useState({}),[I,w]=R.useState(null),[N,O]=R.useState(null),[M,k]=R.useState(null),[x,ge]=R.useState(null),[Be,X]=R.useState(!1),ae=R.useMemo(()=>{const Y=vv(g);return t.filter(Ee=>v!=="all"&&Ee.status!==v?!1:bA(Ee,Y))},[g,t,v]),ue=R.useMemo(()=>{const Y=vv(S);return a.filter(Ee=>EA(Ee,Y))},[a,S]),Ve=R.useMemo(()=>a.map(Y=>({id:Y.id,label:Y.label??Y.id})),[a]),He=Y=>{B(Y),j({...Y}),ee(null)},L=()=>{B(null),j(null),ee(null)},J=(Y,Ee)=>!!Te[_v(Y,Ee)],ie=async(Y,Ee)=>{const st=_v(Y.id,Ee);re(Nt=>({...Nt,[st]:!0})),w(null);try{await m(Y.id,{[Ee]:!Y[Ee]})}catch(Nt){console.error("[AccessFeaturesPage] Failed to update visibility:",Nt);const qa=Nt instanceof Error?Nt.message:"Failed to update visibility flag.";w(qa)}finally{re(Nt=>{const qa={...Nt};return delete qa[st],qa})}},ce=(Y,Ee)=>{if(!P)return;const st=P[Y]??[],Nt=new Set(st);Nt.has(Ee)?Nt.delete(Ee):Nt.add(Ee),j({...P,[Y]:Array.from(Nt)})},_e=R.useMemo(()=>!P||!U?!1:P.status!==U.status||P.minRole!==U.minRole||P.showInSidebar!==U.showInSidebar||P.showInTopbar!==U.showInTopbar||!Pd(P.allowedRoles,U.allowedRoles)||!Pd(P.allowedGroups,U.allowedGroups),[U,P]),Ne=async()=>{if(!(!P||!U)){de(!0),ee(null);try{await K_(U.id,{status:P.status,minRole:P.minRole,allowedRoles:P.allowedRoles,allowedGroups:P.allowedGroups,showInSidebar:P.showInSidebar,showInTopbar:P.showInTopbar}),L()}catch(Y){const Ee=Y instanceof Error?Y.message:"Failed to save feature.";ee(Ee)}finally{de(!1)}}},je=Y=>{O(Y),k({...Y}),ge(null)},mt=()=>{O(null),k(null),ge(null)},tt=Y=>{if(!M)return;const Ee=M.allowedRoles??[],st=new Set(Ee);st.has(Y)?st.delete(Y):st.add(Y),k({...M,allowedRoles:Array.from(st)})},Sn=Y=>{s("/logs",{state:{defaultFilters:{service:"auth-api",level:"all",timeRange:"7d",search:Y.id}}})},kn=R.useMemo(()=>!M||!N?!1:(M.label??"")!==(N.label??"")||(M.description??"")!==(N.description??"")||M.minRole!==N.minRole||!Pd(M.allowedRoles,N.allowedRoles),[N,M]),ca=async()=>{if(!(!M||!N)){X(!0),ge(null);try{await cA(N.id,{label:M.label,description:M.description,minRole:M.minRole,allowedRoles:M.allowedRoles}),mt()}catch(Y){const Ee=Y instanceof Error?Y.message:"Failed to save group.";ge(Ee)}finally{X(!1)}}};return d.jsxs(ua,{title:"Access & Features",description:"View which features and pages are visible for which roles and access groups.",headerContent:d.jsx(Ha,{title:"Access & Features",subtitle:"View which features and pages are visible for which roles and access groups.",hintRight:"Data loaded via auth-api (read/write via backend)"}),children:[d.jsxs("div",{className:"admin-top",children:[d.jsx("p",{className:"admin-top__hint",children:o?"Could not load access data from auth-api.":"Live snapshot from feature_access and access_groups (read via auth-api, write via backend)."}),o&&d.jsxs("p",{className:"admin-top__hint",children:["Debug: ",o]}),d.jsxs("div",{className:"admin-top__actions",children:[r&&d.jsx("span",{className:"admin-top__status",children:"Loading..."}),d.jsx("button",{type:"button",className:"btn secondary",onClick:c,disabled:r,children:"Refresh"})]})]}),I&&d.jsx("div",{className:"error-banner",role:"alert","aria-live":"polite",children:I}),d.jsxs("div",{className:"access-grid",children:[d.jsxs("section",{className:"access-card",children:[d.jsxs("header",{className:"access-card__header",children:[d.jsxs("div",{children:[d.jsx("p",{className:"monitoring-panel__eyebrow",children:"Features"}),d.jsx("h2",{className:"access-card__title",children:"Features & Pages"}),d.jsx("p",{className:"access-card__subtitle",children:"Documents from collection feature_access."})]}),d.jsxs("span",{className:"access-card__count",children:[ae.length," items"]})]}),d.jsxs("div",{className:"admin-filters",children:[d.jsxs("label",{className:"filter-control filter-control--grow",children:[d.jsx("span",{children:"Search by route, title, or area"}),d.jsx("input",{value:g,onChange:Y=>y(Y.target.value),placeholder:"/access, controlPanel, ..."})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Status"}),d.jsx("select",{value:v,onChange:Y=>E(Y.target.value),children:yv.map(Y=>d.jsx("option",{value:Y.value,children:Y.label},Y.value))})]})]}),d.jsx("div",{className:"access-table__wrapper",children:d.jsxs("table",{className:"access-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Status"}),d.jsx("th",{children:"Route"}),d.jsx("th",{children:"Area"}),d.jsx("th",{children:"Title key"}),d.jsx("th",{children:"Min role"}),d.jsx("th",{children:"Roles / Groups"}),d.jsx("th",{children:"Visibility"}),d.jsx("th",{children:"Updated"}),d.jsx("th",{children:"Actions"})]})}),d.jsx("tbody",{children:ae.map(Y=>{const Ee=vA[Y.status]??{label:Y.status,tone:"status-badge--hidden"};return d.jsxs("tr",{children:[d.jsx("td",{children:d.jsx("span",{className:`status-badge ${Ee.tone}`,children:Ee.label})}),d.jsx("td",{className:"access-table__mono",children:Y.route}),d.jsx("td",{children:Y.area}),d.jsx("td",{children:Y.titleKey}),d.jsx("td",{children:d.jsx("span",{className:`pill role-pill role-pill--${Y.minRole}`,children:Mi(Y.minRole)})}),d.jsx("td",{children:d.jsxs("div",{className:"access-table__chips",children:[Y.allowedRoles?.map(st=>d.jsx("span",{className:`pill role-pill role-pill--${st}`,children:Mi(st)},st)),Y.allowedGroups?.map(st=>d.jsx("span",{className:"pill access-pill",children:st},st)),!Y.allowedRoles?.length&&!Y.allowedGroups?.length&&d.jsx("span",{className:"access-table__meta",children:""})]})}),d.jsx("td",{children:d.jsxs("div",{className:"access-table__toggles",children:[d.jsxs("label",{className:"access-toggle",children:[d.jsx("input",{type:"checkbox",checked:Y.showInSidebar,onChange:()=>ie(Y,"showInSidebar"),disabled:J(Y.id,"showInSidebar"),"aria-label":"Show feature in sidebar"}),d.jsx("span",{children:"Sidebar"})]}),d.jsxs("label",{className:"access-toggle",children:[d.jsx("input",{type:"checkbox",checked:Y.showInTopbar,onChange:()=>ie(Y,"showInTopbar"),disabled:J(Y.id,"showInTopbar"),"aria-label":"Show feature in topbar"}),d.jsx("span",{children:"Topbar"})]})]})}),d.jsx("td",{className:"access-table__meta",children:TA(Y.updatedAt??Y.createdAt)}),d.jsx("td",{children:d.jsxs("div",{children:[d.jsx("button",{type:"button",className:"text-link",onClick:()=>Sn(Y),children:"Logs"}),d.jsx("button",{type:"button",className:"text-link",onClick:()=>He(Y),children:"Edit"})]})})]},Y.id)})})]})}),ae.length===0&&!r&&d.jsx("div",{className:"placeholder-card",children:d.jsx("p",{children:"No features match your filters."})})]}),d.jsxs("section",{className:"access-card",children:[d.jsxs("header",{className:"access-card__header",children:[d.jsxs("div",{children:[d.jsx("p",{className:"monitoring-panel__eyebrow",children:"Groups"}),d.jsx("h2",{className:"access-card__title",children:"Access groups"}),d.jsx("p",{className:"access-card__subtitle",children:"Documents from collection access_groups."})]}),d.jsxs("span",{className:"access-card__count",children:[ue.length," items"]})]}),d.jsx("div",{className:"admin-filters",children:d.jsxs("label",{className:"filter-control filter-control--grow",children:[d.jsx("span",{children:"Search by id or label"}),d.jsx("input",{value:S,onChange:Y=>C(Y.target.value),placeholder:"beta_testers, creator_program"})]})}),d.jsx("div",{className:"access-table__wrapper",children:d.jsxs("table",{className:"access-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"ID"}),d.jsx("th",{children:"Label"}),d.jsx("th",{children:"Description"}),d.jsx("th",{children:"Min role"}),d.jsx("th",{children:"Allowed roles"}),d.jsx("th",{children:"User count"}),d.jsx("th",{children:"Flags"}),d.jsx("th",{children:"Actions"})]})}),d.jsx("tbody",{children:ue.map(Y=>d.jsxs("tr",{children:[d.jsx("td",{className:"access-table__mono",children:Y.id}),d.jsx("td",{children:Y.label}),d.jsx("td",{className:"access-table__meta",children:Y.description??""}),d.jsx("td",{children:d.jsx("span",{className:`pill role-pill role-pill--${Y.minRole??"user"}`,children:Mi(Y.minRole??"user")})}),d.jsx("td",{children:d.jsxs("div",{className:"access-table__chips",children:[Y.allowedRoles?.map(Ee=>d.jsx("span",{className:`pill role-pill role-pill--${Ee}`,children:Mi(Ee)},Ee)),!Y.allowedRoles?.length&&d.jsx("span",{className:"access-table__meta",children:""})]})}),d.jsx("td",{children:Y.userIds?.length??0}),d.jsx("td",{children:d.jsx("div",{className:"access-table__flags",children:d.jsx("span",{className:`visibility-flag ${Y.isSystem?"visibility-flag--on":"visibility-flag--off"}`,children:Y.isSystem?"System":"Custom"})})}),d.jsx("td",{children:d.jsx("button",{type:"button",className:"text-link",onClick:()=>je(Y),disabled:Y.isSystem===!0,title:Y.isSystem?"System groups are managed elsewhere":"Edit group",children:"Edit"})})]},Y.id))})]})}),ue.length===0&&!r&&d.jsx("div",{className:"placeholder-card",children:d.jsx("p",{children:"No access groups match your filters."})})]})]}),P&&U&&d.jsx("div",{className:"log-modal",role:"dialog","aria-modal":"true","aria-label":"Edit feature access",children:d.jsxs("div",{className:"log-modal__content access-modal",children:[d.jsxs("header",{className:"log-modal__header",children:[d.jsxs("div",{children:[d.jsx("p",{className:"log-modal__eyebrow",children:"Edit feature"}),d.jsx("h2",{className:"access-modal__title",children:U.titleKey}),d.jsx("p",{className:"access-table__meta",children:U.route})]}),d.jsx("button",{type:"button",className:"text-link",onClick:L,disabled:se,children:"Close"})]}),F&&d.jsxs("div",{className:"error-banner",children:["Failed to save: ",F]}),d.jsxs("div",{className:"access-modal__form",children:[d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Status"}),d.jsx("select",{value:P.status,onChange:Y=>j({...P,status:Y.target.value}),children:yv.filter(Y=>Y.value!=="all").map(Y=>d.jsx("option",{value:Y.value,children:Y.label},Y.value))})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Min role"}),d.jsx("select",{value:P.minRole,onChange:Y=>j({...P,minRole:Y.target.value}),children:qu.map(Y=>d.jsx("option",{value:Y,children:Mi(Y)},Y))})]}),d.jsxs("div",{className:"filter-control",children:[d.jsx("span",{children:"Allowed roles"}),d.jsx("div",{className:"access-modal__chips",children:qu.map(Y=>{const Ee=P.allowedRoles?.includes(Y)??!1;return d.jsx("button",{type:"button",className:`pill role-pill role-pill--${Y} ${Ee?"":"pill--ghost"}`,onClick:()=>ce("allowedRoles",Y),"aria-pressed":Ee,children:Mi(Y)},Y)})})]}),d.jsxs("div",{className:"filter-control",children:[d.jsx("span",{children:"Allowed groups"}),d.jsxs("div",{className:"access-modal__chips",children:[Ve.map(Y=>{const Ee=P.allowedGroups?.includes(Y.id)??!1;return d.jsx("button",{type:"button",className:`pill access-pill ${Ee?"":"pill--ghost"}`,onClick:()=>ce("allowedGroups",Y.id),"aria-pressed":Ee,title:Y.label,children:Y.label},Y.id)}),!Ve.length&&d.jsx("span",{className:"access-table__meta",children:"No groups loaded"})]})]}),d.jsxs("div",{className:"access-modal__toggles",children:[d.jsxs("label",{className:"access-toggle",children:[d.jsx("input",{type:"checkbox",checked:P.showInSidebar,onChange:Y=>j({...P,showInSidebar:Y.target.checked})}),d.jsx("span",{children:"Show in sidebar"})]}),d.jsxs("label",{className:"access-toggle",children:[d.jsx("input",{type:"checkbox",checked:P.showInTopbar,onChange:Y=>j({...P,showInTopbar:Y.target.checked})}),d.jsx("span",{children:"Show in topbar"})]})]})]}),d.jsxs("footer",{className:"access-modal__footer",children:[d.jsx("button",{type:"button",className:"btn secondary",onClick:L,disabled:se,children:"Cancel"}),d.jsx("button",{type:"button",className:"btn",onClick:Ne,disabled:!_e||se,children:se?"Saving...":"Save changes"})]})]})}),M&&N&&d.jsx("div",{className:"log-modal",role:"dialog","aria-modal":"true","aria-label":"Edit access group",children:d.jsxs("div",{className:"log-modal__content access-modal",children:[d.jsxs("header",{className:"log-modal__header",children:[d.jsxs("div",{children:[d.jsx("p",{className:"log-modal__eyebrow",children:"Edit group"}),d.jsx("h2",{className:"access-modal__title",children:N.label}),d.jsx("p",{className:"access-table__meta",children:N.id})]}),d.jsx("button",{type:"button",className:"text-link",onClick:mt,disabled:Be,children:"Close"})]}),x&&d.jsxs("div",{className:"error-banner",children:["Failed to save: ",x]}),d.jsxs("div",{className:"access-modal__form",children:[d.jsxs("label",{className:"filter-control filter-control--grow",children:[d.jsx("span",{children:"Label"}),d.jsx("input",{value:M.label??"",onChange:Y=>k({...M,label:Y.target.value}),placeholder:"Group label"})]}),d.jsxs("label",{className:"filter-control filter-control--grow",children:[d.jsx("span",{children:"Description"}),d.jsx("textarea",{value:M.description??"",onChange:Y=>k({...M,description:Y.target.value}),placeholder:"Short description",rows:3,style:{resize:"vertical"}})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Min role"}),d.jsx("select",{value:M.minRole??"user",onChange:Y=>k({...M,minRole:Y.target.value}),children:qu.map(Y=>d.jsx("option",{value:Y,children:Mi(Y)},Y))})]}),d.jsxs("div",{className:"filter-control",children:[d.jsx("span",{children:"Allowed roles"}),d.jsx("div",{className:"access-modal__chips",children:qu.map(Y=>{const Ee=M.allowedRoles?.includes(Y)??!1;return d.jsx("button",{type:"button",className:`pill role-pill role-pill--${Y} ${Ee?"":"pill--ghost"}`,onClick:()=>tt(Y),"aria-pressed":Ee,children:Mi(Y)},Y)})})]}),d.jsxs("div",{className:"filter-control",children:[d.jsx("span",{children:"Flags"}),d.jsx("div",{className:"access-table__flags",children:d.jsx("span",{className:`visibility-flag ${M.isSystem?"visibility-flag--on":"visibility-flag--off"}`,children:M.isSystem?"System group":"Custom group"})})]})]}),d.jsxs("footer",{className:"access-modal__footer",children:[d.jsx("button",{type:"button",className:"btn secondary",onClick:mt,disabled:Be,children:"Cancel"}),d.jsx("button",{type:"button",className:"btn",onClick:ca,disabled:!kn||Be,children:Be?"Saving...":"Save changes"})]})]})})]})}const AA=["owner","admin","developer","dev"];function bv({title:s,description:t,children:a}){return d.jsx("div",{className:"gate-screen",children:d.jsxs("div",{className:"gate-card",children:[d.jsx("p",{className:"content-shell__eyebrow",children:"SFDataHub"}),d.jsx("h1",{className:"gate-title",children:s}),d.jsx("p",{className:"gate-description",children:t}),d.jsx("div",{className:"gate-actions",children:a})]})})}function xA({children:s}){const{status:t,user:a,isLoading:r,login:o}=io(),c=(a?.roles??[]).some(g=>AA.includes(g.toLowerCase()));return r||t==="idle"||t==="loading"?d.jsx(bv,{title:"Loading Control Panel",description:"Checking your session and permissions",children:d.jsxs("div",{className:"topbar__badge topbar__badge--muted",children:[d.jsx("span",{className:"topbar__spinner","aria-hidden":"true"}),d.jsx("span",{children:"Loading session..."})]})}):t==="authenticated"&&c?s:d.jsx(bv,{title:"Login required",description:"Dieses Control Panel ist nur fuer SFDataHub Owner & Admins. Bitte logge dich ein.",children:d.jsxs("div",{className:"gate-buttons",children:[d.jsx("button",{type:"button",className:"topbar__login topbar__login--discord",onClick:()=>o("discord"),children:"Login Discord"}),d.jsx("button",{type:"button",className:"topbar__login topbar__login--google",onClick:()=>o("google"),children:"Login Google"})]})})}var Ev={};const Y_=function(s){const t=[];let a=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[a++]=o:o<2048?(t[a++]=o>>6|192,t[a++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[a++]=o>>18|240,t[a++]=o>>12&63|128,t[a++]=o>>6&63|128,t[a++]=o&63|128):(t[a++]=o>>12|224,t[a++]=o>>6&63|128,t[a++]=o&63|128)}return t},wA=function(s){const t=[];let a=0,r=0;for(;a<s.length;){const o=s[a++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[a++];t[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[a++],m=s[a++],g=s[a++],y=((o&7)<<18|(c&63)<<12|(m&63)<<6|g&63)-65536;t[r++]=String.fromCharCode(55296+(y>>10)),t[r++]=String.fromCharCode(56320+(y&1023))}else{const c=s[a++],m=s[a++];t[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|m&63)}}return t.join("")},X_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const c=s[o],m=o+1<s.length,g=m?s[o+1]:0,y=o+2<s.length,v=y?s[o+2]:0,E=c>>2,S=(c&3)<<4|g>>4;let C=(g&15)<<2|v>>6,U=v&63;y||(U=64,m||(C=64)),r.push(a[E],a[S],a[C],a[U])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(Y_(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):wA(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const a=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const c=a[s.charAt(o++)],g=o<s.length?a[s.charAt(o)]:0;++o;const v=o<s.length?a[s.charAt(o)]:64;++o;const S=o<s.length?a[s.charAt(o)]:64;if(++o,c==null||g==null||v==null||S==null)throw new NA;const C=c<<2|g>>4;if(r.push(C),v!==64){const U=g<<4&240|v>>2;if(r.push(U),S!==64){const B=v<<6&192|S;r.push(B)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class NA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RA=function(s){const t=Y_(s);return X_.encodeByteArray(t,!0)},lc=function(s){return RA(s).replace(/\./g,"")},CA=function(s){try{return X_.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function jA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const DA=()=>jA().__FIREBASE_DEFAULTS__,IA=()=>{if(typeof process>"u"||typeof Ev>"u")return;const s=Ev.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},MA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&CA(s[1]);return t&&JSON.parse(t)},Bf=()=>{try{return DA()||IA()||MA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},OA=s=>{var t,a;return(a=(t=Bf())===null||t===void 0?void 0:t.emulatorHosts)===null||a===void 0?void 0:a[s]},VA=s=>{const t=OA(s);if(!t)return;const a=t.lastIndexOf(":");if(a<=0||a+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(a+1),10);return t[0]==="["?[t.substring(1,a-1),r]:[t.substring(0,a),r]},Z_=()=>{var s;return(s=Bf())===null||s===void 0?void 0:s.config};class LA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,a)=>{this.resolve=t,this.reject=a})}wrapCallback(t){return(a,r)=>{a?this.reject(a):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(a):t(a,r))}}}function UA(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},s);return[lc(JSON.stringify(a)),lc(JSON.stringify(m)),""].join(".")}function kA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BA(){var s;const t=(s=Bf())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zA(){return!BA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PA(){try{return typeof indexedDB=="object"}catch{return!1}}function HA(){return new Promise((s,t)=>{try{let a=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),a||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{a=!1},o.onerror=()=>{var c;t(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(a){t(a)}})}const FA="FirebaseError";class Dr extends Error{constructor(t,a,r){super(a),this.code=t,this.customData=r,this.name=FA,Object.setPrototypeOf(this,Dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,J_.prototype.create)}}class J_{constructor(t,a,r){this.service=t,this.serviceName=a,this.errors=r}create(t,...a){const r=a[0]||{},o=`${this.service}/${t}`,c=this.errors[t],m=c?qA(c,r):"Error",g=`${this.serviceName}: ${m} (${o}).`;return new Dr(o,g,r)}}function qA(s,t){return s.replace($A,(a,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const $A=/\{\$([^}]+)}/g;function rf(s,t){if(s===t)return!0;const a=Object.keys(s),r=Object.keys(t);for(const o of a){if(!r.includes(o))return!1;const c=s[o],m=t[o];if(Tv(c)&&Tv(m)){if(!rf(c,m))return!1}else if(c!==m)return!1}for(const o of r)if(!a.includes(o))return!1;return!0}function Tv(s){return s!==null&&typeof s=="object"}function oc(s){return s&&s._delegate?s._delegate:s}class Yl{constructor(t,a,r){this.name=t,this.instanceFactory=a,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const gs="[DEFAULT]";class GA{constructor(t,a){this.name=t,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const a=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(a)){const r=new LA;if(this.instancesDeferred.set(a,r),this.isInitialized(a)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:a});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(t){var a;const r=this.normalizeInstanceIdentifier(t?.identifier),o=(a=t?.optional)!==null&&a!==void 0?a:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(QA(t))try{this.getOrInitializeService({instanceIdentifier:gs})}catch{}for(const[a,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(t=gs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...t.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=gs){return this.instances.has(t)}getOptions(t=gs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:a={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:a});for(const[c,m]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);r===g&&m.resolve(o)}return o}onInit(t,a){var r;const o=this.normalizeInstanceIdentifier(a),c=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;c.add(t),this.onInitCallbacks.set(o,c);const m=this.instances.get(o);return m&&t(m,o),()=>{c.delete(t)}}invokeOnInitCallbacks(t,a){const r=this.onInitCallbacks.get(a);if(r)for(const o of r)try{o(t,a)}catch{}}getOrInitializeService({instanceIdentifier:t,options:a={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KA(t),options:a}),this.instances.set(t,r),this.instancesOptions.set(t,a),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=gs){return this.component?this.component.multipleInstances?t:gs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KA(s){return s===gs?void 0:s}function QA(s){return s.instantiationMode==="EAGER"}class YA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const a=this.getProvider(t.name);if(a.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);a.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const a=new GA(t,this);return this.providers.set(t,a),a}getProviders(){return Array.from(this.providers.values())}}var ze;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ze||(ze={}));const XA={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},ZA=ze.INFO,JA={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},WA=(s,t,...a)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=JA[t];if(o)console[o](`[${r}]  ${s.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class W_{constructor(t){this.name=t,this._logLevel=ZA,this._logHandler=WA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ze))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?XA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...t),this._logHandler(this,ze.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...t),this._logHandler(this,ze.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...t),this._logHandler(this,ze.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...t),this._logHandler(this,ze.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...t),this._logHandler(this,ze.ERROR,...t)}}const ex=(s,t)=>t.some(a=>s instanceof a);let Sv,Av;function tx(){return Sv||(Sv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nx(){return Av||(Av=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eb=new WeakMap,lf=new WeakMap,tb=new WeakMap,Hd=new WeakMap,zf=new WeakMap;function ax(s){const t=new Promise((a,r)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",m)},c=()=>{a(Li(s.result)),o()},m=()=>{r(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",m)});return t.then(a=>{a instanceof IDBCursor&&eb.set(a,s)}).catch(()=>{}),zf.set(t,s),t}function ix(s){if(lf.has(s))return;const t=new Promise((a,r)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",m),s.removeEventListener("abort",m)},c=()=>{a(),o()},m=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",m),s.addEventListener("abort",m)});lf.set(s,t)}let of={get(s,t,a){if(s instanceof IDBTransaction){if(t==="done")return lf.get(s);if(t==="objectStoreNames")return s.objectStoreNames||tb.get(s);if(t==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return Li(s[t])},set(s,t,a){return s[t]=a,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function sx(s){of=s(of)}function rx(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...a){const r=s.call(Fd(this),t,...a);return tb.set(r,t.sort?t.sort():[t]),Li(r)}:nx().includes(s)?function(...t){return s.apply(Fd(this),t),Li(eb.get(this))}:function(...t){return Li(s.apply(Fd(this),t))}}function lx(s){return typeof s=="function"?rx(s):(s instanceof IDBTransaction&&ix(s),ex(s,tx())?new Proxy(s,of):s)}function Li(s){if(s instanceof IDBRequest)return ax(s);if(Hd.has(s))return Hd.get(s);const t=lx(s);return t!==s&&(Hd.set(s,t),zf.set(t,s)),t}const Fd=s=>zf.get(s);function ox(s,t,{blocked:a,upgrade:r,blocking:o,terminated:c}={}){const m=indexedDB.open(s,t),g=Li(m);return r&&m.addEventListener("upgradeneeded",y=>{r(Li(m.result),y.oldVersion,y.newVersion,Li(m.transaction),y)}),a&&m.addEventListener("blocked",y=>a(y.oldVersion,y.newVersion,y)),g.then(y=>{c&&y.addEventListener("close",()=>c()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const ux=["get","getKey","getAll","getAllKeys","count"],cx=["put","add","delete","clear"],qd=new Map;function xv(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(qd.get(t))return qd.get(t);const a=t.replace(/FromIndex$/,""),r=t!==a,o=cx.includes(a);if(!(a in(r?IDBIndex:IDBObjectStore).prototype)||!(o||ux.includes(a)))return;const c=async function(m,...g){const y=this.transaction(m,o?"readwrite":"readonly");let v=y.store;return r&&(v=v.index(g.shift())),(await Promise.all([v[a](...g),o&&y.done]))[0]};return qd.set(t,c),c}sx(s=>({...s,get:(t,a,r)=>xv(t,a)||s.get(t,a,r),has:(t,a)=>!!xv(t,a)||s.has(t,a)}));class hx{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(dx(a)){const r=a.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(a=>a).join(" ")}}function dx(s){const t=s.getComponent();return t?.type==="VERSION"}const uf="@firebase/app",wv="0.10.13";const Ba=new W_("@firebase/app"),fx="@firebase/app-compat",mx="@firebase/analytics-compat",px="@firebase/analytics",gx="@firebase/app-check-compat",yx="@firebase/app-check",vx="@firebase/auth",_x="@firebase/auth-compat",bx="@firebase/database",Ex="@firebase/data-connect",Tx="@firebase/database-compat",Sx="@firebase/functions",Ax="@firebase/functions-compat",xx="@firebase/installations",wx="@firebase/installations-compat",Nx="@firebase/messaging",Rx="@firebase/messaging-compat",Cx="@firebase/performance",jx="@firebase/performance-compat",Dx="@firebase/remote-config",Ix="@firebase/remote-config-compat",Mx="@firebase/storage",Ox="@firebase/storage-compat",Vx="@firebase/firestore",Lx="@firebase/vertexai-preview",Ux="@firebase/firestore-compat",kx="firebase",Bx="10.14.1";const cf="[DEFAULT]",zx={[uf]:"fire-core",[fx]:"fire-core-compat",[px]:"fire-analytics",[mx]:"fire-analytics-compat",[yx]:"fire-app-check",[gx]:"fire-app-check-compat",[vx]:"fire-auth",[_x]:"fire-auth-compat",[bx]:"fire-rtdb",[Ex]:"fire-data-connect",[Tx]:"fire-rtdb-compat",[Sx]:"fire-fn",[Ax]:"fire-fn-compat",[xx]:"fire-iid",[wx]:"fire-iid-compat",[Nx]:"fire-fcm",[Rx]:"fire-fcm-compat",[Cx]:"fire-perf",[jx]:"fire-perf-compat",[Dx]:"fire-rc",[Ix]:"fire-rc-compat",[Mx]:"fire-gcs",[Ox]:"fire-gcs-compat",[Vx]:"fire-fst",[Ux]:"fire-fst-compat",[Lx]:"fire-vertex","fire-js":"fire-js",[kx]:"fire-js-all"};const uc=new Map,Px=new Map,hf=new Map;function Nv(s,t){try{s.container.addComponent(t)}catch(a){Ba.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,a)}}function cc(s){const t=s.name;if(hf.has(t))return Ba.debug(`There were multiple attempts to register component ${t}.`),!1;hf.set(t,s);for(const a of uc.values())Nv(a,s);for(const a of Px.values())Nv(a,s);return!0}function Hx(s,t){const a=s.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),s.container.getProvider(t)}const Fx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ui=new J_("app","Firebase",Fx);class qx{constructor(t,a,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},a),this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}}const $x=Bx;function nb(s,t={}){let a=s;typeof t!="object"&&(t={name:t});const r=Object.assign({name:cf,automaticDataCollectionEnabled:!1},t),o=r.name;if(typeof o!="string"||!o)throw Ui.create("bad-app-name",{appName:String(o)});if(a||(a=Z_()),!a)throw Ui.create("no-options");const c=uc.get(o);if(c){if(rf(a,c.options)&&rf(r,c.config))return c;throw Ui.create("duplicate-app",{appName:o})}const m=new YA(o);for(const y of hf.values())m.addComponent(y);const g=new qx(a,r,m);return uc.set(o,g),g}function Gx(s=cf){const t=uc.get(s);if(!t&&s===cf&&Z_())return nb();if(!t)throw Ui.create("no-app",{appName:s});return t}function pr(s,t,a){var r;let o=(r=zx[s])!==null&&r!==void 0?r:s;a&&(o+=`-${a}`);const c=o.match(/\s|\//),m=t.match(/\s|\//);if(c||m){const g=[`Unable to register library "${o}" with version "${t}":`];c&&g.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&m&&g.push("and"),m&&g.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ba.warn(g.join(" "));return}cc(new Yl(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}const Kx="firebase-heartbeat-database",Qx=1,Xl="firebase-heartbeat-store";let $d=null;function ab(){return $d||($d=ox(Kx,Qx,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Xl)}catch(a){console.warn(a)}}}}).catch(s=>{throw Ui.create("idb-open",{originalErrorMessage:s.message})})),$d}async function Yx(s){try{const a=(await ab()).transaction(Xl),r=await a.objectStore(Xl).get(ib(s));return await a.done,r}catch(t){if(t instanceof Dr)Ba.warn(t.message);else{const a=Ui.create("idb-get",{originalErrorMessage:t?.message});Ba.warn(a.message)}}}async function Rv(s,t){try{const r=(await ab()).transaction(Xl,"readwrite");await r.objectStore(Xl).put(t,ib(s)),await r.done}catch(a){if(a instanceof Dr)Ba.warn(a.message);else{const r=Ui.create("idb-set",{originalErrorMessage:a?.message});Ba.warn(r.message)}}}function ib(s){return`${s.name}!${s.options.appId}`}const Xx=1024,Zx=720*60*60*1e3;class Jx{constructor(t){this.container=t,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new ew(a),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,a;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Cv();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((a=this._heartbeatsCache)===null||a===void 0?void 0:a.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(m=>m.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(m=>{const g=new Date(m.date).valueOf();return Date.now()-g<=Zx}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ba.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const a=Cv(),{heartbeatsToSend:r,unsentEntries:o}=Wx(this._heartbeatsCache.heartbeats),c=lc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=a,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(a){return Ba.warn(a),""}}}function Cv(){return new Date().toISOString().substring(0,10)}function Wx(s,t=Xx){const a=[];let r=s.slice();for(const o of s){const c=a.find(m=>m.agent===o.agent);if(c){if(c.dates.push(o.date),jv(a)>t){c.dates.pop();break}}else if(a.push({agent:o.agent,dates:[o.date]}),jv(a)>t){a.pop();break}r=r.slice(1)}return{heartbeatsToSend:a,unsentEntries:r}}class ew{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PA()?HA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const a=await Yx(this.app);return a?.heartbeats?a:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var a;if(await this._canUseIndexedDBPromise){const o=await this.read();return Rv(this.app,{lastSentHeartbeatDate:(a=t.lastSentHeartbeatDate)!==null&&a!==void 0?a:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var a;if(await this._canUseIndexedDBPromise){const o=await this.read();return Rv(this.app,{lastSentHeartbeatDate:(a=t.lastSentHeartbeatDate)!==null&&a!==void 0?a:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function jv(s){return lc(JSON.stringify({version:2,heartbeats:s})).length}function tw(s){cc(new Yl("platform-logger",t=>new hx(t),"PRIVATE")),cc(new Yl("heartbeat",t=>new Jx(t),"PRIVATE")),pr(uf,wv,s),pr(uf,wv,"esm2017"),pr("fire-js","")}tw("");var Dv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _s,sb;(function(){var s;function t(I,w){function N(){}N.prototype=w.prototype,I.D=w.prototype,I.prototype=new N,I.prototype.constructor=I,I.C=function(O,M,k){for(var x=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)x[ge-2]=arguments[ge];return w.prototype[M].apply(O,x)}}function a(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,a),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,w,N){N||(N=0);var O=Array(16);if(typeof w=="string")for(var M=0;16>M;++M)O[M]=w.charCodeAt(N++)|w.charCodeAt(N++)<<8|w.charCodeAt(N++)<<16|w.charCodeAt(N++)<<24;else for(M=0;16>M;++M)O[M]=w[N++]|w[N++]<<8|w[N++]<<16|w[N++]<<24;w=I.g[0],N=I.g[1],M=I.g[2];var k=I.g[3],x=w+(k^N&(M^k))+O[0]+3614090360&4294967295;w=N+(x<<7&4294967295|x>>>25),x=k+(M^w&(N^M))+O[1]+3905402710&4294967295,k=w+(x<<12&4294967295|x>>>20),x=M+(N^k&(w^N))+O[2]+606105819&4294967295,M=k+(x<<17&4294967295|x>>>15),x=N+(w^M&(k^w))+O[3]+3250441966&4294967295,N=M+(x<<22&4294967295|x>>>10),x=w+(k^N&(M^k))+O[4]+4118548399&4294967295,w=N+(x<<7&4294967295|x>>>25),x=k+(M^w&(N^M))+O[5]+1200080426&4294967295,k=w+(x<<12&4294967295|x>>>20),x=M+(N^k&(w^N))+O[6]+2821735955&4294967295,M=k+(x<<17&4294967295|x>>>15),x=N+(w^M&(k^w))+O[7]+4249261313&4294967295,N=M+(x<<22&4294967295|x>>>10),x=w+(k^N&(M^k))+O[8]+1770035416&4294967295,w=N+(x<<7&4294967295|x>>>25),x=k+(M^w&(N^M))+O[9]+2336552879&4294967295,k=w+(x<<12&4294967295|x>>>20),x=M+(N^k&(w^N))+O[10]+4294925233&4294967295,M=k+(x<<17&4294967295|x>>>15),x=N+(w^M&(k^w))+O[11]+2304563134&4294967295,N=M+(x<<22&4294967295|x>>>10),x=w+(k^N&(M^k))+O[12]+1804603682&4294967295,w=N+(x<<7&4294967295|x>>>25),x=k+(M^w&(N^M))+O[13]+4254626195&4294967295,k=w+(x<<12&4294967295|x>>>20),x=M+(N^k&(w^N))+O[14]+2792965006&4294967295,M=k+(x<<17&4294967295|x>>>15),x=N+(w^M&(k^w))+O[15]+1236535329&4294967295,N=M+(x<<22&4294967295|x>>>10),x=w+(M^k&(N^M))+O[1]+4129170786&4294967295,w=N+(x<<5&4294967295|x>>>27),x=k+(N^M&(w^N))+O[6]+3225465664&4294967295,k=w+(x<<9&4294967295|x>>>23),x=M+(w^N&(k^w))+O[11]+643717713&4294967295,M=k+(x<<14&4294967295|x>>>18),x=N+(k^w&(M^k))+O[0]+3921069994&4294967295,N=M+(x<<20&4294967295|x>>>12),x=w+(M^k&(N^M))+O[5]+3593408605&4294967295,w=N+(x<<5&4294967295|x>>>27),x=k+(N^M&(w^N))+O[10]+38016083&4294967295,k=w+(x<<9&4294967295|x>>>23),x=M+(w^N&(k^w))+O[15]+3634488961&4294967295,M=k+(x<<14&4294967295|x>>>18),x=N+(k^w&(M^k))+O[4]+3889429448&4294967295,N=M+(x<<20&4294967295|x>>>12),x=w+(M^k&(N^M))+O[9]+568446438&4294967295,w=N+(x<<5&4294967295|x>>>27),x=k+(N^M&(w^N))+O[14]+3275163606&4294967295,k=w+(x<<9&4294967295|x>>>23),x=M+(w^N&(k^w))+O[3]+4107603335&4294967295,M=k+(x<<14&4294967295|x>>>18),x=N+(k^w&(M^k))+O[8]+1163531501&4294967295,N=M+(x<<20&4294967295|x>>>12),x=w+(M^k&(N^M))+O[13]+2850285829&4294967295,w=N+(x<<5&4294967295|x>>>27),x=k+(N^M&(w^N))+O[2]+4243563512&4294967295,k=w+(x<<9&4294967295|x>>>23),x=M+(w^N&(k^w))+O[7]+1735328473&4294967295,M=k+(x<<14&4294967295|x>>>18),x=N+(k^w&(M^k))+O[12]+2368359562&4294967295,N=M+(x<<20&4294967295|x>>>12),x=w+(N^M^k)+O[5]+4294588738&4294967295,w=N+(x<<4&4294967295|x>>>28),x=k+(w^N^M)+O[8]+2272392833&4294967295,k=w+(x<<11&4294967295|x>>>21),x=M+(k^w^N)+O[11]+1839030562&4294967295,M=k+(x<<16&4294967295|x>>>16),x=N+(M^k^w)+O[14]+4259657740&4294967295,N=M+(x<<23&4294967295|x>>>9),x=w+(N^M^k)+O[1]+2763975236&4294967295,w=N+(x<<4&4294967295|x>>>28),x=k+(w^N^M)+O[4]+1272893353&4294967295,k=w+(x<<11&4294967295|x>>>21),x=M+(k^w^N)+O[7]+4139469664&4294967295,M=k+(x<<16&4294967295|x>>>16),x=N+(M^k^w)+O[10]+3200236656&4294967295,N=M+(x<<23&4294967295|x>>>9),x=w+(N^M^k)+O[13]+681279174&4294967295,w=N+(x<<4&4294967295|x>>>28),x=k+(w^N^M)+O[0]+3936430074&4294967295,k=w+(x<<11&4294967295|x>>>21),x=M+(k^w^N)+O[3]+3572445317&4294967295,M=k+(x<<16&4294967295|x>>>16),x=N+(M^k^w)+O[6]+76029189&4294967295,N=M+(x<<23&4294967295|x>>>9),x=w+(N^M^k)+O[9]+3654602809&4294967295,w=N+(x<<4&4294967295|x>>>28),x=k+(w^N^M)+O[12]+3873151461&4294967295,k=w+(x<<11&4294967295|x>>>21),x=M+(k^w^N)+O[15]+530742520&4294967295,M=k+(x<<16&4294967295|x>>>16),x=N+(M^k^w)+O[2]+3299628645&4294967295,N=M+(x<<23&4294967295|x>>>9),x=w+(M^(N|~k))+O[0]+4096336452&4294967295,w=N+(x<<6&4294967295|x>>>26),x=k+(N^(w|~M))+O[7]+1126891415&4294967295,k=w+(x<<10&4294967295|x>>>22),x=M+(w^(k|~N))+O[14]+2878612391&4294967295,M=k+(x<<15&4294967295|x>>>17),x=N+(k^(M|~w))+O[5]+4237533241&4294967295,N=M+(x<<21&4294967295|x>>>11),x=w+(M^(N|~k))+O[12]+1700485571&4294967295,w=N+(x<<6&4294967295|x>>>26),x=k+(N^(w|~M))+O[3]+2399980690&4294967295,k=w+(x<<10&4294967295|x>>>22),x=M+(w^(k|~N))+O[10]+4293915773&4294967295,M=k+(x<<15&4294967295|x>>>17),x=N+(k^(M|~w))+O[1]+2240044497&4294967295,N=M+(x<<21&4294967295|x>>>11),x=w+(M^(N|~k))+O[8]+1873313359&4294967295,w=N+(x<<6&4294967295|x>>>26),x=k+(N^(w|~M))+O[15]+4264355552&4294967295,k=w+(x<<10&4294967295|x>>>22),x=M+(w^(k|~N))+O[6]+2734768916&4294967295,M=k+(x<<15&4294967295|x>>>17),x=N+(k^(M|~w))+O[13]+1309151649&4294967295,N=M+(x<<21&4294967295|x>>>11),x=w+(M^(N|~k))+O[4]+4149444226&4294967295,w=N+(x<<6&4294967295|x>>>26),x=k+(N^(w|~M))+O[11]+3174756917&4294967295,k=w+(x<<10&4294967295|x>>>22),x=M+(w^(k|~N))+O[2]+718787259&4294967295,M=k+(x<<15&4294967295|x>>>17),x=N+(k^(M|~w))+O[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(M+(x<<21&4294967295|x>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+k&4294967295}r.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var N=w-this.blockSize,O=this.B,M=this.h,k=0;k<w;){if(M==0)for(;k<=N;)o(this,I,k),k+=this.blockSize;if(typeof I=="string"){for(;k<w;)if(O[M++]=I.charCodeAt(k++),M==this.blockSize){o(this,O),M=0;break}}else for(;k<w;)if(O[M++]=I[k++],M==this.blockSize){o(this,O),M=0;break}}this.h=M,this.o+=w},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var N=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=N&255,N/=256;for(this.u(I),I=Array(16),w=N=0;4>w;++w)for(var O=0;32>O;O+=8)I[N++]=this.g[w]>>>O&255;return I};function c(I,w){var N=g;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=w(I)}function m(I,w){this.h=w;for(var N=[],O=!0,M=I.length-1;0<=M;M--){var k=I[M]|0;O&&k==w||(N[M]=k,O=!1)}this.g=N}var g={};function y(I){return-128<=I&&128>I?c(I,function(w){return new m([w|0],0>w?-1:0)}):new m([I|0],0>I?-1:0)}function v(I){if(isNaN(I)||!isFinite(I))return S;if(0>I)return j(v(-I));for(var w=[],N=1,O=0;I>=N;O++)w[O]=I/N|0,N*=4294967296;return new m(w,0)}function E(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return j(E(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=v(Math.pow(w,8)),O=S,M=0;M<I.length;M+=8){var k=Math.min(8,I.length-M),x=parseInt(I.substring(M,M+k),w);8>k?(k=v(Math.pow(w,k)),O=O.j(k).add(v(x))):(O=O.j(N),O=O.add(v(x)))}return O}var S=y(0),C=y(1),U=y(16777216);s=m.prototype,s.m=function(){if(P(this))return-j(this).m();for(var I=0,w=1,N=0;N<this.g.length;N++){var O=this.i(N);I+=(0<=O?O:4294967296+O)*w,w*=4294967296}return I},s.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(B(this))return"0";if(P(this))return"-"+j(this).toString(I);for(var w=v(Math.pow(I,6)),N=this,O="";;){var M=de(N,w).g;N=F(N,M.j(w));var k=((0<N.g.length?N.g[0]:N.h)>>>0).toString(I);if(N=M,B(N))return k+O;for(;6>k.length;)k="0"+k;O=k+O}},s.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function B(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function P(I){return I.h==-1}s.l=function(I){return I=F(this,I),P(I)?-1:B(I)?0:1};function j(I){for(var w=I.g.length,N=[],O=0;O<w;O++)N[O]=~I.g[O];return new m(N,~I.h).add(C)}s.abs=function(){return P(this)?j(this):this},s.add=function(I){for(var w=Math.max(this.g.length,I.g.length),N=[],O=0,M=0;M<=w;M++){var k=O+(this.i(M)&65535)+(I.i(M)&65535),x=(k>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);O=x>>>16,k&=65535,x&=65535,N[M]=x<<16|k}return new m(N,N[N.length-1]&-2147483648?-1:0)};function F(I,w){return I.add(j(w))}s.j=function(I){if(B(this)||B(I))return S;if(P(this))return P(I)?j(this).j(j(I)):j(j(this).j(I));if(P(I))return j(this.j(j(I)));if(0>this.l(U)&&0>I.l(U))return v(this.m()*I.m());for(var w=this.g.length+I.g.length,N=[],O=0;O<2*w;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<I.g.length;M++){var k=this.i(O)>>>16,x=this.i(O)&65535,ge=I.i(M)>>>16,Be=I.i(M)&65535;N[2*O+2*M]+=x*Be,ee(N,2*O+2*M),N[2*O+2*M+1]+=k*Be,ee(N,2*O+2*M+1),N[2*O+2*M+1]+=x*ge,ee(N,2*O+2*M+1),N[2*O+2*M+2]+=k*ge,ee(N,2*O+2*M+2)}for(O=0;O<w;O++)N[O]=N[2*O+1]<<16|N[2*O];for(O=w;O<2*w;O++)N[O]=0;return new m(N,0)};function ee(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function se(I,w){this.g=I,this.h=w}function de(I,w){if(B(w))throw Error("division by zero");if(B(I))return new se(S,S);if(P(I))return w=de(j(I),w),new se(j(w.g),j(w.h));if(P(w))return w=de(I,j(w)),new se(j(w.g),w.h);if(30<I.g.length){if(P(I)||P(w))throw Error("slowDivide_ only works with positive integers.");for(var N=C,O=w;0>=O.l(I);)N=Te(N),O=Te(O);var M=re(N,1),k=re(O,1);for(O=re(O,2),N=re(N,2);!B(O);){var x=k.add(O);0>=x.l(I)&&(M=M.add(N),k=x),O=re(O,1),N=re(N,1)}return w=F(I,M.j(w)),new se(M,w)}for(M=S;0<=I.l(w);){for(N=Math.max(1,Math.floor(I.m()/w.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),k=v(N),x=k.j(w);P(x)||0<x.l(I);)N-=O,k=v(N),x=k.j(w);B(k)&&(k=C),M=M.add(k),I=F(I,x)}return new se(M,I)}s.A=function(I){return de(this,I).h},s.and=function(I){for(var w=Math.max(this.g.length,I.g.length),N=[],O=0;O<w;O++)N[O]=this.i(O)&I.i(O);return new m(N,this.h&I.h)},s.or=function(I){for(var w=Math.max(this.g.length,I.g.length),N=[],O=0;O<w;O++)N[O]=this.i(O)|I.i(O);return new m(N,this.h|I.h)},s.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),N=[],O=0;O<w;O++)N[O]=this.i(O)^I.i(O);return new m(N,this.h^I.h)};function Te(I){for(var w=I.g.length+1,N=[],O=0;O<w;O++)N[O]=I.i(O)<<1|I.i(O-1)>>>31;return new m(N,I.h)}function re(I,w){var N=w>>5;w%=32;for(var O=I.g.length-N,M=[],k=0;k<O;k++)M[k]=0<w?I.i(k+N)>>>w|I.i(k+N+1)<<32-w:I.i(k+N);return new m(M,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sb=r,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.A,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=v,m.fromString=E,_s=m}).apply(typeof Dv<"u"?Dv:typeof self<"u"?self:typeof window<"u"?window:{});var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var rb,Pl,lb,Wu,df,ob,ub,cb;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,b){return u==Array.prototype||u==Object.prototype||(u[p]=b.value),u};function a(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof $u=="object"&&$u];for(var p=0;p<u.length;++p){var b=u[p];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=a(this);function o(u,p){if(p)e:{var b=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var H=u[A];if(!(H in b))break e;b=b[H]}u=u[u.length-1],A=b[u],p=p(A),p!=A&&p!=null&&t(b,u,{configurable:!0,writable:!0,value:p})}}function c(u,p){u instanceof String&&(u+="");var b=0,A=!1,H={next:function(){if(!A&&b<u.length){var Q=b++;return{value:p(Q,u[Q]),done:!1}}return A=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}o("Array.prototype.values",function(u){return u||function(){return c(this,function(p,b){return b})}});var m=m||{},g=this||self;function y(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function v(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function E(u,p,b){return u.call.apply(u.bind,arguments)}function S(u,p,b){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,A),u.apply(p,H)}}return function(){return u.apply(p,arguments)}}function C(u,p,b){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:S,C.apply(null,arguments)}function U(u,p){var b=Array.prototype.slice.call(arguments,1);return function(){var A=b.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function B(u,p){function b(){}b.prototype=p.prototype,u.aa=p.prototype,u.prototype=new b,u.prototype.constructor=u,u.Qb=function(A,H,Q){for(var oe=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)oe[Qe-2]=arguments[Qe];return p.prototype[H].apply(A,oe)}}function P(u){const p=u.length;if(0<p){const b=Array(p);for(let A=0;A<p;A++)b[A]=u[A];return b}return[]}function j(u,p){for(let b=1;b<arguments.length;b++){const A=arguments[b];if(y(A)){const H=u.length||0,Q=A.length||0;u.length=H+Q;for(let oe=0;oe<Q;oe++)u[H+oe]=A[oe]}else u.push(A)}}class F{constructor(p,b){this.i=p,this.j=b,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ee(u){return/^[\s\xa0]*$/.test(u)}function se(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function de(u){return de[" "](u),u}de[" "]=function(){};var Te=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function re(u,p,b){for(const A in u)p.call(b,u[A],A,u)}function I(u,p){for(const b in u)p.call(void 0,u[b],b,u)}function w(u){const p={};for(const b in u)p[b]=u[b];return p}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,p){let b,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(b in A)u[b]=A[b];for(let Q=0;Q<N.length;Q++)b=N[Q],Object.prototype.hasOwnProperty.call(A,b)&&(u[b]=A[b])}}function M(u){var p=1;u=u.split(":");const b=[];for(;0<p&&u.length;)b.push(u.shift()),p--;return u.length&&b.push(u.join(":")),b}function k(u){g.setTimeout(()=>{throw u},0)}function x(){var u=Ve;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class ge{constructor(){this.h=this.g=null}add(p,b){const A=Be.get();A.set(p,b),this.h?this.h.next=A:this.g=A,this.h=A}}var Be=new F(()=>new X,u=>u.reset());class X{constructor(){this.next=this.g=this.h=null}set(p,b){this.h=p,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ue=!1,Ve=new ge,He=()=>{const u=g.Promise.resolve(void 0);ae=()=>{u.then(L)}};var L=()=>{for(var u;u=x();){try{u.h.call(u.g)}catch(b){k(b)}var p=Be;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}ue=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ce=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};g.addEventListener("test",b,p),g.removeEventListener("test",b,p)}catch{}return u})();function _e(u,p){if(ie.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var b=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(Te){e:{try{de(p.nodeName);var H=!0;break e}catch{}H=!1}H||(p=null)}}else b=="mouseover"?p=u.fromElement:b=="mouseout"&&(p=u.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ne[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&_e.aa.h.call(this)}}B(_e,ie);var Ne={2:"touch",3:"pen",4:"mouse"};_e.prototype.h=function(){_e.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),mt=0;function tt(u,p,b,A,H){this.listener=u,this.proxy=null,this.src=p,this.type=b,this.capture=!!A,this.ha=H,this.key=++mt,this.da=this.fa=!1}function Sn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function kn(u){this.src=u,this.g={},this.h=0}kn.prototype.add=function(u,p,b,A,H){var Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);var oe=Y(u,p,A,H);return-1<oe?(p=u[oe],b||(p.fa=!1)):(p=new tt(p,this.src,Q,!!A,H),p.fa=b,u.push(p)),p};function ca(u,p){var b=p.type;if(b in u.g){var A=u.g[b],H=Array.prototype.indexOf.call(A,p,void 0),Q;(Q=0<=H)&&Array.prototype.splice.call(A,H,1),Q&&(Sn(p),u.g[b].length==0&&(delete u.g[b],u.h--))}}function Y(u,p,b,A){for(var H=0;H<u.length;++H){var Q=u[H];if(!Q.da&&Q.listener==p&&Q.capture==!!b&&Q.ha==A)return H}return-1}var Ee="closure_lm_"+(1e6*Math.random()|0),st={};function Nt(u,p,b,A,H){if(Array.isArray(p)){for(var Q=0;Q<p.length;Q++)Nt(u,p[Q],b,A,H);return null}return b=ho(b),u&&u[je]?u.K(p,b,v(A)?!!A.capture:!1,H):qa(u,p,b,!1,A,H)}function qa(u,p,b,A,H,Q){if(!p)throw Error("Invalid event type");var oe=v(H)?!!H.capture:!!H,Qe=Lr(u);if(Qe||(u[Ee]=Qe=new kn(u)),b=Qe.add(p,b,A,oe,Q),b.proxy)return b;if(A=co(),b.proxy=A,A.src=u,A.listener=b,u.addEventListener)ce||(H=oe),H===void 0&&(H=!1),u.addEventListener(p.toString(),A,H);else if(u.attachEvent)u.attachEvent(ws(p.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return b}function co(){function u(b){return p.call(u.src,u.listener,b)}const p=Cc;return u}function xs(u,p,b,A,H){if(Array.isArray(p))for(var Q=0;Q<p.length;Q++)xs(u,p[Q],b,A,H);else A=v(A)?!!A.capture:!!A,b=ho(b),u&&u[je]?(u=u.i,p=String(p).toString(),p in u.g&&(Q=u.g[p],b=Y(Q,b,A,H),-1<b&&(Sn(Q[b]),Array.prototype.splice.call(Q,b,1),Q.length==0&&(delete u.g[p],u.h--)))):u&&(u=Lr(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Y(p,b,A,H)),(b=-1<u?p[u]:null)&&Hi(b))}function Hi(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[je])ca(p.i,u);else{var b=u.type,A=u.proxy;p.removeEventListener?p.removeEventListener(b,A,u.capture):p.detachEvent?p.detachEvent(ws(b),A):p.addListener&&p.removeListener&&p.removeListener(A),(b=Lr(p))?(ca(b,u),b.h==0&&(b.src=null,p[Ee]=null)):Sn(u)}}}function ws(u){return u in st?st[u]:st[u]="on"+u}function Cc(u,p){if(u.da)u=!0;else{p=new _e(p,this);var b=u.listener,A=u.ha||u.src;u.fa&&Hi(u),u=b.call(A,p)}return u}function Lr(u){return u=u[Ee],u instanceof kn?u:null}var Ut="__closure_events_fn_"+(1e9*Math.random()>>>0);function ho(u){return typeof u=="function"?u:(u[Ut]||(u[Ut]=function(p){return u.handleEvent(p)}),u[Ut])}function Rt(){J.call(this),this.i=new kn(this),this.M=this,this.F=null}B(Rt,J),Rt.prototype[je]=!0,Rt.prototype.removeEventListener=function(u,p,b,A){xs(this,u,p,b,A)};function Dt(u,p){var b,A=u.F;if(A)for(b=[];A;A=A.F)b.push(A);if(u=u.M,A=p.type||p,typeof p=="string")p=new ie(p,u);else if(p instanceof ie)p.target=p.target||u;else{var H=p;p=new ie(A,u),O(p,H)}if(H=!0,b)for(var Q=b.length-1;0<=Q;Q--){var oe=p.g=b[Q];H=ha(oe,A,!0,p)&&H}if(oe=p.g=u,H=ha(oe,A,!0,p)&&H,H=ha(oe,A,!1,p)&&H,b)for(Q=0;Q<b.length;Q++)oe=p.g=b[Q],H=ha(oe,A,!1,p)&&H}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var b=u.g[p],A=0;A<b.length;A++)Sn(b[A]);delete u.g[p],u.h--}}this.F=null},Rt.prototype.K=function(u,p,b,A){return this.i.add(String(u),p,!1,b,A)},Rt.prototype.L=function(u,p,b,A){return this.i.add(String(u),p,!0,b,A)};function ha(u,p,b,A){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var H=!0,Q=0;Q<p.length;++Q){var oe=p[Q];if(oe&&!oe.da&&oe.capture==b){var Qe=oe.listener,bt=oe.ha||oe.src;oe.fa&&ca(u.i,oe),H=Qe.call(bt,A)!==!1&&H}}return H&&!A.defaultPrevented}function fo(u,p,b){if(typeof u=="function")b&&(u=C(u,b));else if(u&&typeof u.handleEvent=="function")u=C(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:g.setTimeout(u,p||0)}function Ur(u){u.g=fo(()=>{u.g=null,u.i&&(u.i=!1,Ur(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class jc extends J{constructor(p,b){super(),this.m=p,this.l=b,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Ur(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(u){J.call(this),this.h=u,this.g={}}B(Fi,J);var $a=[];function Kt(u){re(u.g,function(p,b){this.g.hasOwnProperty(b)&&Hi(p)},u),u.g={}}Fi.prototype.N=function(){Fi.aa.N.call(this),Kt(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var An=g.JSON.stringify,en=g.JSON.parse,Dc=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function kr(){}kr.prototype.h=null;function mo(u){return u.h||(u.h=u.i())}function qi(){}var Kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ga(){ie.call(this,"d")}B(Ga,ie);function Bn(){ie.call(this,"c")}B(Bn,ie);var xn={},Ka=null;function Ns(){return Ka=Ka||new Rt}xn.La="serverreachability";function Br(u){ie.call(this,xn.La,u)}B(Br,ie);function da(u){const p=Ns();Dt(p,new Br(p))}xn.STAT_EVENT="statevent";function Qa(u,p){ie.call(this,xn.STAT_EVENT,u),this.stat=p}B(Qa,ie);function kt(u){const p=Ns();Dt(p,new Qa(p,u))}xn.Ma="timingevent";function zr(u,p){ie.call(this,xn.Ma,u),this.size=p}B(zr,ie);function Ya(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},p)}function Xa(){this.g=!0}Xa.prototype.xa=function(){this.g=!1};function Pr(u,p,b,A,H,Q){u.info(function(){if(u.g)if(Q)for(var oe="",Qe=Q.split("&"),bt=0;bt<Qe.length;bt++){var Ce=Qe[bt].split("=");if(1<Ce.length){var Mt=Ce[0];Ce=Ce[1];var Ot=Mt.split("_");oe=2<=Ot.length&&Ot[1]=="type"?oe+(Mt+"="+Ce+"&"):oe+(Mt+"=redacted&")}}else oe=null;else oe=Q;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+p+`
`+b+`
`+oe})}function Hr(u,p,b,A,H,Q,oe){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+p+`
`+b+`
`+Q+" "+oe})}function fa(u,p,b,A){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Qn(u,b)+(A?" "+A:"")})}function po(u,p){u.info(function(){return"TIMEOUT: "+p})}Xa.prototype.info=function(){};function Qn(u,p){if(!u.g)return p;if(!p)return null;try{var b=JSON.parse(p);if(b){for(u=0;u<b.length;u++)if(Array.isArray(b[u])){var A=b[u];if(!(2>A.length)){var H=A[1];if(Array.isArray(H)&&!(1>H.length)){var Q=H[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var oe=1;oe<H.length;oe++)H[oe]=""}}}}return An(b)}catch{return p}}var ut={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yn;function Za(){}B(Za,kr),Za.prototype.g=function(){return new XMLHttpRequest},Za.prototype.i=function(){return{}},Yn=new Za;function Xn(u,p,b,A){this.j=u,this.i=p,this.l=b,this.R=A||1,this.U=new Fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new go}function go(){this.i=null,this.g="",this.h=!1}var Fr={},ma={};function $i(u,p,b){u.L=1,u.v=Qi(ct(p)),u.m=b,u.P=!0,pa(u,null)}function pa(u,p){u.F=Date.now(),zn(u),u.A=ct(u.v);var b=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),va(b.i,"t",A),u.C=0,b=u.j.J,u.h=new go,u.g=Io(u.j,b?p:null,!u.m),0<u.O&&(u.M=new jc(C(u.Y,u,u.g),u.O)),p=u.U,b=u.g,A=u.ca;var H="readystatechange";Array.isArray(H)||(H&&($a[0]=H.toString()),H=$a);for(var Q=0;Q<H.length;Q++){var oe=Nt(b,H[Q],A||p.handleEvent,!1,p.h||p);if(!oe)break;p.g[oe.key]=oe}p=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),da(),Pr(u.i,u.u,u.A,u.l,u.R,u.m)}Xn.prototype.ca=function(u){u=u.target;const p=this.M;p&&an(u)==3?p.j():this.Y(u)},Xn.prototype.Y=function(u){try{if(u==this.g)e:{const Ot=an(this.g);var p=this.g.Ba();const ci=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||Zi(this.g)))){this.J||Ot!=4||p==7||(p==8||0>=ci?da(3):da(2)),Rs(this);var b=this.g.Z();this.X=b;t:if(ga(this)){var A=Zi(this.g);u="";var H=A.length,Q=an(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tn(this),Ja(this);var oe="";break t}this.h.i=new g.TextDecoder}for(p=0;p<H;p++)this.h.h=!0,u+=this.h.i.decode(A[p],{stream:!(Q&&p==H-1)});A.length=0,this.h.g+=u,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=b==200,Hr(this.i,this.u,this.A,this.l,this.R,Ot,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,bt=this.g;if((Qe=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(Qe)){var Ce=Qe;break t}}Ce=null}if(b=Ce)fa(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zn(this,b);else{this.o=!1,this.s=3,kt(12),tn(this),Ja(this);break e}}if(this.P){b=!0;let on;for(;!this.J&&this.C<oe.length;)if(on=Gi(this,oe),on==ma){Ot==4&&(this.s=4,kt(14),b=!1),fa(this.i,this.l,null,"[Incomplete Response]");break}else if(on==Fr){this.s=4,kt(15),fa(this.i,this.l,oe,"[Invalid Chunk]"),b=!1;break}else fa(this.i,this.l,on,null),Zn(this,on);if(ga(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||oe.length!=0||this.h.h||(this.s=1,kt(16),b=!1),this.o=this.o&&b,!b)fa(this.i,this.l,oe,"[Invalid Chunked Response]"),tn(this),Ja(this);else if(0<oe.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),el(Mt),Mt.M=!0,kt(11))}}else fa(this.i,this.l,oe,null),Zn(this,oe);Ot==4&&tn(this),this.o&&!this.J&&(Ot==4?Co(this.j,this):(this.o=!1,zn(this)))}else So(this.g),b==400&&0<oe.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),tn(this),Ja(this)}}}catch{}finally{}};function ga(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Gi(u,p){var b=u.C,A=p.indexOf(`
`,b);return A==-1?ma:(b=Number(p.substring(b,A)),isNaN(b)?Fr:(A+=1,A+b>p.length?ma:(p=p.slice(A,A+b),u.C=A+b,p)))}Xn.prototype.cancel=function(){this.J=!0,tn(this)};function zn(u){u.S=Date.now()+u.I,pt(u,u.I)}function pt(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ya(C(u.ba,u),p)}function Rs(u){u.B&&(g.clearTimeout(u.B),u.B=null)}Xn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(po(this.i,this.A),this.L!=2&&(da(),kt(17)),tn(this),this.s=2,Ja(this)):pt(this,this.S-u)};function Ja(u){u.j.G==0||u.J||Co(u.j,u)}function tn(u){Rs(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Kt(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Zn(u,p){try{var b=u.j;if(b.G!=0&&(b.g==u||Wa(b.h,u))){if(!u.K&&Wa(b.h,u)&&b.G==3){try{var A=b.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<u.F)oi(b),li(b);else break e;Wr(b),kt(18)}}else b.za=H[1],0<b.za-b.T&&37500>H[2]&&b.F&&b.v==0&&!b.C&&(b.C=Ya(C(b.Za,b),6e3));if(1>=yo(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else ba(b,11)}else if((u.K||b.g==u)&&oi(b),!ee(p))for(H=b.Da.g.parse(p),p=0;p<H.length;p++){let Ce=H[p];if(b.T=Ce[0],Ce=Ce[1],b.G==2)if(Ce[0]=="c"){b.K=Ce[1],b.ia=Ce[2];const Mt=Ce[3];Mt!=null&&(b.la=Mt,b.j.info("VER="+b.la));const Ot=Ce[4];Ot!=null&&(b.Aa=Ot,b.j.info("SVER="+b.Aa));const ci=Ce[5];ci!=null&&typeof ci=="number"&&0<ci&&(A=1.5*ci,b.L=A,b.j.info("backChannelRequestTimeoutMs_="+A)),A=b;const on=u.g;if(on){const es=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(es){var Q=A.h;Q.g||es.indexOf("spdy")==-1&&es.indexOf("quic")==-1&&es.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(ei(Q,Q.h),Q.h=null))}if(A.D){const Ea=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Ea&&(A.ya=Ea,Fe(A.I,A.D,Ea))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-u.F,b.j.info("Handshake RTT: "+b.R+"ms")),A=b;var oe=u;if(A.qa=Do(A,A.J?A.ia:null,A.W),oe.K){wn(A.h,oe);var Qe=oe,bt=A.L;bt&&(Qe.I=bt),Qe.B&&(Rs(Qe),zn(Qe)),A.g=oe}else No(A);0<b.i.length&&Ls(b)}else Ce[0]!="stop"&&Ce[0]!="close"||ba(b,7);else b.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?ba(b,7):Zr(b):Ce[0]!="noop"&&b.l&&b.l.ta(Ce),b.v=0)}}da(4)}catch{}}var Ic=class{constructor(u,p){this.g=u,this.map=p}};function qr(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $r(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function yo(u){return u.h?1:u.g?u.g.size:0}function Wa(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function ei(u,p){u.g?u.g.add(p):u.h=p}function wn(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}qr.prototype.cancel=function(){if(this.i=nn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function nn(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const b of u.g.values())p=p.concat(b.D);return p}return P(u.i)}function vo(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var p=[],b=u.length,A=0;A<b;A++)p.push(u[A]);return p}p=[],b=0;for(A in u)p[b++]=u[A];return p}function Mc(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var p=[];u=u.length;for(var b=0;b<u;b++)p.push(b);return p}p=[],b=0;for(const A in u)p[b++]=A;return p}}}function Cs(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var b=Mc(u),A=vo(u),H=A.length,Q=0;Q<H;Q++)p.call(void 0,A[Q],b&&b[Q],u)}var Gr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function js(u,p){if(u){u=u.split("&");for(var b=0;b<u.length;b++){var A=u[b].indexOf("="),H=null;if(0<=A){var Q=u[b].substring(0,A);H=u[b].substring(A+1)}else Q=u[b];p(Q,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function ya(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ya){this.h=u.h,ti(this,u.j),this.o=u.o,this.g=u.g,Ki(this,u.s),this.l=u.l;var p=u.i,b=new Jn;b.i=p.i,p.g&&(b.g=new Map(p.g),b.h=p.h),Ds(this,b),this.m=u.m}else u&&(p=String(u).match(Gr))?(this.h=!1,ti(this,p[1]||"",!0),this.o=ni(p[2]||""),this.g=ni(p[3]||"",!0),Ki(this,p[4]),this.l=ni(p[5]||"",!0),Ds(this,p[6]||"",!0),this.m=ni(p[7]||"")):(this.h=!1,this.i=new Jn(null,this.h))}ya.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Nn(p,Kr,!0),":");var b=this.g;return(b||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Nn(p,Kr,!0),"@"),u.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&u.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(Nn(b,b.charAt(0)=="/"?Qr:_o,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",Nn(b,Lc)),u.join("")};function ct(u){return new ya(u)}function ti(u,p,b){u.j=b?ni(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Ki(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Ds(u,p,b){p instanceof Jn?(u.i=p,bo(u.i,u.h)):(b||(p=Nn(p,Vc)),u.i=new Jn(p,u.h))}function Fe(u,p,b){u.i.set(p,b)}function Qi(u){return Fe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ni(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Nn(u,p,b){return typeof u=="string"?(u=encodeURI(u).replace(p,Oc),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Oc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Kr=/[#\/\?@]/g,_o=/[#\?:]/g,Qr=/[#\?]/g,Vc=/[#\?@]/g,Lc=/#/g;function Jn(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function It(u){u.g||(u.g=new Map,u.h=0,u.i&&js(u.i,function(p,b){u.add(decodeURIComponent(p.replace(/\+/g," ")),b)}))}s=Jn.prototype,s.add=function(u,p){It(this),this.i=null,u=mn(this,u);var b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(p),this.h+=1,this};function Is(u,p){It(u),p=mn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Ms(u,p){return It(u),p=mn(u,p),u.g.has(p)}s.forEach=function(u,p){It(this),this.g.forEach(function(b,A){b.forEach(function(H){u.call(p,H,A,this)},this)},this)},s.na=function(){It(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),b=[];for(let A=0;A<p.length;A++){const H=u[A];for(let Q=0;Q<H.length;Q++)b.push(p[A])}return b},s.V=function(u){It(this);let p=[];if(typeof u=="string")Ms(this,u)&&(p=p.concat(this.g.get(mn(this,u))));else{u=Array.from(this.g.values());for(let b=0;b<u.length;b++)p=p.concat(u[b])}return p},s.set=function(u,p){return It(this),this.i=null,u=mn(this,u),Ms(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},s.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function va(u,p,b){Is(u,p),0<b.length&&(u.i=null,u.g.set(mn(u,p),P(b)),u.h+=b.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var b=0;b<p.length;b++){var A=p[b];const Q=encodeURIComponent(String(A)),oe=this.V(A);for(A=0;A<oe.length;A++){var H=Q;oe[A]!==""&&(H+="="+encodeURIComponent(String(oe[A]))),u.push(H)}}return this.i=u.join("&")};function mn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function bo(u,p){p&&!u.j&&(It(u),u.i=null,u.g.forEach(function(b,A){var H=A.toLowerCase();A!=H&&(Is(this,A),va(this,H,b))},u)),u.j=p}function Yr(u,p){const b=new Xa;if(g.Image){const A=new Image;A.onload=U(ln,b,"TestLoadImage: loaded",!0,p,A),A.onerror=U(ln,b,"TestLoadImage: error",!1,p,A),A.onabort=U(ln,b,"TestLoadImage: abort",!1,p,A),A.ontimeout=U(ln,b,"TestLoadImage: timeout",!1,p,A),g.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else p(!1)}function Eo(u,p){const b=new Xa,A=new AbortController,H=setTimeout(()=>{A.abort(),ln(b,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:A.signal}).then(Q=>{clearTimeout(H),Q.ok?ln(b,"TestPingServer: ok",!0,p):ln(b,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(H),ln(b,"TestPingServer: error",!1,p)})}function ln(u,p,b,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(b)}catch{}}function Pn(){this.g=new Dc}function Xr(u,p,b){const A=b||"";try{Cs(u,function(H,Q){let oe=H;v(H)&&(oe=An(H)),p.push(A+Q+"="+encodeURIComponent(oe))})}catch(H){throw p.push(A+"type="+encodeURIComponent("_badmap")),H}}function Wn(u){this.l=u.Ub||null,this.j=u.eb||!1}B(Wn,kr),Wn.prototype.g=function(){return new pn(this.l,this.j)},Wn.prototype.i=(function(u){return function(){return u}})({});function pn(u,p){Rt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(pn,Rt),s=pn.prototype,s.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,ai(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||g).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ea(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Os(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Os(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?ea(this):ai(this),this.readyState==3&&Os(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,ea(this))},s.Qa=function(u){this.g&&(this.response=u,ea(this))},s.ga=function(){this.g&&ea(this)};function ea(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ai(u)}s.setRequestHeader=function(u,p){this.u.append(u,p)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var b=p.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=p.next();return u.join(`\r
`)};function ai(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(pn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Yi(u){let p="";return re(u,function(b,A){p+=A,p+=":",p+=b,p+=`\r
`}),p}function ii(u,p,b){e:{for(A in b){var A=!1;break e}A=!0}A||(b=Yi(b),typeof u=="string"?b!=null&&encodeURIComponent(String(b)):Fe(u,p,b))}function nt(u){Rt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(nt,Rt);var Qt=/^https?$/i,_a=["POST","PUT"];s=nt.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,p,b,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yn.g(),this.v=this.o?mo(this.o):mo(Yn),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(Q){Xi(this,Q);return}if(u=b||"",b=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)b.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Q of A.keys())b.set(Q,A.get(Q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(b.keys()).find(Q=>Q.toLowerCase()=="content-type"),H=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(_a,p,void 0))||A||H||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,oe]of b)this.g.setRequestHeader(Q,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vs(this),this.u=!0,this.g.send(u),this.u=!1}catch(Q){Xi(this,Q)}};function Xi(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,si(u),ri(u)}function si(u){u.A||(u.A=!0,Dt(u,"complete"),Dt(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Dt(this,"complete"),Dt(this,"abort"),ri(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ri(this,!0)),nt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?To(this):this.bb())},s.bb=function(){To(this)};function To(u){if(u.h&&typeof m<"u"&&(!u.v[1]||an(u)!=4||u.Z()!=2)){if(u.u&&an(u)==4)fo(u.Ea,0,u);else if(Dt(u,"readystatechange"),an(u)==4){u.h=!1;try{const oe=u.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var b;if(!(b=p)){var A;if(A=oe===0){var H=String(u.D).match(Gr)[1]||null;!H&&g.self&&g.self.location&&(H=g.self.location.protocol.slice(0,-1)),A=!Qt.test(H?H.toLowerCase():"")}b=A}if(b)Dt(u,"complete"),Dt(u,"success");else{u.m=6;try{var Q=2<an(u)?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.Z()+"]",si(u)}}finally{ri(u)}}}}function ri(u,p){if(u.g){Vs(u);const b=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Dt(u,"ready");try{b.onreadystatechange=A}catch{}}}function Vs(u){u.I&&(g.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function an(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<an(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),en(p)}};function Zi(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function So(u){const p={};u=(u.g&&2<=an(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(ee(u[A]))continue;var b=M(u[A]);const H=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Q=p[H]||[];p[H]=Q,Q.push(b)}I(p,function(A){return A.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ji(u,p,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||p}function Ao(u){this.Aa=0,this.i=[],this.j=new Xa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ji("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ji("baseRetryDelayMs",5e3,u),this.cb=Ji("retryDelaySeedMs",1e4,u),this.Wa=Ji("forwardChannelMaxRetries",2,u),this.wa=Ji("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new qr(u&&u.concurrentRequestLimit),this.Da=new Pn,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Ao.prototype,s.la=8,s.G=1,s.connect=function(u,p,b,A){kt(0),this.W=u,this.H=p||{},b&&A!==void 0&&(this.H.OSID=b,this.H.OAID=A),this.F=this.X,this.I=Do(this,null,this.W),Ls(this)};function Zr(u){if(xo(u),u.G==3){var p=u.U++,b=ct(u.I);if(Fe(b,"SID",u.K),Fe(b,"RID",p),Fe(b,"TYPE","terminate"),Wi(u,b),p=new Xn(u,u.j,p),p.L=2,p.v=Qi(ct(b)),b=!1,g.navigator&&g.navigator.sendBeacon)try{b=g.navigator.sendBeacon(p.v.toString(),"")}catch{}!b&&g.Image&&(new Image().src=p.v,b=!0),b||(p.g=Io(p.j,null),p.g.ea(p.v)),p.F=Date.now(),zn(p)}tl(u)}function li(u){u.g&&(el(u),u.g.cancel(),u.g=null)}function xo(u){li(u),u.u&&(g.clearTimeout(u.u),u.u=null),oi(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function Ls(u){if(!$r(u.h)&&!u.s){u.s=!0;var p=u.Ga;ae||He(),ue||(ae(),ue=!0),Ve.add(p,u),u.B=0}}function Uc(u,p){return yo(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ya(C(u.Ga,u,p),jo(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const H=new Xn(this,this.j,u);let Q=this.o;if(this.S&&(Q?(Q=w(Q),O(Q,this.S)):Q=this.S),this.m!==null||this.O||(H.H=Q,Q=null),this.P)e:{for(var p=0,b=0;b<this.i.length;b++){t:{var A=this.i[b];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=b;break e}if(p===4096||b===this.i.length-1){p=b+1;break e}}p=1e3}else p=1e3;p=Jr(this,H,p),b=ct(this.I),Fe(b,"RID",u),Fe(b,"CVER",22),this.D&&Fe(b,"X-HTTP-Session-Id",this.D),Wi(this,b),Q&&(this.O?p="headers="+encodeURIComponent(String(Yi(Q)))+"&"+p:this.m&&ii(b,this.m,Q)),ei(this.h,H),this.Ua&&Fe(b,"TYPE","init"),this.P?(Fe(b,"$req",p),Fe(b,"SID","null"),H.T=!0,$i(H,b,null)):$i(H,b,p),this.G=2}}else this.G==3&&(u?wo(this,u):this.i.length==0||$r(this.h)||wo(this))};function wo(u,p){var b;p?b=p.l:b=u.U++;const A=ct(u.I);Fe(A,"SID",u.K),Fe(A,"RID",b),Fe(A,"AID",u.T),Wi(u,A),u.m&&u.o&&ii(A,u.m,u.o),b=new Xn(u,u.j,b,u.B+1),u.m===null&&(b.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Jr(u,b,1e3),b.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ei(u.h,b),$i(b,A,p)}function Wi(u,p){u.H&&re(u.H,function(b,A){Fe(p,A,b)}),u.l&&Cs({},function(b,A){Fe(p,A,b)})}function Jr(u,p,b){b=Math.min(u.i.length,b);var A=u.l?C(u.l.Na,u.l,u):null;e:{var H=u.i;let Q=-1;for(;;){const oe=["count="+b];Q==-1?0<b?(Q=H[0].g,oe.push("ofs="+Q)):Q=0:oe.push("ofs="+Q);let Qe=!0;for(let bt=0;bt<b;bt++){let Ce=H[bt].g;const Mt=H[bt].map;if(Ce-=Q,0>Ce)Q=Math.max(0,H[bt].g-100),Qe=!1;else try{Xr(Mt,oe,"req"+Ce+"_")}catch{A&&A(Mt)}}if(Qe){A=oe.join("&");break e}}}return u=u.i.splice(0,b),p.D=u,A}function No(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ae||He(),ue||(ae(),ue=!0),Ve.add(p,u),u.v=0}}function Wr(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ya(C(u.Fa,u),jo(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,Ro(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ya(C(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),li(this),Ro(this))};function el(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function Ro(u){u.g=new Xn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=ct(u.qa);Fe(p,"RID","rpc"),Fe(p,"SID",u.K),Fe(p,"AID",u.T),Fe(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Fe(p,"TO",u.ja),Fe(p,"TYPE","xmlhttp"),Wi(u,p),u.m&&u.o&&ii(p,u.m,u.o),u.L&&(u.g.I=u.L);var b=u.g;u=u.ia,b.L=1,b.v=Qi(ct(p)),b.m=null,b.P=!0,pa(b,u)}s.Za=function(){this.C!=null&&(this.C=null,li(this),Wr(this),kt(19))};function oi(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function Co(u,p){var b=null;if(u.g==p){oi(u),el(u),u.g=null;var A=2}else if(Wa(u.h,p))b=p.D,wn(u.h,p),A=1;else return;if(u.G!=0){if(p.o)if(A==1){b=p.m?p.m.length:0,p=Date.now()-p.F;var H=u.B;A=Ns(),Dt(A,new zr(A,b)),Ls(u)}else No(u);else if(H=p.s,H==3||H==0&&0<p.X||!(A==1&&Uc(u,p)||A==2&&Wr(u)))switch(b&&0<b.length&&(p=u.h,p.i=p.i.concat(b)),H){case 1:ba(u,5);break;case 4:ba(u,10);break;case 3:ba(u,6);break;default:ba(u,2)}}}function jo(u,p){let b=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(b*=2),b*p}function ba(u,p){if(u.j.info("Error code "+p),p==2){var b=C(u.fb,u),A=u.Xa;const H=!A;A=new ya(A||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||ti(A,"https"),Qi(A),H?Yr(A.toString(),b):Eo(A.toString(),b)}else kt(2);u.G=0,u.l&&u.l.sa(p),tl(u),xo(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function tl(u){if(u.G=0,u.ka=[],u.l){const p=nn(u.h);(p.length!=0||u.i.length!=0)&&(j(u.ka,p),j(u.ka,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.ra()}}function Do(u,p,b){var A=b instanceof ya?ct(b):new ya(b);if(A.g!="")p&&(A.g=p+"."+A.g),Ki(A,A.s);else{var H=g.location;A=H.protocol,p=p?p+"."+H.hostname:H.hostname,H=+H.port;var Q=new ya(null);A&&ti(Q,A),p&&(Q.g=p),H&&Ki(Q,H),b&&(Q.l=b),A=Q}return b=u.D,p=u.ya,b&&p&&Fe(A,b,p),Fe(A,"VER",u.la),Wi(u,A),A}function Io(u,p,b){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new nt(new Wn({eb:b})):new nt(u.pa),p.Ha(u.J),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mo(){}s=Mo.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Us(){}Us.prototype.g=function(u,p){return new sn(u,p)};function sn(u,p){Rt.call(this),this.g=new Ao(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!ee(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ee(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new ui(this)}B(sn,Rt),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Zr(this.g)},sn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.u&&(b={},b.__data__=An(u),u=b);p.i.push(new Ic(p.Ya++,u)),p.G==3&&Ls(p)},sn.prototype.N=function(){this.g.l=null,delete this.j,Zr(this.g),delete this.g,sn.aa.N.call(this)};function Oo(u){Ga.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const b in p){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}B(Oo,Ga);function Vo(){Bn.call(this),this.status=1}B(Vo,Bn);function ui(u){this.g=u}B(ui,Mo),ui.prototype.ua=function(){Dt(this.g,"a")},ui.prototype.ta=function(u){Dt(this.g,new Oo(u))},ui.prototype.sa=function(u){Dt(this.g,new Vo)},ui.prototype.ra=function(){Dt(this.g,"b")},Us.prototype.createWebChannel=Us.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,cb=function(){return new Us},ub=function(){return Ns()},ob=xn,df={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ut.NO_ERROR=0,ut.TIMEOUT=8,ut.HTTP_ERROR=6,Wu=ut,Bt.COMPLETE="complete",lb=Bt,qi.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,Pl=qi,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,rb=nt}).apply(typeof $u<"u"?$u:typeof self<"u"?self:typeof window<"u"?window:{});const Iv="@firebase/firestore";class Zt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");let Ir="10.14.0";const Ts=new W_("@firebase/firestore");function zl(){return Ts.logLevel}function me(s,...t){if(Ts.logLevel<=ze.DEBUG){const a=t.map(Pf);Ts.debug(`Firestore (${Ir}): ${s}`,...a)}}function za(s,...t){if(Ts.logLevel<=ze.ERROR){const a=t.map(Pf);Ts.error(`Firestore (${Ir}): ${s}`,...a)}}function Er(s,...t){if(Ts.logLevel<=ze.WARN){const a=t.map(Pf);Ts.warn(`Firestore (${Ir}): ${s}`,...a)}}function Pf(s){if(typeof s=="string")return s;try{return(function(a){return JSON.stringify(a)})(s)}catch{return s}}function we(s="Unexpected state"){const t=`FIRESTORE (${Ir}) INTERNAL ASSERTION FAILED: `+s;throw za(t),new Error(t)}function ft(s,t){s||we()}function ke(s,t){return s}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Dr{constructor(t,a){super(t,a),this.code=t,this.message=a,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bs{constructor(){this.promise=new Promise(((t,a)=>{this.resolve=t,this.reject=a}))}}class hb{constructor(t,a){this.user=a,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class nw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,a){t.enqueueRetryable((()=>a(Zt.UNAUTHENTICATED)))}shutdown(){}}class aw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,a){this.changeListener=a,t.enqueueRetryable((()=>a(this.token.user)))}shutdown(){this.changeListener=null}}class iw{constructor(t){this.t=t,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,a){ft(this.o===void 0);let r=this.i;const o=y=>this.i!==r?(r=this.i,a(y)):Promise.resolve();let c=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new bs,t.enqueueRetryable((()=>o(this.currentUser)))};const m=()=>{const y=c;t.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},g=y=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((y=>g(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new bs)}}),0),m()}getToken(){const t=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then((r=>this.i!==t?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string"),new hb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ft(t===null||typeof t=="string"),new Zt(t)}}class sw{constructor(t,a,r){this.l=t,this.h=a,this.P=r,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class rw{constructor(t,a,r){this.l=t,this.h=a,this.P=r}getToken(){return Promise.resolve(new sw(this.l,this.h,this.P))}start(t,a){t.enqueueRetryable((()=>a(Zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lw{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ow{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,a){ft(this.o===void 0);const r=c=>{c.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const m=c.token!==this.R;return this.R=c.token,me("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?a(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>r(c)))};const o=c=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?o(c):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((a=>a?(ft(typeof a.token=="string"),this.R=a.token,new lw(a.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function uw(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),a=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(a);else for(let r=0;r<s;r++)a[r]=Math.floor(256*Math.random());return a}class cw{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const o=uw(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<a&&(r+=t.charAt(o[c]%t.length))}return r}}function Ke(s,t){return s<t?-1:s>t?1:0}function Tr(s,t,a){return s.length===t.length&&s.every(((r,o)=>a(r,t[o])))}class jt{constructor(t,a){if(this.seconds=t,this.nanoseconds=a,a<0)throw new pe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(a>=1e9)throw new pe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(t<-62135596800)throw new pe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new pe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return jt.fromMillis(Date.now())}static fromDate(t){return jt.fromMillis(t.getTime())}static fromMillis(t){const a=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*a));return new jt(a,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ke(this.nanoseconds,t.nanoseconds):Ke(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ae{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Ae(t)}static min(){return new Ae(new jt(0,0))}static max(){return new Ae(new jt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Zl{constructor(t,a,r){a===void 0?a=0:a>t.length&&we(),r===void 0?r=t.length-a:r>t.length-a&&we(),this.segments=t,this.offset=a,this.len=r}get length(){return this.len}isEqual(t){return Zl.comparator(this,t)===0}child(t){const a=this.segments.slice(this.offset,this.limit());return t instanceof Zl?t.forEach((r=>{a.push(r)})):a.push(t),this.construct(a)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==t.get(a))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==t.get(a))return!1;return!0}forEach(t){for(let a=this.offset,r=this.limit();a<r;a++)t(this.segments[a])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,a){const r=Math.min(t.length,a.length);for(let o=0;o<r;o++){const c=t.get(o),m=a.get(o);if(c<m)return-1;if(c>m)return 1}return t.length<a.length?-1:t.length>a.length?1:0}}class ot extends Zl{construct(t,a,r){return new ot(t,a,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const a=[];for(const r of t){if(r.indexOf("//")>=0)throw new pe(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);a.push(...r.split("/").filter((o=>o.length>0)))}return new ot(a)}static emptyPath(){return new ot([])}}const hw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Zl{construct(t,a,r){return new Wt(t,a,r)}static isValidIdentifier(t){return hw.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Wt(["__name__"])}static fromServerFormat(t){const a=[];let r="",o=0;const c=()=>{if(r.length===0)throw new pe(le.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);a.push(r),r=""};let m=!1;for(;o<t.length;){const g=t[o];if(g==="\\"){if(o+1===t.length)throw new pe(le.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new pe(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=y,o+=2}else g==="`"?(m=!m,o++):g!=="."||m?(r+=g,o++):(c(),o++)}if(c(),m)throw new pe(le.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Wt(a)}static emptyPath(){return new Wt([])}}class be{constructor(t){this.path=t}static fromPath(t){return new be(ot.fromString(t))}static fromName(t){return new be(ot.fromString(t).popFirst(5))}static empty(){return new be(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ot.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,a){return ot.comparator(t.path,a.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new be(new ot(t.slice()))}}function dw(s,t){const a=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(r===1e9?new jt(a+1,0):new jt(a,r));return new ki(o,be.empty(),t)}function fw(s){return new ki(s.readTime,s.key,-1)}class ki{constructor(t,a,r){this.readTime=t,this.documentKey=a,this.largestBatchId=r}static min(){return new ki(Ae.min(),be.empty(),-1)}static max(){return new ki(Ae.max(),be.empty(),-1)}}function mw(s,t){let a=s.readTime.compareTo(t.readTime);return a!==0?a:(a=be.comparator(s.documentKey,t.documentKey),a!==0?a:Ke(s.largestBatchId,t.largestBatchId))}const pw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Hf(s){if(s.code!==le.FAILED_PRECONDITION||s.message!==pw)throw s;me("LocalStore","Unexpectedly lost primary lease")}class ne{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((a=>{this.isDone=!0,this.result=a,this.nextCallback&&this.nextCallback(a)}),(a=>{this.isDone=!0,this.error=a,this.catchCallback&&this.catchCallback(a)}))}catch(t){return this.next(void 0,t)}next(t,a){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(a,this.error):this.wrapSuccess(t,this.result):new ne(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(a,c).next(r,o)}}))}toPromise(){return new Promise(((t,a)=>{this.next(t,a)}))}wrapUserFunction(t){try{const a=t();return a instanceof ne?a:ne.resolve(a)}catch(a){return ne.reject(a)}}wrapSuccess(t,a){return t?this.wrapUserFunction((()=>t(a))):ne.resolve(a)}wrapFailure(t,a){return t?this.wrapUserFunction((()=>t(a))):ne.reject(a)}static resolve(t){return new ne(((a,r)=>{a(t)}))}static reject(t){return new ne(((a,r)=>{r(t)}))}static waitFor(t){return new ne(((a,r)=>{let o=0,c=0,m=!1;t.forEach((g=>{++o,g.next((()=>{++c,m&&c===o&&a()}),(y=>r(y)))})),m=!0,c===o&&a()}))}static or(t){let a=ne.resolve(!1);for(const r of t)a=a.next((o=>o?ne.resolve(o):r()));return a}static forEach(t,a){const r=[];return t.forEach(((o,c)=>{r.push(a.call(this,o,c))})),this.waitFor(r)}static mapArray(t,a){return new ne(((r,o)=>{const c=t.length,m=new Array(c);let g=0;for(let y=0;y<c;y++){const v=y;a(t[v]).next((E=>{m[v]=E,++g,g===c&&r(m)}),(E=>o(E)))}}))}static doWhile(t,a){return new ne(((r,o)=>{const c=()=>{t()===!0?a().next((()=>{c()}),o):r()};c()}))}}function yw(s){const t=s.match(/Android ([\d.]+)/i),a=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(a)}function so(s){return s.name==="IndexedDbTransactionError"}class Ff{constructor(t,a){this.previousValue=t,a&&(a.sequenceNumberHandler=r=>this.ie(r),this.se=r=>a.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Ff.oe=-1;function bc(s){return s==null}function hc(s){return s===0&&1/s==-1/0}function vw(s){return typeof s=="number"&&Number.isInteger(s)&&!hc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}function Mv(s){let t=0;for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&t++;return t}function ro(s,t){for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&t(a,s[a])}function db(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}class _t{constructor(t,a){this.comparator=t,this.root=a||qt.EMPTY}insert(t,a){return new _t(this.comparator,this.root.insert(t,a,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(t){return new _t(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qt.BLACK,null,null))}get(t){let a=this.root;for(;!a.isEmpty();){const r=this.comparator(t,a.key);if(r===0)return a.value;r<0?a=a.left:r>0&&(a=a.right)}return null}indexOf(t){let a=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return a+r.left.size;o<0?r=r.left:(a+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((a,r)=>(t(a,r),!1)))}toString(){const t=[];return this.inorderTraversal(((a,r)=>(t.push(`${a}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Gu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Gu(this.root,t,this.comparator,!1)}getReverseIterator(){return new Gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Gu(this.root,t,this.comparator,!0)}}class Gu{constructor(t,a,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=a?r(t.key,a):1,a&&o&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const a={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return a}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class qt{constructor(t,a,r,o,c){this.key=t,this.value=a,this.color=r??qt.RED,this.left=o??qt.EMPTY,this.right=c??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,a,r,o,c){return new qt(t??this.key,a??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,a,r){let o=this;const c=r(t,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(t,a,r),null):c===0?o.copy(null,a,null,null,null):o.copy(null,null,null,null,o.right.insert(t,a,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,a){let r,o=this;if(a(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,a),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),a(t,o.key)===0){if(o.right.isEmpty())return qt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,a))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,a)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const t=this.left.check();if(t!==this.right.check())throw we();return t+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(t,a,r,o,c){return this}insert(t,a,r){return new qt(t,a)}remove(t,a){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $t{constructor(t){this.comparator=t,this.data=new _t(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((a,r)=>(t(a),!1)))}forEachInRange(t,a){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;a(o.key)}}forEachWhile(t,a){let r;for(r=a!==void 0?this.data.getIteratorFrom(a):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const a=this.data.getIteratorFrom(t);return a.hasNext()?a.getNext().key:null}getIterator(){return new Ov(this.data.getIterator())}getIteratorFrom(t){return new Ov(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let a=this;return a.size<t.size&&(a=t,t=this),t.forEach((r=>{a=a.add(r)})),a}isEqual(t){if(!(t instanceof $t)||this.size!==t.size)return!1;const a=this.data.getIterator(),r=t.data.getIterator();for(;a.hasNext();){const o=a.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((a=>{t.push(a)})),t}toString(){const t=[];return this.forEach((a=>t.push(a))),"SortedSet("+t.toString()+")"}copy(t){const a=new $t(this.comparator);return a.data=t,a}}class Ov{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Oi{constructor(t){this.fields=t,t.sort(Wt.comparator)}static empty(){return new Oi([])}unionWith(t){let a=new $t(Wt.comparator);for(const r of this.fields)a=a.add(r);for(const r of t)a=a.add(r);return new Oi(a.toArray())}covers(t){for(const a of this.fields)if(a.isPrefixOf(t))return!0;return!1}isEqual(t){return Tr(this.fields,t.fields,((a,r)=>a.isEqual(r)))}}class fb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gt{constructor(t){this.binaryString=t}static fromBase64String(t){const a=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new fb("Invalid base64 string: "+c):c}})(t);return new Gt(a)}static fromUint8Array(t){const a=(function(o){let c="";for(let m=0;m<o.length;++m)c+=String.fromCharCode(o[m]);return c})(t);return new Gt(a)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(a){return btoa(a)})(this.binaryString)}toUint8Array(){return(function(a){const r=new Uint8Array(a.length);for(let o=0;o<a.length;o++)r[o]=a.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ke(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const _w=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bi(s){if(ft(!!s),typeof s=="string"){let t=0;const a=_w.exec(s);if(ft(!!a),a[1]){let o=a[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:vt(s.seconds),nanos:vt(s.nanos)}}function vt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ss(s){return typeof s=="string"?Gt.fromBase64String(s):Gt.fromUint8Array(s)}function qf(s){var t,a;return((a=(((t=s?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||a===void 0?void 0:a.stringValue)==="server_timestamp"}function $f(s){const t=s.mapValue.fields.__previous_value__;return qf(t)?$f(t):t}function Jl(s){const t=Bi(s.mapValue.fields.__local_write_time__.timestampValue);return new jt(t.seconds,t.nanos)}class bw{constructor(t,a,r,o,c,m,g,y,v){this.databaseId=t,this.appId=a,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=m,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=v}}class Wl{constructor(t,a){this.projectId=t,this.database=a||"(default)"}static empty(){return new Wl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Wl&&t.projectId===this.projectId&&t.database===this.database}}const Ku={mapValue:{}};function As(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?qf(s)?4:Tw(s)?9007199254740991:Ew(s)?10:11:we()}function la(s,t){if(s===t)return!0;const a=As(s);if(a!==As(t))return!1;switch(a){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Jl(s).isEqual(Jl(t));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const m=Bi(o.timestampValue),g=Bi(c.timestampValue);return m.seconds===g.seconds&&m.nanos===g.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(o,c){return Ss(o.bytesValue).isEqual(Ss(c.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(o,c){return vt(o.geoPointValue.latitude)===vt(c.geoPointValue.latitude)&&vt(o.geoPointValue.longitude)===vt(c.geoPointValue.longitude)})(s,t);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return vt(o.integerValue)===vt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const m=vt(o.doubleValue),g=vt(c.doubleValue);return m===g?hc(m)===hc(g):isNaN(m)&&isNaN(g)}return!1})(s,t);case 9:return Tr(s.arrayValue.values||[],t.arrayValue.values||[],la);case 10:case 11:return(function(o,c){const m=o.mapValue.fields||{},g=c.mapValue.fields||{};if(Mv(m)!==Mv(g))return!1;for(const y in m)if(m.hasOwnProperty(y)&&(g[y]===void 0||!la(m[y],g[y])))return!1;return!0})(s,t);default:return we()}}function eo(s,t){return(s.values||[]).find((a=>la(a,t)))!==void 0}function Sr(s,t){if(s===t)return 0;const a=As(s),r=As(t);if(a!==r)return Ke(a,r);switch(a){case 0:case 9007199254740991:return 0;case 1:return Ke(s.booleanValue,t.booleanValue);case 2:return(function(c,m){const g=vt(c.integerValue||c.doubleValue),y=vt(m.integerValue||m.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1})(s,t);case 3:return Vv(s.timestampValue,t.timestampValue);case 4:return Vv(Jl(s),Jl(t));case 5:return Ke(s.stringValue,t.stringValue);case 6:return(function(c,m){const g=Ss(c),y=Ss(m);return g.compareTo(y)})(s.bytesValue,t.bytesValue);case 7:return(function(c,m){const g=c.split("/"),y=m.split("/");for(let v=0;v<g.length&&v<y.length;v++){const E=Ke(g[v],y[v]);if(E!==0)return E}return Ke(g.length,y.length)})(s.referenceValue,t.referenceValue);case 8:return(function(c,m){const g=Ke(vt(c.latitude),vt(m.latitude));return g!==0?g:Ke(vt(c.longitude),vt(m.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return Lv(s.arrayValue,t.arrayValue);case 10:return(function(c,m){var g,y,v,E;const S=c.fields||{},C=m.fields||{},U=(g=S.value)===null||g===void 0?void 0:g.arrayValue,B=(y=C.value)===null||y===void 0?void 0:y.arrayValue,P=Ke(((v=U?.values)===null||v===void 0?void 0:v.length)||0,((E=B?.values)===null||E===void 0?void 0:E.length)||0);return P!==0?P:Lv(U,B)})(s.mapValue,t.mapValue);case 11:return(function(c,m){if(c===Ku.mapValue&&m===Ku.mapValue)return 0;if(c===Ku.mapValue)return 1;if(m===Ku.mapValue)return-1;const g=c.fields||{},y=Object.keys(g),v=m.fields||{},E=Object.keys(v);y.sort(),E.sort();for(let S=0;S<y.length&&S<E.length;++S){const C=Ke(y[S],E[S]);if(C!==0)return C;const U=Sr(g[y[S]],v[E[S]]);if(U!==0)return U}return Ke(y.length,E.length)})(s.mapValue,t.mapValue);default:throw we()}}function Vv(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Ke(s,t);const a=Bi(s),r=Bi(t),o=Ke(a.seconds,r.seconds);return o!==0?o:Ke(a.nanos,r.nanos)}function Lv(s,t){const a=s.values||[],r=t.values||[];for(let o=0;o<a.length&&o<r.length;++o){const c=Sr(a[o],r[o]);if(c)return c}return Ke(a.length,r.length)}function Ar(s){return ff(s)}function ff(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(a){const r=Bi(a);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(a){return Ss(a).toBase64()})(s.bytesValue):"referenceValue"in s?(function(a){return be.fromName(a).toString()})(s.referenceValue):"geoPointValue"in s?(function(a){return`geo(${a.latitude},${a.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(a){let r="[",o=!0;for(const c of a.values||[])o?o=!1:r+=",",r+=ff(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(a){const r=Object.keys(a.fields||{}).sort();let o="{",c=!0;for(const m of r)c?c=!1:o+=",",o+=`${m}:${ff(a.fields[m])}`;return o+"}"})(s.mapValue):we()}function Uv(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function mf(s){return!!s&&"integerValue"in s}function Gf(s){return!!s&&"arrayValue"in s}function kv(s){return!!s&&"nullValue"in s}function Bv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Gd(s){return!!s&&"mapValue"in s}function Ew(s){var t,a;return((a=(((t=s?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||a===void 0?void 0:a.stringValue)==="__vector__"}function ql(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return ro(s.mapValue.fields,((a,r)=>t.mapValue.fields[a]=ql(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let a=0;a<(s.arrayValue.values||[]).length;++a)t.arrayValue.values[a]=ql(s.arrayValue.values[a]);return t}return Object.assign({},s)}function Tw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class sa{constructor(t){this.value=t}static empty(){return new sa({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let a=this.value;for(let r=0;r<t.length-1;++r)if(a=(a.mapValue.fields||{})[t.get(r)],!Gd(a))return null;return a=(a.mapValue.fields||{})[t.lastSegment()],a||null}}set(t,a){this.getFieldsMap(t.popLast())[t.lastSegment()]=ql(a)}setAll(t){let a=Wt.emptyPath(),r={},o=[];t.forEach(((m,g)=>{if(!a.isImmediateParentOf(g)){const y=this.getFieldsMap(a);this.applyChanges(y,r,o),r={},o=[],a=g.popLast()}m?r[g.lastSegment()]=ql(m):o.push(g.lastSegment())}));const c=this.getFieldsMap(a);this.applyChanges(c,r,o)}delete(t){const a=this.field(t.popLast());Gd(a)&&a.mapValue.fields&&delete a.mapValue.fields[t.lastSegment()]}isEqual(t){return la(this.value,t.value)}getFieldsMap(t){let a=this.value;a.mapValue.fields||(a.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=a.mapValue.fields[t.get(r)];Gd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},a.mapValue.fields[t.get(r)]=o),a=o}return a.mapValue.fields}applyChanges(t,a,r){ro(a,((o,c)=>t[o]=c));for(const o of r)delete t[o]}clone(){return new sa(ql(this.value))}}class Jt{constructor(t,a,r,o,c,m,g){this.key=t,this.documentType=a,this.version=r,this.readTime=o,this.createTime=c,this.data=m,this.documentState=g}static newInvalidDocument(t){return new Jt(t,0,Ae.min(),Ae.min(),Ae.min(),sa.empty(),0)}static newFoundDocument(t,a,r,o){return new Jt(t,1,a,Ae.min(),r,o,0)}static newNoDocument(t,a){return new Jt(t,2,a,Ae.min(),Ae.min(),sa.empty(),0)}static newUnknownDocument(t,a){return new Jt(t,3,a,Ae.min(),Ae.min(),sa.empty(),2)}convertToFoundDocument(t,a){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=a,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=sa.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=sa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Jt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class dc{constructor(t,a){this.position=t,this.inclusive=a}}function zv(s,t,a){let r=0;for(let o=0;o<s.position.length;o++){const c=t[o],m=s.position[o];if(c.field.isKeyField()?r=be.comparator(be.fromName(m.referenceValue),a.key):r=Sr(m,a.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function Pv(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let a=0;a<s.position.length;a++)if(!la(s.position[a],t.position[a]))return!1;return!0}class to{constructor(t,a="asc"){this.field=t,this.dir=a}}function Sw(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}class mb{}class wt extends mb{constructor(t,a,r){super(),this.field=t,this.op=a,this.value=r}static create(t,a,r){return t.isKeyField()?a==="in"||a==="not-in"?this.createKeyFieldInFilter(t,a,r):new xw(t,a,r):a==="array-contains"?new Rw(t,r):a==="in"?new Cw(t,r):a==="not-in"?new jw(t,r):a==="array-contains-any"?new Dw(t,r):new wt(t,a,r)}static createKeyFieldInFilter(t,a,r){return a==="in"?new ww(t,r):new Nw(t,r)}matches(t){const a=t.data.field(this.field);return this.op==="!="?a!==null&&this.matchesComparison(Sr(a,this.value)):a!==null&&As(this.value)===As(a)&&this.matchesComparison(Sr(a,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends mb{constructor(t,a){super(),this.filters=t,this.op=a,this.ae=null}static create(t,a){return new $n(t,a)}matches(t){return pb(this)?this.filters.find((a=>!a.matches(t)))===void 0:this.filters.find((a=>a.matches(t)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((t,a)=>t.concat(a.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function pb(s){return s.op==="and"}function gb(s){return Aw(s)&&pb(s)}function Aw(s){for(const t of s.filters)if(t instanceof $n)return!1;return!0}function pf(s){if(s instanceof wt)return s.field.canonicalString()+s.op.toString()+Ar(s.value);if(gb(s))return s.filters.map((t=>pf(t))).join(",");{const t=s.filters.map((a=>pf(a))).join(",");return`${s.op}(${t})`}}function yb(s,t){return s instanceof wt?(function(r,o){return o instanceof wt&&r.op===o.op&&r.field.isEqual(o.field)&&la(r.value,o.value)})(s,t):s instanceof $n?(function(r,o){return o instanceof $n&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,m,g)=>c&&yb(m,o.filters[g])),!0):!1})(s,t):void we()}function vb(s){return s instanceof wt?(function(a){return`${a.field.canonicalString()} ${a.op} ${Ar(a.value)}`})(s):s instanceof $n?(function(a){return a.op.toString()+" {"+a.getFilters().map(vb).join(" ,")+"}"})(s):"Filter"}class xw extends wt{constructor(t,a,r){super(t,a,r),this.key=be.fromName(r.referenceValue)}matches(t){const a=be.comparator(t.key,this.key);return this.matchesComparison(a)}}class ww extends wt{constructor(t,a){super(t,"in",a),this.keys=_b("in",a)}matches(t){return this.keys.some((a=>a.isEqual(t.key)))}}class Nw extends wt{constructor(t,a){super(t,"not-in",a),this.keys=_b("not-in",a)}matches(t){return!this.keys.some((a=>a.isEqual(t.key)))}}function _b(s,t){var a;return(((a=t.arrayValue)===null||a===void 0?void 0:a.values)||[]).map((r=>be.fromName(r.referenceValue)))}class Rw extends wt{constructor(t,a){super(t,"array-contains",a)}matches(t){const a=t.data.field(this.field);return Gf(a)&&eo(a.arrayValue,this.value)}}class Cw extends wt{constructor(t,a){super(t,"in",a)}matches(t){const a=t.data.field(this.field);return a!==null&&eo(this.value.arrayValue,a)}}class jw extends wt{constructor(t,a){super(t,"not-in",a)}matches(t){if(eo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const a=t.data.field(this.field);return a!==null&&!eo(this.value.arrayValue,a)}}class Dw extends wt{constructor(t,a){super(t,"array-contains-any",a)}matches(t){const a=t.data.field(this.field);return!(!Gf(a)||!a.arrayValue.values)&&a.arrayValue.values.some((r=>eo(this.value.arrayValue,r)))}}class Iw{constructor(t,a=null,r=[],o=[],c=null,m=null,g=null){this.path=t,this.collectionGroup=a,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=m,this.endAt=g,this.ue=null}}function Hv(s,t=null,a=[],r=[],o=null,c=null,m=null){return new Iw(s,t,a,r,o,c,m)}function Kf(s){const t=ke(s);if(t.ue===null){let a=t.path.canonicalString();t.collectionGroup!==null&&(a+="|cg:"+t.collectionGroup),a+="|f:",a+=t.filters.map((r=>pf(r))).join(","),a+="|ob:",a+=t.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),bc(t.limit)||(a+="|l:",a+=t.limit),t.startAt&&(a+="|lb:",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((r=>Ar(r))).join(",")),t.endAt&&(a+="|ub:",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((r=>Ar(r))).join(",")),t.ue=a}return t.ue}function Qf(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let a=0;a<s.orderBy.length;a++)if(!Sw(s.orderBy[a],t.orderBy[a]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let a=0;a<s.filters.length;a++)if(!yb(s.filters[a],t.filters[a]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!Pv(s.startAt,t.startAt)&&Pv(s.endAt,t.endAt)}function gf(s){return be.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Mr{constructor(t,a=null,r=[],o=[],c=null,m="F",g=null,y=null){this.path=t,this.collectionGroup=a,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=m,this.startAt=g,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Mw(s,t,a,r,o,c,m,g){return new Mr(s,t,a,r,o,c,m,g)}function bb(s){return new Mr(s)}function Fv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Eb(s){return s.collectionGroup!==null}function $l(s){const t=ke(s);if(t.ce===null){t.ce=[];const a=new Set;for(const c of t.explicitOrderBy)t.ce.push(c),a.add(c.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(m){let g=new $t(Wt.comparator);return m.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(g=g.add(v.field))}))})),g})(t).forEach((c=>{a.has(c.canonicalString())||c.isKeyField()||t.ce.push(new to(c,r))})),a.has(Wt.keyField().canonicalString())||t.ce.push(new to(Wt.keyField(),r))}return t.ce}function ra(s){const t=ke(s);return t.le||(t.le=Ow(t,$l(s))),t.le}function Ow(s,t){if(s.limitType==="F")return Hv(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new to(o.field,c)}));const a=s.endAt?new dc(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new dc(s.startAt.position,s.startAt.inclusive):null;return Hv(s.path,s.collectionGroup,t,s.filters,s.limit,a,r)}}function yf(s,t){const a=s.filters.concat([t]);return new Mr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),a,s.limit,s.limitType,s.startAt,s.endAt)}function fc(s,t,a){return new Mr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,a,s.startAt,s.endAt)}function Ec(s,t){return Qf(ra(s),ra(t))&&s.limitType===t.limitType}function Tb(s){return`${Kf(ra(s))}|lt:${s.limitType}`}function dr(s){return`Query(target=${(function(a){let r=a.path.canonicalString();return a.collectionGroup!==null&&(r+=" collectionGroup="+a.collectionGroup),a.filters.length>0&&(r+=`, filters: [${a.filters.map((o=>vb(o))).join(", ")}]`),bc(a.limit)||(r+=", limit: "+a.limit),a.orderBy.length>0&&(r+=`, orderBy: [${a.orderBy.map((o=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(o))).join(", ")}]`),a.startAt&&(r+=", startAt: ",r+=a.startAt.inclusive?"b:":"a:",r+=a.startAt.position.map((o=>Ar(o))).join(",")),a.endAt&&(r+=", endAt: ",r+=a.endAt.inclusive?"a:":"b:",r+=a.endAt.position.map((o=>Ar(o))).join(",")),`Target(${r})`})(ra(s))}; limitType=${s.limitType})`}function Tc(s,t){return t.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):be.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,t)&&(function(r,o){for(const c of $l(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,t)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(s,t)&&(function(r,o){return!(r.startAt&&!(function(m,g,y){const v=zv(m,g,y);return m.inclusive?v<=0:v<0})(r.startAt,$l(r),o)||r.endAt&&!(function(m,g,y){const v=zv(m,g,y);return m.inclusive?v>=0:v>0})(r.endAt,$l(r),o))})(s,t)}function Vw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Sb(s){return(t,a)=>{let r=!1;for(const o of $l(s)){const c=Lw(o,t,a);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function Lw(s,t,a){const r=s.field.isKeyField()?be.comparator(t.key,a.key):(function(c,m,g){const y=m.data.field(c),v=g.data.field(c);return y!==null&&v!==null?Sr(y,v):we()})(s.field,t,a);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return we()}}class Or{constructor(t,a){this.mapKeyFn=t,this.equalsFn=a,this.inner={},this.innerSize=0}get(t){const a=this.mapKeyFn(t),r=this.inner[a];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,t))return c}}has(t){return this.get(t)!==void 0}set(t,a){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,a]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],t))return void(o[c]=[t,a]);o.push([t,a]),this.innerSize++}delete(t){const a=this.mapKeyFn(t),r=this.inner[a];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[a]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){ro(this.inner,((a,r)=>{for(const[o,c]of r)t(o,c)}))}isEmpty(){return db(this.inner)}size(){return this.innerSize}}const Uw=new _t(be.comparator);function zi(){return Uw}const Ab=new _t(be.comparator);function Hl(...s){let t=Ab;for(const a of s)t=t.insert(a.key,a);return t}function kw(s){let t=Ab;return s.forEach(((a,r)=>t=t.insert(a,r.overlayedDocument))),t}function ys(){return Gl()}function xb(){return Gl()}function Gl(){return new Or((s=>s.toString()),((s,t)=>s.isEqual(t)))}const Bw=new $t(be.comparator);function Pe(...s){let t=Bw;for(const a of s)t=t.add(a);return t}const zw=new $t(Ke);function Pw(){return zw}function Yf(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hc(t)?"-0":t}}function wb(s){return{integerValue:""+s}}function Hw(s,t){return vw(t)?wb(t):Yf(s,t)}class Sc{constructor(){this._=void 0}}function Fw(s,t,a){return s instanceof vf?(function(o,c){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&qf(c)&&(c=$f(c)),c&&(m.fields.__previous_value__=c),{mapValue:m}})(a,t):s instanceof mc?Nb(s,t):s instanceof pc?Rb(s,t):(function(o,c){const m=$w(o,c),g=qv(m)+qv(o.Pe);return mf(m)&&mf(o.Pe)?wb(g):Yf(o.serializer,g)})(s,t)}function qw(s,t,a){return s instanceof mc?Nb(s,t):s instanceof pc?Rb(s,t):a}function $w(s,t){return s instanceof _f?(function(r){return mf(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(t)?t:{integerValue:0}:null}class vf extends Sc{}class mc extends Sc{constructor(t){super(),this.elements=t}}function Nb(s,t){const a=Cb(t);for(const r of s.elements)a.some((o=>la(o,r)))||a.push(r);return{arrayValue:{values:a}}}class pc extends Sc{constructor(t){super(),this.elements=t}}function Rb(s,t){let a=Cb(t);for(const r of s.elements)a=a.filter((o=>!la(o,r)));return{arrayValue:{values:a}}}class _f extends Sc{constructor(t,a){super(),this.serializer=t,this.Pe=a}}function qv(s){return vt(s.integerValue||s.doubleValue)}function Cb(s){return Gf(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function Gw(s,t){return s.field.isEqual(t.field)&&(function(r,o){return r instanceof mc&&o instanceof mc||r instanceof pc&&o instanceof pc?Tr(r.elements,o.elements,la):r instanceof _f&&o instanceof _f?la(r.Pe,o.Pe):r instanceof vf&&o instanceof vf})(s.transform,t.transform)}class Es{constructor(t,a){this.updateTime=t,this.exists=a}static none(){return new Es}static exists(t){return new Es(void 0,t)}static updateTime(t){return new Es(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ec(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Xf{}function jb(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Qw(s.key,Es.none()):new Zf(s.key,s.data,Es.none());{const a=s.data,r=sa.empty();let o=new $t(Wt.comparator);for(let c of t.fields)if(!o.has(c)){let m=a.field(c);m===null&&c.length>1&&(c=c.popLast(),m=a.field(c)),m===null?r.delete(c):r.set(c,m),o=o.add(c)}return new Ac(s.key,r,new Oi(o.toArray()),Es.none())}}function Kw(s,t,a){s instanceof Zf?(function(o,c,m){const g=o.value.clone(),y=Gv(o.fieldTransforms,c,m.transformResults);g.setAll(y),c.convertToFoundDocument(m.version,g).setHasCommittedMutations()})(s,t,a):s instanceof Ac?(function(o,c,m){if(!ec(o.precondition,c))return void c.convertToUnknownDocument(m.version);const g=Gv(o.fieldTransforms,c,m.transformResults),y=c.data;y.setAll(Db(o)),y.setAll(g),c.convertToFoundDocument(m.version,y).setHasCommittedMutations()})(s,t,a):(function(o,c,m){c.convertToNoDocument(m.version).setHasCommittedMutations()})(0,t,a)}function Kl(s,t,a,r){return s instanceof Zf?(function(c,m,g,y){if(!ec(c.precondition,m))return g;const v=c.value.clone(),E=Kv(c.fieldTransforms,y,m);return v.setAll(E),m.convertToFoundDocument(m.version,v).setHasLocalMutations(),null})(s,t,a,r):s instanceof Ac?(function(c,m,g,y){if(!ec(c.precondition,m))return g;const v=Kv(c.fieldTransforms,y,m),E=m.data;return E.setAll(Db(c)),E.setAll(v),m.convertToFoundDocument(m.version,E).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((S=>S.field)))})(s,t,a,r):(function(c,m,g){return ec(c.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):g})(s,t,a)}function $v(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Tr(r,o,((c,m)=>Gw(c,m)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Zf extends Xf{constructor(t,a,r,o=[]){super(),this.key=t,this.value=a,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ac extends Xf{constructor(t,a,r,o,c=[]){super(),this.key=t,this.data=a,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Db(s){const t=new Map;return s.fieldMask.fields.forEach((a=>{if(!a.isEmpty()){const r=s.data.field(a);t.set(a,r)}})),t}function Gv(s,t,a){const r=new Map;ft(s.length===a.length);for(let o=0;o<a.length;o++){const c=s[o],m=c.transform,g=t.data.field(c.field);r.set(c.field,qw(m,g,a[o]))}return r}function Kv(s,t,a){const r=new Map;for(const o of s){const c=o.transform,m=a.data.field(o.field);r.set(o.field,Fw(c,m,t))}return r}class Qw extends Xf{constructor(t,a){super(),this.key=t,this.precondition=a,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yw{constructor(t,a,r,o){this.batchId=t,this.localWriteTime=a,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,a){const r=a.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(t.key)&&Kw(c,t,r[o])}}applyToLocalView(t,a){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(a=Kl(r,t,a,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(a=Kl(r,t,a,this.localWriteTime));return a}applyToLocalDocumentSet(t,a){const r=xb();return this.mutations.forEach((o=>{const c=t.get(o.key),m=c.overlayedDocument;let g=this.applyToLocalView(m,c.mutatedFields);g=a.has(o.key)?null:g;const y=jb(m,g);y!==null&&r.set(o.key,y),m.isValidDocument()||m.convertToNoDocument(Ae.min())})),r}keys(){return this.mutations.reduce(((t,a)=>t.add(a.key)),Pe())}isEqual(t){return this.batchId===t.batchId&&Tr(this.mutations,t.mutations,((a,r)=>$v(a,r)))&&Tr(this.baseMutations,t.baseMutations,((a,r)=>$v(a,r)))}}class Xw{constructor(t,a){this.largestBatchId=t,this.mutation=a}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Zw{constructor(t,a){this.count=t,this.unchangedNames=a}}var xt,Ue;function Ib(s){if(s===void 0)return za("GRPC error has no .code"),le.UNKNOWN;switch(s){case xt.OK:return le.OK;case xt.CANCELLED:return le.CANCELLED;case xt.UNKNOWN:return le.UNKNOWN;case xt.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case xt.INTERNAL:return le.INTERNAL;case xt.UNAVAILABLE:return le.UNAVAILABLE;case xt.UNAUTHENTICATED:return le.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case xt.NOT_FOUND:return le.NOT_FOUND;case xt.ALREADY_EXISTS:return le.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return le.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case xt.ABORTED:return le.ABORTED;case xt.OUT_OF_RANGE:return le.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return le.UNIMPLEMENTED;case xt.DATA_LOSS:return le.DATA_LOSS;default:return we()}}(Ue=xt||(xt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";function Jw(){return new TextEncoder}const Ww=new _s([4294967295,4294967295],0);function Qv(s){const t=Jw().encode(s),a=new sb;return a.update(t),new Uint8Array(a.digest())}function Yv(s){const t=new DataView(s.buffer),a=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new _s([a,r],0),new _s([o,c],0)]}class Jf{constructor(t,a,r){if(this.bitmap=t,this.padding=a,this.hashCount=r,a<0||a>=8)throw new Fl(`Invalid padding: ${a}`);if(r<0)throw new Fl(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Fl(`Invalid hash count: ${r}`);if(t.length===0&&a!==0)throw new Fl(`Invalid padding when bitmap length is 0: ${a}`);this.Ie=8*t.length-a,this.Te=_s.fromNumber(this.Ie)}Ee(t,a,r){let o=t.add(a.multiply(_s.fromNumber(r)));return o.compare(Ww)===1&&(o=new _s([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const a=Qv(t),[r,o]=Yv(a);for(let c=0;c<this.hashCount;c++){const m=this.Ee(r,o,c);if(!this.de(m))return!1}return!0}static create(t,a,r){const o=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),m=new Jf(c,o,a);return r.forEach((g=>m.insert(g))),m}insert(t){if(this.Ie===0)return;const a=Qv(t),[r,o]=Yv(a);for(let c=0;c<this.hashCount;c++){const m=this.Ee(r,o,c);this.Ae(m)}}Ae(t){const a=Math.floor(t/8),r=t%8;this.bitmap[a]|=1<<r}}class Fl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xc{constructor(t,a,r,o,c){this.snapshotVersion=t,this.targetChanges=a,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,a,r){const o=new Map;return o.set(t,lo.createSynthesizedTargetChangeForCurrentChange(t,a,r)),new xc(Ae.min(),o,new _t(Ke),zi(),Pe())}}class lo{constructor(t,a,r,o,c){this.resumeToken=t,this.current=a,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,a,r){return new lo(r,a,Pe(),Pe(),Pe())}}class tc{constructor(t,a,r,o){this.Re=t,this.removedTargetIds=a,this.key=r,this.Ve=o}}class Mb{constructor(t,a){this.targetId=t,this.me=a}}class Ob{constructor(t,a,r=Gt.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=a,this.resumeToken=r,this.cause=o}}class Xv{constructor(){this.fe=0,this.ge=Jv(),this.pe=Gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Pe(),a=Pe(),r=Pe();return this.ge.forEach(((o,c)=>{switch(c){case 0:t=t.add(o);break;case 2:a=a.add(o);break;case 1:r=r.add(o);break;default:we()}})),new lo(this.pe,this.ye,t,a,r)}Ce(){this.we=!1,this.ge=Jv()}Fe(t,a){this.we=!0,this.ge=this.ge.insert(t,a)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ft(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class e1{constructor(t){this.Le=t,this.Be=new Map,this.ke=zi(),this.qe=Zv(),this.Qe=new _t(Ke)}Ke(t){for(const a of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(a,t.Ve):this.Ue(a,t.key,t.Ve);for(const a of t.removedTargetIds)this.Ue(a,t.key,t.Ve)}We(t){this.forEachTarget(t,(a=>{const r=this.Ge(a);switch(t.state){case 0:this.ze(a)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(a);break;case 3:this.ze(a)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(a)&&(this.je(a),r.De(t.resumeToken));break;default:we()}}))}forEachTarget(t,a){t.targetIds.length>0?t.targetIds.forEach(a):this.Be.forEach(((r,o)=>{this.ze(o)&&a(o)}))}He(t){const a=t.targetId,r=t.me.count,o=this.Je(a);if(o){const c=o.target;if(gf(c))if(r===0){const m=new be(c.path);this.Ue(a,m,Jt.newNoDocument(m,Ae.min()))}else ft(r===1);else{const m=this.Ye(a);if(m!==r){const g=this.Ze(t),y=g?this.Xe(g,t,m):1;if(y!==0){this.je(a);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(a,v)}}}}}Ze(t){const a=t.me.unchangedNames;if(!a||!a.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=a;let m,g;try{m=Ss(r).toUint8Array()}catch(y){if(y instanceof fb)return Er("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new Jf(m,o,c)}catch(y){return Er(y instanceof Fl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.Ie===0?null:g}Xe(t,a,r){return a.me.count===r-this.nt(t,a.targetId)?0:2}nt(t,a){const r=this.Le.getRemoteKeysForTarget(a);let o=0;return r.forEach((c=>{const m=this.Le.tt(),g=`projects/${m.projectId}/databases/${m.database}/documents/${c.path.canonicalString()}`;t.mightContain(g)||(this.Ue(a,c,null),o++)})),o}rt(t){const a=new Map;this.Be.forEach(((c,m)=>{const g=this.Je(m);if(g){if(c.current&&gf(g.target)){const y=new be(g.target.path);this.ke.get(y)!==null||this.it(m,y)||this.Ue(m,y,Jt.newNoDocument(y,t))}c.be&&(a.set(m,c.ve()),c.Ce())}}));let r=Pe();this.qe.forEach(((c,m)=>{let g=!0;m.forEachWhile((y=>{const v=this.Je(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(r=r.add(c))})),this.ke.forEach(((c,m)=>m.setReadTime(t)));const o=new xc(t,a,this.Qe,this.ke,r);return this.ke=zi(),this.qe=Zv(),this.Qe=new _t(Ke),o}$e(t,a){if(!this.ze(t))return;const r=this.it(t,a.key)?2:0;this.Ge(t).Fe(a.key,r),this.ke=this.ke.insert(a.key,a),this.qe=this.qe.insert(a.key,this.st(a.key).add(t))}Ue(t,a,r){if(!this.ze(t))return;const o=this.Ge(t);this.it(t,a)?o.Fe(a,1):o.Me(a),this.qe=this.qe.insert(a,this.st(a).delete(t)),r&&(this.ke=this.ke.insert(a,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const a=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+a.addedDocuments.size-a.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let a=this.Be.get(t);return a||(a=new Xv,this.Be.set(t,a)),a}st(t){let a=this.qe.get(t);return a||(a=new $t(Ke),this.qe=this.qe.insert(t,a)),a}ze(t){const a=this.Je(t)!==null;return a||me("WatchChangeAggregator","Detected inactive target",t),a}Je(t){const a=this.Be.get(t);return a&&a.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Xv),this.Le.getRemoteKeysForTarget(t).forEach((a=>{this.Ue(t,a,null)}))}it(t,a){return this.Le.getRemoteKeysForTarget(t).has(a)}}function Zv(){return new _t(be.comparator)}function Jv(){return new _t(be.comparator)}const t1={asc:"ASCENDING",desc:"DESCENDING"},n1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a1={and:"AND",or:"OR"};class i1{constructor(t,a){this.databaseId=t,this.useProto3Json=a}}function bf(s,t){return s.useProto3Json||bc(t)?t:{value:t}}function Ef(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Vb(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function gr(s){return ft(!!s),Ae.fromTimestamp((function(a){const r=Bi(a);return new jt(r.seconds,r.nanos)})(s))}function Lb(s,t){return Tf(s,t).canonicalString()}function Tf(s,t){const a=(function(o){return new ot(["projects",o.projectId,"databases",o.database])})(s).child("documents");return t===void 0?a:a.child(t)}function Ub(s){const t=ot.fromString(s);return ft(Hb(t)),t}function Kd(s,t){const a=Ub(t);if(a.get(1)!==s.databaseId.projectId)throw new pe(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+a.get(1)+" vs "+s.databaseId.projectId);if(a.get(3)!==s.databaseId.database)throw new pe(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+a.get(3)+" vs "+s.databaseId.database);return new be(Bb(a))}function kb(s,t){return Lb(s.databaseId,t)}function s1(s){const t=Ub(s);return t.length===4?ot.emptyPath():Bb(t)}function Wv(s){return new ot(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Bb(s){return ft(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function r1(s,t){let a;if("targetChange"in t){t.targetChange;const r=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:we()})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],c=(function(v,E){return v.useProto3Json?(ft(E===void 0||typeof E=="string"),Gt.fromBase64String(E||"")):(ft(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Gt.fromUint8Array(E||new Uint8Array))})(s,t.targetChange.resumeToken),m=t.targetChange.cause,g=m&&(function(v){const E=v.code===void 0?le.UNKNOWN:Ib(v.code);return new pe(E,v.message||"")})(m);a=new Ob(r,o,c,g||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=Kd(s,r.document.name),c=gr(r.document.updateTime),m=r.document.createTime?gr(r.document.createTime):Ae.min(),g=new sa({mapValue:{fields:r.document.fields}}),y=Jt.newFoundDocument(o,c,m,g),v=r.targetIds||[],E=r.removedTargetIds||[];a=new tc(v,E,y.key,y)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=Kd(s,r.document),c=r.readTime?gr(r.readTime):Ae.min(),m=Jt.newNoDocument(o,c),g=r.removedTargetIds||[];a=new tc([],g,m.key,m)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=Kd(s,r.document),c=r.removedTargetIds||[];a=new tc([],c,o,null)}else{if(!("filter"in t))return we();{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,m=new Zw(o,c),g=r.targetId;a=new Mb(g,m)}}return a}function l1(s,t){return{documents:[kb(s,t.path)]}}function o1(s,t){const a={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,a.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),a.structuredQuery.from=[{collectionId:r.lastSegment()}]),a.parent=kb(s,o);const c=(function(v){if(v.length!==0)return Pb($n.create(v,"and"))})(t.filters);c&&(a.structuredQuery.where=c);const m=(function(v){if(v.length!==0)return v.map((E=>(function(C){return{field:fr(C.field),direction:h1(C.dir)}})(E)))})(t.orderBy);m&&(a.structuredQuery.orderBy=m);const g=bf(s,t.limit);return g!==null&&(a.structuredQuery.limit=g),t.startAt&&(a.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(t.startAt)),t.endAt&&(a.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(t.endAt)),{_t:a,parent:o}}function u1(s){let t=s1(s.parent);const a=s.structuredQuery,r=a.from?a.from.length:0;let o=null;if(r>0){ft(r===1);const E=a.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let c=[];a.where&&(c=(function(S){const C=zb(S);return C instanceof $n&&gb(C)?C.getFilters():[C]})(a.where));let m=[];a.orderBy&&(m=(function(S){return S.map((C=>(function(B){return new to(mr(B.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(C)))})(a.orderBy));let g=null;a.limit&&(g=(function(S){let C;return C=typeof S=="object"?S.value:S,bc(C)?null:C})(a.limit));let y=null;a.startAt&&(y=(function(S){const C=!!S.before,U=S.values||[];return new dc(U,C)})(a.startAt));let v=null;return a.endAt&&(v=(function(S){const C=!S.before,U=S.values||[];return new dc(U,C)})(a.endAt)),Mw(t,o,m,c,g,"F",y,v)}function c1(s,t){const a=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}})(t.purpose);return a==null?null:{"goog-listen-tags":a}}function zb(s){return s.unaryFilter!==void 0?(function(a){switch(a.unaryFilter.op){case"IS_NAN":const r=mr(a.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=mr(a.unaryFilter.field);return wt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=mr(a.unaryFilter.field);return wt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=mr(a.unaryFilter.field);return wt.create(m,"!=",{nullValue:"NULL_VALUE"});default:return we()}})(s):s.fieldFilter!==void 0?(function(a){return wt.create(mr(a.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}})(a.fieldFilter.op),a.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(a){return $n.create(a.compositeFilter.filters.map((r=>zb(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we()}})(a.compositeFilter.op))})(s):we()}function h1(s){return t1[s]}function d1(s){return n1[s]}function f1(s){return a1[s]}function fr(s){return{fieldPath:s.canonicalString()}}function mr(s){return Wt.fromServerFormat(s.fieldPath)}function Pb(s){return s instanceof wt?(function(a){if(a.op==="=="){if(Bv(a.value))return{unaryFilter:{field:fr(a.field),op:"IS_NAN"}};if(kv(a.value))return{unaryFilter:{field:fr(a.field),op:"IS_NULL"}}}else if(a.op==="!="){if(Bv(a.value))return{unaryFilter:{field:fr(a.field),op:"IS_NOT_NAN"}};if(kv(a.value))return{unaryFilter:{field:fr(a.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fr(a.field),op:d1(a.op),value:a.value}}})(s):s instanceof $n?(function(a){const r=a.getFilters().map((o=>Pb(o)));return r.length===1?r[0]:{compositeFilter:{op:f1(a.op),filters:r}}})(s):we()}function Hb(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class Vi{constructor(t,a,r,o,c=Ae.min(),m=Ae.min(),g=Gt.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=a,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(t){return new Vi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,a){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,a,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class m1{constructor(t){this.ct=t}}function p1(s){const t=u1({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?fc(t,t.limit,"L"):t}class g1{constructor(){this.un=new y1}addToCollectionParentIndex(t,a){return this.un.add(a),ne.resolve()}getCollectionParents(t,a){return ne.resolve(this.un.getEntries(a))}addFieldIndex(t,a){return ne.resolve()}deleteFieldIndex(t,a){return ne.resolve()}deleteAllFieldIndexes(t){return ne.resolve()}createTargetIndexes(t,a){return ne.resolve()}getDocumentsMatchingTarget(t,a){return ne.resolve(null)}getIndexType(t,a){return ne.resolve(0)}getFieldIndexes(t,a){return ne.resolve([])}getNextCollectionGroupToUpdate(t){return ne.resolve(null)}getMinOffset(t,a){return ne.resolve(ki.min())}getMinOffsetFromCollectionGroup(t,a){return ne.resolve(ki.min())}updateCollectionGroup(t,a,r){return ne.resolve()}updateIndexEntries(t,a){return ne.resolve()}}class y1{constructor(){this.index={}}add(t){const a=t.lastSegment(),r=t.popLast(),o=this.index[a]||new $t(ot.comparator),c=!o.has(r);return this.index[a]=o.add(r),c}has(t){const a=t.lastSegment(),r=t.popLast(),o=this.index[a];return o&&o.has(r)}getEntries(t){return(this.index[t]||new $t(ot.comparator)).toArray()}}class xr{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new xr(0)}static kn(){return new xr(-1)}}class v1{constructor(){this.changes=new Or((t=>t.toString()),((t,a)=>t.isEqual(a))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,a){this.assertNotApplied(),this.changes.set(t,Jt.newInvalidDocument(t).setReadTime(a))}getEntry(t,a){this.assertNotApplied();const r=this.changes.get(a);return r!==void 0?ne.resolve(r):this.getFromCache(t,a)}getEntries(t,a){return this.getAllFromCache(t,a)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class _1{constructor(t,a){this.overlayedDocument=t,this.mutatedFields=a}}class b1{constructor(t,a,r,o){this.remoteDocumentCache=t,this.mutationQueue=a,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,a){let r=null;return this.documentOverlayCache.getOverlay(t,a).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,a)))).next((o=>(r!==null&&Kl(r.mutation,o,Oi.empty(),jt.now()),o)))}getDocuments(t,a){return this.remoteDocumentCache.getEntries(t,a).next((r=>this.getLocalViewOfDocuments(t,r,Pe()).next((()=>r))))}getLocalViewOfDocuments(t,a,r=Pe()){const o=ys();return this.populateOverlays(t,o,a).next((()=>this.computeViews(t,a,o,r).next((c=>{let m=Hl();return c.forEach(((g,y)=>{m=m.insert(g,y.overlayedDocument)})),m}))))}getOverlayedDocuments(t,a){const r=ys();return this.populateOverlays(t,r,a).next((()=>this.computeViews(t,a,r,Pe())))}populateOverlays(t,a,r){const o=[];return r.forEach((c=>{a.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(t,o).next((c=>{c.forEach(((m,g)=>{a.set(m,g)}))}))}computeViews(t,a,r,o){let c=zi();const m=Gl(),g=(function(){return Gl()})();return a.forEach(((y,v)=>{const E=r.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof Ac)?c=c.insert(v.key,v):E!==void 0?(m.set(v.key,E.mutation.getFieldMask()),Kl(E.mutation,v,E.mutation.getFieldMask(),jt.now())):m.set(v.key,Oi.empty())})),this.recalculateAndSaveOverlays(t,c).next((y=>(y.forEach(((v,E)=>m.set(v,E))),a.forEach(((v,E)=>{var S;return g.set(v,new _1(E,(S=m.get(v))!==null&&S!==void 0?S:null))})),g)))}recalculateAndSaveOverlays(t,a){const r=Gl();let o=new _t(((m,g)=>m-g)),c=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,a).next((m=>{for(const g of m)g.keys().forEach((y=>{const v=a.get(y);if(v===null)return;let E=r.get(y)||Oi.empty();E=g.applyToLocalView(v,E),r.set(y,E);const S=(o.get(g.batchId)||Pe()).add(y);o=o.insert(g.batchId,S)}))})).next((()=>{const m=[],g=o.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),v=y.key,E=y.value,S=xb();E.forEach((C=>{if(!c.has(C)){const U=jb(a.get(C),r.get(C));U!==null&&S.set(C,U),c=c.add(C)}})),m.push(this.documentOverlayCache.saveOverlays(t,v,S))}return ne.waitFor(m)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,a){return this.remoteDocumentCache.getEntries(t,a).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,a,r,o){return(function(m){return be.isDocumentKey(m.path)&&m.collectionGroup===null&&m.filters.length===0})(a)?this.getDocumentsMatchingDocumentQuery(t,a.path):Eb(a)?this.getDocumentsMatchingCollectionGroupQuery(t,a,r,o):this.getDocumentsMatchingCollectionQuery(t,a,r,o)}getNextDocuments(t,a,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,a,r,o).next((c=>{const m=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,a,r.largestBatchId,o-c.size):ne.resolve(ys());let g=-1,y=c;return m.next((v=>ne.forEach(v,((E,S)=>(g<S.largestBatchId&&(g=S.largestBatchId),c.get(E)?ne.resolve():this.remoteDocumentCache.getEntry(t,E).next((C=>{y=y.insert(E,C)}))))).next((()=>this.populateOverlays(t,v,c))).next((()=>this.computeViews(t,y,v,Pe()))).next((E=>({batchId:g,changes:kw(E)})))))}))}getDocumentsMatchingDocumentQuery(t,a){return this.getDocument(t,new be(a)).next((r=>{let o=Hl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,a,r,o){const c=a.collectionGroup;let m=Hl();return this.indexManager.getCollectionParents(t,c).next((g=>ne.forEach(g,(y=>{const v=(function(S,C){return new Mr(C,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(a,y.child(c));return this.getDocumentsMatchingCollectionQuery(t,v,r,o).next((E=>{E.forEach(((S,C)=>{m=m.insert(S,C)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(t,a,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(t,a.path,r.largestBatchId).next((m=>(c=m,this.remoteDocumentCache.getDocumentsMatchingQuery(t,a,r,c,o)))).next((m=>{c.forEach(((y,v)=>{const E=v.getKey();m.get(E)===null&&(m=m.insert(E,Jt.newInvalidDocument(E)))}));let g=Hl();return m.forEach(((y,v)=>{const E=c.get(y);E!==void 0&&Kl(E.mutation,v,Oi.empty(),jt.now()),Tc(a,v)&&(g=g.insert(y,v))})),g}))}}class E1{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,a){return ne.resolve(this.hr.get(a))}saveBundleMetadata(t,a){return this.hr.set(a.id,(function(o){return{id:o.id,version:o.version,createTime:gr(o.createTime)}})(a)),ne.resolve()}getNamedQuery(t,a){return ne.resolve(this.Pr.get(a))}saveNamedQuery(t,a){return this.Pr.set(a.name,(function(o){return{name:o.name,query:p1(o.bundledQuery),readTime:gr(o.readTime)}})(a)),ne.resolve()}}class T1{constructor(){this.overlays=new _t(be.comparator),this.Ir=new Map}getOverlay(t,a){return ne.resolve(this.overlays.get(a))}getOverlays(t,a){const r=ys();return ne.forEach(a,(o=>this.getOverlay(t,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(t,a,r){return r.forEach(((o,c)=>{this.ht(t,a,c)})),ne.resolve()}removeOverlaysForBatchId(t,a,r){const o=this.Ir.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.Ir.delete(r)),ne.resolve()}getOverlaysForCollection(t,a,r){const o=ys(),c=a.length+1,m=new be(a.child("")),g=this.overlays.getIteratorFrom(m);for(;g.hasNext();){const y=g.getNext().value,v=y.getKey();if(!a.isPrefixOf(v.path))break;v.path.length===c&&y.largestBatchId>r&&o.set(y.getKey(),y)}return ne.resolve(o)}getOverlaysForCollectionGroup(t,a,r,o){let c=new _t(((v,E)=>v-E));const m=this.overlays.getIterator();for(;m.hasNext();){const v=m.getNext().value;if(v.getKey().getCollectionGroup()===a&&v.largestBatchId>r){let E=c.get(v.largestBatchId);E===null&&(E=ys(),c=c.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const g=ys(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,E)=>g.set(v,E))),!(g.size()>=o)););return ne.resolve(g)}ht(t,a,r){const o=this.overlays.get(r.key);if(o!==null){const m=this.Ir.get(o.largestBatchId).delete(r.key);this.Ir.set(o.largestBatchId,m)}this.overlays=this.overlays.insert(r.key,new Xw(a,r));let c=this.Ir.get(a);c===void 0&&(c=Pe(),this.Ir.set(a,c)),this.Ir.set(a,c.add(r.key))}}class S1{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(t){return ne.resolve(this.sessionToken)}setSessionToken(t,a){return this.sessionToken=a,ne.resolve()}}class Wf{constructor(){this.Tr=new $t(Lt.Er),this.dr=new $t(Lt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,a){const r=new Lt(t,a);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(t,a){t.forEach((r=>this.addReference(r,a)))}removeReference(t,a){this.Vr(new Lt(t,a))}mr(t,a){t.forEach((r=>this.removeReference(r,a)))}gr(t){const a=new be(new ot([])),r=new Lt(a,t),o=new Lt(a,t+1),c=[];return this.dr.forEachInRange([r,o],(m=>{this.Vr(m),c.push(m.key)})),c}pr(){this.Tr.forEach((t=>this.Vr(t)))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const a=new be(new ot([])),r=new Lt(a,t),o=new Lt(a,t+1);let c=Pe();return this.dr.forEachInRange([r,o],(m=>{c=c.add(m.key)})),c}containsKey(t){const a=new Lt(t,0),r=this.Tr.firstAfterOrEqual(a);return r!==null&&t.isEqual(r.key)}}class Lt{constructor(t,a){this.key=t,this.wr=a}static Er(t,a){return be.comparator(t.key,a.key)||Ke(t.wr,a.wr)}static Ar(t,a){return Ke(t.wr,a.wr)||be.comparator(t.key,a.key)}}class A1{constructor(t,a){this.indexManager=t,this.referenceDelegate=a,this.mutationQueue=[],this.Sr=1,this.br=new $t(Lt.Er)}checkEmpty(t){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(t,a,r,o){const c=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new Yw(c,a,r,o);this.mutationQueue.push(m);for(const g of o)this.br=this.br.add(new Lt(g.key,c)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return ne.resolve(m)}lookupMutationBatch(t,a){return ne.resolve(this.Dr(a))}getNextMutationBatchAfterBatchId(t,a){const r=a+1,o=this.vr(r),c=o<0?0:o;return ne.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,a){const r=new Lt(a,0),o=new Lt(a,Number.POSITIVE_INFINITY),c=[];return this.br.forEachInRange([r,o],(m=>{const g=this.Dr(m.wr);c.push(g)})),ne.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,a){let r=new $t(Ke);return a.forEach((o=>{const c=new Lt(o,0),m=new Lt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([c,m],(g=>{r=r.add(g.wr)}))})),ne.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(t,a){const r=a.path,o=r.length+1;let c=r;be.isDocumentKey(c)||(c=c.child(""));const m=new Lt(new be(c),0);let g=new $t(Ke);return this.br.forEachWhile((y=>{const v=y.key.path;return!!r.isPrefixOf(v)&&(v.length===o&&(g=g.add(y.wr)),!0)}),m),ne.resolve(this.Cr(g))}Cr(t){const a=[];return t.forEach((r=>{const o=this.Dr(r);o!==null&&a.push(o)})),a}removeMutationBatch(t,a){ft(this.Fr(a.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ne.forEach(a.mutations,(o=>{const c=new Lt(o.key,a.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.br=r}))}On(t){}containsKey(t,a){const r=new Lt(a,0),o=this.br.firstAfterOrEqual(r);return ne.resolve(a.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,ne.resolve()}Fr(t,a){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const a=this.vr(t);return a<0||a>=this.mutationQueue.length?null:this.mutationQueue[a]}}class x1{constructor(t){this.Mr=t,this.docs=(function(){return new _t(be.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,a){const r=a.key,o=this.docs.get(r),c=o?o.size:0,m=this.Mr(a);return this.docs=this.docs.insert(r,{document:a.mutableCopy(),size:m}),this.size+=m-c,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const a=this.docs.get(t);a&&(this.docs=this.docs.remove(t),this.size-=a.size)}getEntry(t,a){const r=this.docs.get(a);return ne.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(a))}getEntries(t,a){let r=zi();return a.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():Jt.newInvalidDocument(o))})),ne.resolve(r)}getDocumentsMatchingQuery(t,a,r,o){let c=zi();const m=a.path,g=new be(m.child("")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:v,value:{document:E}}=y.getNext();if(!m.isPrefixOf(v.path))break;v.path.length>m.length+1||mw(fw(E),r)<=0||(o.has(E.key)||Tc(a,E))&&(c=c.insert(E.key,E.mutableCopy()))}return ne.resolve(c)}getAllFromCollectionGroup(t,a,r,o){we()}Or(t,a){return ne.forEach(this.docs,(r=>a(r)))}newChangeBuffer(t){return new w1(this)}getSize(t){return ne.resolve(this.size)}}class w1 extends v1{constructor(t){super(),this.cr=t}applyChanges(t){const a=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?a.push(this.cr.addEntry(t,o)):this.cr.removeEntry(r)})),ne.waitFor(a)}getFromCache(t,a){return this.cr.getEntry(t,a)}getAllFromCache(t,a){return this.cr.getEntries(t,a)}}class N1{constructor(t){this.persistence=t,this.Nr=new Or((a=>Kf(a)),Qf),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wf,this.targetCount=0,this.kr=xr.Bn()}forEachTarget(t,a){return this.Nr.forEach(((r,o)=>a(o))),ne.resolve()}getLastRemoteSnapshotVersion(t){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ne.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(t,a,r){return r&&(this.lastRemoteSnapshotVersion=r),a>this.Lr&&(this.Lr=a),ne.resolve()}Kn(t){this.Nr.set(t.target,t);const a=t.targetId;a>this.highestTargetId&&(this.kr=new xr(a),this.highestTargetId=a),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,a){return this.Kn(a),this.targetCount+=1,ne.resolve()}updateTargetData(t,a){return this.Kn(a),ne.resolve()}removeTargetData(t,a){return this.Nr.delete(a.target),this.Br.gr(a.targetId),this.targetCount-=1,ne.resolve()}removeTargets(t,a,r){let o=0;const c=[];return this.Nr.forEach(((m,g)=>{g.sequenceNumber<=a&&r.get(g.targetId)===null&&(this.Nr.delete(m),c.push(this.removeMatchingKeysForTargetId(t,g.targetId)),o++)})),ne.waitFor(c).next((()=>o))}getTargetCount(t){return ne.resolve(this.targetCount)}getTargetData(t,a){const r=this.Nr.get(a)||null;return ne.resolve(r)}addMatchingKeys(t,a,r){return this.Br.Rr(a,r),ne.resolve()}removeMatchingKeys(t,a,r){this.Br.mr(a,r);const o=this.persistence.referenceDelegate,c=[];return o&&a.forEach((m=>{c.push(o.markPotentiallyOrphaned(t,m))})),ne.waitFor(c)}removeMatchingKeysForTargetId(t,a){return this.Br.gr(a),ne.resolve()}getMatchingKeysForTargetId(t,a){const r=this.Br.yr(a);return ne.resolve(r)}containsKey(t,a){return ne.resolve(this.Br.containsKey(a))}}class R1{constructor(t,a){this.qr={},this.overlays={},this.Qr=new Ff(0),this.Kr=!1,this.Kr=!0,this.$r=new S1,this.referenceDelegate=t(this),this.Ur=new N1(this),this.indexManager=new g1,this.remoteDocumentCache=(function(o){return new x1(o)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new m1(a),this.Gr=new E1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let a=this.overlays[t.toKey()];return a||(a=new T1,this.overlays[t.toKey()]=a),a}getMutationQueue(t,a){let r=this.qr[t.toKey()];return r||(r=new A1(a,this.referenceDelegate),this.qr[t.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,a,r){me("MemoryPersistence","Starting transaction:",t);const o=new C1(this.Qr.next());return this.referenceDelegate.zr(),r(o).next((c=>this.referenceDelegate.jr(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Hr(t,a){return ne.or(Object.values(this.qr).map((r=>()=>r.containsKey(t,a))))}}class C1 extends gw{constructor(t){super(),this.currentSequenceNumber=t}}class em{constructor(t){this.persistence=t,this.Jr=new Wf,this.Yr=null}static Zr(t){return new em(t)}get Xr(){if(this.Yr)return this.Yr;throw we()}addReference(t,a,r){return this.Jr.addReference(r,a),this.Xr.delete(r.toString()),ne.resolve()}removeReference(t,a,r){return this.Jr.removeReference(r,a),this.Xr.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(t,a){return this.Xr.add(a.toString()),ne.resolve()}removeTarget(t,a){this.Jr.gr(a.targetId).forEach((o=>this.Xr.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,a.targetId).next((o=>{o.forEach((c=>this.Xr.add(c.toString())))})).next((()=>r.removeTargetData(t,a)))}zr(){this.Yr=new Set}jr(t){const a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Xr,(r=>{const o=be.fromPath(r);return this.ei(t,o).next((c=>{c||a.removeEntry(o,Ae.min())}))})).next((()=>(this.Yr=null,a.apply(t))))}updateLimboDocument(t,a){return this.ei(t,a).next((r=>{r?this.Xr.delete(a.toString()):this.Xr.add(a.toString())}))}Wr(t){return 0}ei(t,a){return ne.or([()=>ne.resolve(this.Jr.containsKey(a)),()=>this.persistence.getTargetCache().containsKey(t,a),()=>this.persistence.Hr(t,a)])}}class tm{constructor(t,a,r,o){this.targetId=t,this.fromCache=a,this.$i=r,this.Ui=o}static Wi(t,a){let r=Pe(),o=Pe();for(const c of a.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new tm(t,a.fromCache,r,o)}}class j1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class D1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return zA()?8:yw(kA())>0?6:4})()}initialize(t,a){this.Ji=t,this.indexManager=a,this.Gi=!0}getDocumentsMatchingQuery(t,a,r,o){const c={result:null};return this.Yi(t,a).next((m=>{c.result=m})).next((()=>{if(!c.result)return this.Zi(t,a,o,r).next((m=>{c.result=m}))})).next((()=>{if(c.result)return;const m=new j1;return this.Xi(t,a,m).next((g=>{if(c.result=g,this.zi)return this.es(t,a,m,g.size)}))})).next((()=>c.result))}es(t,a,r,o){return r.documentReadCount<this.ji?(zl()<=ze.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",dr(a),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ne.resolve()):(zl()<=ze.DEBUG&&me("QueryEngine","Query:",dr(a),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.Hi*o?(zl()<=ze.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",dr(a),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ra(a))):ne.resolve())}Yi(t,a){if(Fv(a))return ne.resolve(null);let r=ra(a);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(a.limit!==null&&o===1&&(a=fc(a,null,"F"),r=ra(a)),this.indexManager.getDocumentsMatchingTarget(t,r).next((c=>{const m=Pe(...c);return this.Ji.getDocuments(t,m).next((g=>this.indexManager.getMinOffset(t,r).next((y=>{const v=this.ts(a,g);return this.ns(a,v,m,y.readTime)?this.Yi(t,fc(a,null,"F")):this.rs(t,v,a,y)}))))})))))}Zi(t,a,r,o){return Fv(a)||o.isEqual(Ae.min())?ne.resolve(null):this.Ji.getDocuments(t,r).next((c=>{const m=this.ts(a,c);return this.ns(a,m,r,o)?ne.resolve(null):(zl()<=ze.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),dr(a)),this.rs(t,m,a,dw(o,-1)).next((g=>g)))}))}ts(t,a){let r=new $t(Sb(t));return a.forEach(((o,c)=>{Tc(t,c)&&(r=r.add(c))})),r}ns(t,a,r,o){if(t.limit===null)return!1;if(r.size!==a.size)return!0;const c=t.limitType==="F"?a.last():a.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Xi(t,a,r){return zl()<=ze.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",dr(a)),this.Ji.getDocumentsMatchingQuery(t,a,ki.min(),r)}rs(t,a,r,o){return this.Ji.getDocumentsMatchingQuery(t,r,o).next((c=>(a.forEach((m=>{c=c.insert(m.key,m)})),c)))}}class I1{constructor(t,a,r,o){this.persistence=t,this.ss=a,this.serializer=o,this.os=new _t(Ke),this._s=new Or((c=>Kf(c)),Qf),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(r)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new b1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(a=>t.collect(a,this.os)))}}function M1(s,t,a,r){return new I1(s,t,a,r)}async function Fb(s,t){const a=ke(s);return await a.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return a.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,a.ls(t),a.mutationQueue.getAllMutationBatches(r)))).next((c=>{const m=[],g=[];let y=Pe();for(const v of o){m.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}for(const v of c){g.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}return a.localDocuments.getDocuments(r,y).next((v=>({hs:v,removedBatchIds:m,addedBatchIds:g})))}))}))}function qb(s){const t=ke(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(a=>t.Ur.getLastRemoteSnapshotVersion(a)))}function O1(s,t){const a=ke(s),r=t.snapshotVersion;let o=a.os;return a.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const m=a.cs.newChangeBuffer({trackRemovals:!0});o=a.os;const g=[];t.targetChanges.forEach(((E,S)=>{const C=o.get(S);if(!C)return;g.push(a.Ur.removeMatchingKeys(c,E.removedDocuments,S).next((()=>a.Ur.addMatchingKeys(c,E.addedDocuments,S))));let U=C.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(S)!==null?U=U.withResumeToken(Gt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):E.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(E.resumeToken,r)),o=o.insert(S,U),(function(P,j,F){return P.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(C,U,E)&&g.push(a.Ur.updateTargetData(c,U))}));let y=zi(),v=Pe();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&g.push(a.persistence.referenceDelegate.updateLimboDocument(c,E))})),g.push(V1(c,m,t.documentUpdates).next((E=>{y=E.Ps,v=E.Is}))),!r.isEqual(Ae.min())){const E=a.Ur.getLastRemoteSnapshotVersion(c).next((S=>a.Ur.setTargetsMetadata(c,c.currentSequenceNumber,r)));g.push(E)}return ne.waitFor(g).next((()=>m.apply(c))).next((()=>a.localDocuments.getLocalViewOfDocuments(c,y,v))).next((()=>y))})).then((c=>(a.os=o,c)))}function V1(s,t,a){let r=Pe(),o=Pe();return a.forEach((c=>r=r.add(c))),t.getEntries(s,r).next((c=>{let m=zi();return a.forEach(((g,y)=>{const v=c.get(g);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(g)),y.isNoDocument()&&y.version.isEqual(Ae.min())?(t.removeEntry(g,y.readTime),m=m.insert(g,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(t.addEntry(y),m=m.insert(g,y)):me("LocalStore","Ignoring outdated watch update for ",g,". Current version:",v.version," Watch version:",y.version)})),{Ps:m,Is:o}}))}function L1(s,t){const a=ke(s);return a.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return a.Ur.getTargetData(r,t).next((c=>c?(o=c,ne.resolve(o)):a.Ur.allocateTargetId(r).next((m=>(o=new Vi(t,m,"TargetPurposeListen",r.currentSequenceNumber),a.Ur.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=a.os.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(a.os=a.os.insert(r.targetId,r),a._s.set(t,r.targetId)),r}))}async function Sf(s,t,a){const r=ke(s),o=r.os.get(t),c=a?"readwrite":"readwrite-primary";try{a||await r.persistence.runTransaction("Release target",c,(m=>r.persistence.referenceDelegate.removeTarget(m,o)))}catch(m){if(!so(m))throw m;me("LocalStore",`Failed to update sequence numbers for target ${t}: ${m}`)}r.os=r.os.remove(t),r._s.delete(o.target)}function e_(s,t,a){const r=ke(s);let o=Ae.min(),c=Pe();return r.persistence.runTransaction("Execute query","readwrite",(m=>(function(y,v,E){const S=ke(y),C=S._s.get(E);return C!==void 0?ne.resolve(S.os.get(C)):S.Ur.getTargetData(v,E)})(r,m,ra(t)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(m,g.targetId).next((y=>{c=y}))})).next((()=>r.ss.getDocumentsMatchingQuery(m,t,a?o:Ae.min(),a?c:Pe()))).next((g=>(U1(r,Vw(t),g),{documents:g,Ts:c})))))}function U1(s,t,a){let r=s.us.get(t)||Ae.min();a.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.us.set(t,r)}class t_{constructor(){this.activeTargetIds=Pw()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class k1{constructor(){this.so=new t_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,a,r){}addLocalQueryTarget(t,a=!0){return a&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,a,r){this.oo[t]=a}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new t_,Promise.resolve()}handleUserChange(t,a,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class B1{_o(t){}shutdown(){}}class n_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Qu=null;function Qd(){return Qu===null?Qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qu++,"0x"+Qu.toString(16)}const z1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class P1{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}const Xt="WebChannelConnection";class H1 extends class{constructor(a){this.databaseInfo=a,this.databaseId=a.databaseId;const r=a.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+a.host,this.vo=`projects/${o}/databases/${c}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${c}`}get Fo(){return!1}Mo(a,r,o,c,m){const g=Qd(),y=this.xo(a,r.toUriEncodedString());me("RestConnection",`Sending RPC '${a}' ${g}:`,y,o);const v={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(v,c,m),this.No(a,y,v,o).then((E=>(me("RestConnection",`Received RPC '${a}' ${g}: `,E),E)),(E=>{throw Er("RestConnection",`RPC '${a}' ${g} failed with error: `,E,"url: ",y,"request:",o),E}))}Lo(a,r,o,c,m,g){return this.Mo(a,r,o,c,m)}Oo(a,r,o){a["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ir})(),a["Content-Type"]="text/plain",this.databaseInfo.appId&&(a["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((c,m)=>a[m]=c)),o&&o.headers.forEach(((c,m)=>a[m]=c))}xo(a,r){const o=z1[a];return`${this.Do}/v1/${r}:${o}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,a,r,o){const c=Qd();return new Promise(((m,g)=>{const y=new rb;y.setWithCredentials(!0),y.listenOnce(lb.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Wu.NO_ERROR:const E=y.getResponseJson();me(Xt,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(E)),m(E);break;case Wu.TIMEOUT:me(Xt,`RPC '${t}' ${c} timed out`),g(new pe(le.DEADLINE_EXCEEDED,"Request time out"));break;case Wu.HTTP_ERROR:const S=y.getStatus();if(me(Xt,`RPC '${t}' ${c} failed with status:`,S,"response text:",y.getResponseText()),S>0){let C=y.getResponseJson();Array.isArray(C)&&(C=C[0]);const U=C?.error;if(U&&U.status&&U.message){const B=(function(j){const F=j.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(F)>=0?F:le.UNKNOWN})(U.status);g(new pe(B,U.message))}else g(new pe(le.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new pe(le.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{me(Xt,`RPC '${t}' ${c} completed.`)}}));const v=JSON.stringify(o);me(Xt,`RPC '${t}' ${c} sending request:`,o),y.send(a,"POST",v,r,15)}))}Bo(t,a,r){const o=Qd(),c=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],m=cb(),g=ub(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Oo(y.initMessageHeaders,a,r),y.encodeInitMessageHeaders=!0;const E=c.join("");me(Xt,`Creating RPC '${t}' stream ${o}: ${E}`,y);const S=m.createWebChannel(E,y);let C=!1,U=!1;const B=new P1({Io:j=>{U?me(Xt,`Not sending because RPC '${t}' stream ${o} is closed:`,j):(C||(me(Xt,`Opening RPC '${t}' stream ${o} transport.`),S.open(),C=!0),me(Xt,`RPC '${t}' stream ${o} sending:`,j),S.send(j))},To:()=>S.close()}),P=(j,F,ee)=>{j.listen(F,(se=>{try{ee(se)}catch(de){setTimeout((()=>{throw de}),0)}}))};return P(S,Pl.EventType.OPEN,(()=>{U||(me(Xt,`RPC '${t}' stream ${o} transport opened.`),B.yo())})),P(S,Pl.EventType.CLOSE,(()=>{U||(U=!0,me(Xt,`RPC '${t}' stream ${o} transport closed`),B.So())})),P(S,Pl.EventType.ERROR,(j=>{U||(U=!0,Er(Xt,`RPC '${t}' stream ${o} transport errored:`,j),B.So(new pe(le.UNAVAILABLE,"The operation could not be completed")))})),P(S,Pl.EventType.MESSAGE,(j=>{var F;if(!U){const ee=j.data[0];ft(!!ee);const se=ee,de=se.error||((F=se[0])===null||F===void 0?void 0:F.error);if(de){me(Xt,`RPC '${t}' stream ${o} received error:`,de);const Te=de.status;let re=(function(N){const O=xt[N];if(O!==void 0)return Ib(O)})(Te),I=de.message;re===void 0&&(re=le.INTERNAL,I="Unknown error status: "+Te+" with message "+de.message),U=!0,B.So(new pe(re,I)),S.close()}else me(Xt,`RPC '${t}' stream ${o} received:`,ee),B.bo(ee)}})),P(g,ob.STAT_EVENT,(j=>{j.stat===df.PROXY?me(Xt,`RPC '${t}' stream ${o} detected buffering proxy`):j.stat===df.NOPROXY&&me(Xt,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.wo()}),0),B}}function Yd(){return typeof document<"u"?document:null}function wc(s){return new i1(s,!0)}class $b{constructor(t,a,r=1e3,o=1.5,c=6e4){this.ui=t,this.timerId=a,this.ko=r,this.qo=o,this.Qo=c,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const a=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),o=Math.max(0,a-r);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${a} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),t()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class F1{constructor(t,a,r,o,c,m,g,y){this.ui=t,this.Ho=r,this.Jo=o,this.connection=c,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $b(t,a)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,a){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():a&&a.code===le.RESOURCE_EXHAUSTED?(za(a.toString()),za("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):a&&a.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(a)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),a=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.Yo===a&&this.P_(r,o)}),(r=>{t((()=>{const o=new pe(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(o)}))}))}P_(t,a){const r=this.h_(this.Yo);this.stream=this.T_(t,a),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{r((()=>this.I_(o)))})),this.stream.onMessage((o=>{r((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(t){return me("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return a=>{this.ui.enqueueAndForget((()=>this.Yo===t?a():(me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class q1 extends F1{constructor(t,a,r,o,c,m){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",a,r,o,m),this.serializer=c}T_(t,a){return this.connection.Bo("Listen",t,a)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const a=r1(this.serializer,t),r=(function(c){if(!("targetChange"in c))return Ae.min();const m=c.targetChange;return m.targetIds&&m.targetIds.length?Ae.min():m.readTime?gr(m.readTime):Ae.min()})(t);return this.listener.d_(a,r)}A_(t){const a={};a.database=Wv(this.serializer),a.addTarget=(function(c,m){let g;const y=m.target;if(g=gf(y)?{documents:l1(c,y)}:{query:o1(c,y)._t},g.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){g.resumeToken=Vb(c,m.resumeToken);const v=bf(c,m.expectedCount);v!==null&&(g.expectedCount=v)}else if(m.snapshotVersion.compareTo(Ae.min())>0){g.readTime=Ef(c,m.snapshotVersion.toTimestamp());const v=bf(c,m.expectedCount);v!==null&&(g.expectedCount=v)}return g})(this.serializer,t);const r=c1(this.serializer,t);r&&(a.labels=r),this.a_(a)}R_(t){const a={};a.database=Wv(this.serializer),a.removeTarget=t,this.a_(a)}}class $1 extends class{}{constructor(t,a,r,o){super(),this.authCredentials=t,this.appCheckCredentials=a,this.connection=r,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new pe(le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,a,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Mo(t,Tf(a,r),o,c,m))).catch((c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(le.UNKNOWN,c.toString())}))}Lo(t,a,r,o,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,g])=>this.connection.Lo(t,Tf(a,r),o,m,g,c))).catch((m=>{throw m.name==="FirebaseError"?(m.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new pe(le.UNKNOWN,m.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class G1{constructor(t,a){this.asyncQueue=t,this.onlineStateHandler=a,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const a=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(za(a),this.D_=!1):me("OnlineStateTracker",a)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class K1{constructor(t,a,r,o,c){this.localStore=t,this.datastore=a,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=c,this.k_._o((m=>{r.enqueueAndForget((async()=>{uo(this)&&(me("RemoteStore","Restarting streams for network reachability change."),await(async function(y){const v=ke(y);v.L_.add(4),await oo(v),v.q_.set("Unknown"),v.L_.delete(4),await Nc(v)})(this))}))})),this.q_=new G1(r,o)}}async function Nc(s){if(uo(s))for(const t of s.B_)await t(!0)}async function oo(s){for(const t of s.B_)await t(!1)}function Gb(s,t){const a=ke(s);a.N_.has(t.targetId)||(a.N_.set(t.targetId,t),sm(a)?im(a):Vr(a).r_()&&am(a,t))}function nm(s,t){const a=ke(s),r=Vr(a);a.N_.delete(t),r.r_()&&Kb(a,t),a.N_.size===0&&(r.r_()?r.o_():uo(a)&&a.q_.set("Unknown"))}function am(s,t){if(s.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ae.min())>0){const a=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(a)}Vr(s).A_(t)}function Kb(s,t){s.Q_.xe(t),Vr(s).R_(t)}function im(s){s.Q_=new e1({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>s.N_.get(t)||null,tt:()=>s.datastore.serializer.databaseId}),Vr(s).start(),s.q_.v_()}function sm(s){return uo(s)&&!Vr(s).n_()&&s.N_.size>0}function uo(s){return ke(s).L_.size===0}function Qb(s){s.Q_=void 0}async function Q1(s){s.q_.set("Online")}async function Y1(s){s.N_.forEach(((t,a)=>{am(s,t)}))}async function X1(s,t){Qb(s),sm(s)?(s.q_.M_(t),im(s)):s.q_.set("Unknown")}async function Z1(s,t,a){if(s.q_.set("Online"),t instanceof Ob&&t.state===2&&t.cause)try{await(async function(o,c){const m=c.cause;for(const g of c.targetIds)o.N_.has(g)&&(await o.remoteSyncer.rejectListen(g,m),o.N_.delete(g),o.Q_.removeTarget(g))})(s,t)}catch(r){me("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await a_(s,r)}else if(t instanceof tc?s.Q_.Ke(t):t instanceof Mb?s.Q_.He(t):s.Q_.We(t),!a.isEqual(Ae.min()))try{const r=await qb(s.localStore);a.compareTo(r)>=0&&await(function(c,m){const g=c.Q_.rt(m);return g.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const E=c.N_.get(v);E&&c.N_.set(v,E.withResumeToken(y.resumeToken,m))}})),g.targetMismatches.forEach(((y,v)=>{const E=c.N_.get(y);if(!E)return;c.N_.set(y,E.withResumeToken(Gt.EMPTY_BYTE_STRING,E.snapshotVersion)),Kb(c,y);const S=new Vi(E.target,y,v,E.sequenceNumber);am(c,S)})),c.remoteSyncer.applyRemoteEvent(g)})(s,a)}catch(r){me("RemoteStore","Failed to raise snapshot:",r),await a_(s,r)}}async function a_(s,t,a){if(!so(t))throw t;s.L_.add(1),await oo(s),s.q_.set("Offline"),a||(a=()=>qb(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{me("RemoteStore","Retrying IndexedDB access"),await a(),s.L_.delete(1),await Nc(s)}))}async function i_(s,t){const a=ke(s);a.asyncQueue.verifyOperationInProgress(),me("RemoteStore","RemoteStore received new credentials");const r=uo(a);a.L_.add(3),await oo(a),r&&a.q_.set("Unknown"),await a.remoteSyncer.handleCredentialChange(t),a.L_.delete(3),await Nc(a)}async function J1(s,t){const a=ke(s);t?(a.L_.delete(2),await Nc(a)):t||(a.L_.add(2),await oo(a),a.q_.set("Unknown"))}function Vr(s){return s.K_||(s.K_=(function(a,r,o){const c=ke(a);return c.w_(),new q1(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Eo:Q1.bind(null,s),Ro:Y1.bind(null,s),mo:X1.bind(null,s),d_:Z1.bind(null,s)}),s.B_.push((async t=>{t?(s.K_.s_(),sm(s)?im(s):s.q_.set("Unknown")):(await s.K_.stop(),Qb(s))}))),s.K_}class rm{constructor(t,a,r,o,c){this.asyncQueue=t,this.timerId=a,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,a,r,o,c){const m=Date.now()+r,g=new rm(t,a,m,o,c);return g.start(r),g}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(le.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yb(s,t){if(za("AsyncQueue",`${t}: ${s}`),so(s))return new pe(le.UNAVAILABLE,`${t}: ${s}`);throw s}class yr{constructor(t){this.comparator=t?(a,r)=>t(a,r)||be.comparator(a.key,r.key):(a,r)=>be.comparator(a.key,r.key),this.keyedMap=Hl(),this.sortedSet=new _t(this.comparator)}static emptySet(t){return new yr(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const a=this.keyedMap.get(t);return a?this.sortedSet.indexOf(a):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((a,r)=>(t(a),!1)))}add(t){const a=this.delete(t.key);return a.copy(a.keyedMap.insert(t.key,t),a.sortedSet.insert(t,null))}delete(t){const a=this.get(t);return a?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(a)):this}isEqual(t){if(!(t instanceof yr)||this.size!==t.size)return!1;const a=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;a.hasNext();){const o=a.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((a=>{t.push(a.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,a){const r=new yr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=a,r}}class s_{constructor(){this.W_=new _t(be.comparator)}track(t){const a=t.doc.key,r=this.W_.get(a);r?t.type!==0&&r.type===3?this.W_=this.W_.insert(a,t):t.type===3&&r.type!==1?this.W_=this.W_.insert(a,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.W_=this.W_.insert(a,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.W_=this.W_.insert(a,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.W_=this.W_.remove(a):t.type===1&&r.type===2?this.W_=this.W_.insert(a,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.W_=this.W_.insert(a,{type:2,doc:t.doc}):we():this.W_=this.W_.insert(a,t)}G_(){const t=[];return this.W_.inorderTraversal(((a,r)=>{t.push(r)})),t}}class wr{constructor(t,a,r,o,c,m,g,y,v){this.query=t,this.docs=a,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=m,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(t,a,r,o,c){const m=[];return a.forEach((g=>{m.push({type:0,doc:g})})),new wr(t,a,yr.emptySet(a),m,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ec(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const a=this.docChanges,r=t.docChanges;if(a.length!==r.length)return!1;for(let o=0;o<a.length;o++)if(a[o].type!==r[o].type||!a[o].doc.isEqual(r[o].doc))return!1;return!0}}class W1{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((t=>t.J_()))}}class eN{constructor(){this.queries=r_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(a,r){const o=ke(a),c=o.queries;o.queries=r_(),c.forEach(((m,g)=>{for(const y of g.j_)y.onError(r)}))})(this,new pe(le.ABORTED,"Firestore shutting down"))}}function r_(){return new Or((s=>Tb(s)),Ec)}async function tN(s,t){const a=ke(s);let r=3;const o=t.query;let c=a.queries.get(o);c?!c.H_()&&t.J_()&&(r=2):(c=new W1,r=t.J_()?0:1);try{switch(r){case 0:c.z_=await a.onListen(o,!0);break;case 1:c.z_=await a.onListen(o,!1);break;case 2:await a.onFirstRemoteStoreListen(o)}}catch(m){const g=Yb(m,`Initialization of query '${dr(t.query)}' failed`);return void t.onError(g)}a.queries.set(o,c),c.j_.push(t),t.Z_(a.onlineState),c.z_&&t.X_(c.z_)&&lm(a)}async function nN(s,t){const a=ke(s),r=t.query;let o=3;const c=a.queries.get(r);if(c){const m=c.j_.indexOf(t);m>=0&&(c.j_.splice(m,1),c.j_.length===0?o=t.J_()?0:1:!c.H_()&&t.J_()&&(o=2))}switch(o){case 0:return a.queries.delete(r),a.onUnlisten(r,!0);case 1:return a.queries.delete(r),a.onUnlisten(r,!1);case 2:return a.onLastRemoteStoreUnlisten(r);default:return}}function aN(s,t){const a=ke(s);let r=!1;for(const o of t){const c=o.query,m=a.queries.get(c);if(m){for(const g of m.j_)g.X_(o)&&(r=!0);m.z_=o}}r&&lm(a)}function iN(s,t,a){const r=ke(s),o=r.queries.get(t);if(o)for(const c of o.j_)c.onError(a);r.queries.delete(t)}function lm(s){s.Y_.forEach((t=>{t.next()}))}var Af,l_;(l_=Af||(Af={})).ea="default",l_.Cache="cache";class sN{constructor(t,a,r){this.query=t,this.ta=a,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new wr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let a=!1;return this.na?this.ia(t)&&(this.ta.next(t),a=!0):this.sa(t,this.onlineState)&&(this.oa(t),a=!0),this.ra=t,a}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let a=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),a=!0),a}sa(t,a){if(!t.fromCache||!this.J_())return!0;const r=a!=="Offline";return(!this.options._a||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||a==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const a=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!a)&&this.options.includeMetadataChanges===!0}oa(t){t=wr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==Af.Cache}}class Xb{constructor(t){this.key=t}}class Zb{constructor(t){this.key=t}}class rN{constructor(t,a){this.query=t,this.Ta=a,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pe(),this.mutatedKeys=Pe(),this.Aa=Sb(t),this.Ra=new yr(this.Aa)}get Va(){return this.Ta}ma(t,a){const r=a?a.fa:new s_,o=a?a.Ra:this.Ra;let c=a?a.mutatedKeys:this.mutatedKeys,m=o,g=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((E,S)=>{const C=o.get(E),U=Tc(this.query,S)?S:null,B=!!C&&this.mutatedKeys.has(C.key),P=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let j=!1;C&&U?C.data.isEqual(U.data)?B!==P&&(r.track({type:3,doc:U}),j=!0):this.ga(C,U)||(r.track({type:2,doc:U}),j=!0,(y&&this.Aa(U,y)>0||v&&this.Aa(U,v)<0)&&(g=!0)):!C&&U?(r.track({type:0,doc:U}),j=!0):C&&!U&&(r.track({type:1,doc:C}),j=!0,(y||v)&&(g=!0)),j&&(U?(m=m.add(U),c=P?c.add(E):c.delete(E)):(m=m.delete(E),c=c.delete(E)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const E=this.query.limitType==="F"?m.last():m.first();m=m.delete(E.key),c=c.delete(E.key),r.track({type:1,doc:E})}return{Ra:m,fa:r,ns:g,mutatedKeys:c}}ga(t,a){return t.hasLocalMutations&&a.hasCommittedMutations&&!a.hasLocalMutations}applyChanges(t,a,r,o){const c=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const m=t.fa.G_();m.sort(((E,S)=>(function(U,B){const P=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return P(U)-P(B)})(E.type,S.type)||this.Aa(E.doc,S.doc))),this.pa(r),o=o!=null&&o;const g=a&&!o?this.ya():[],y=this.da.size===0&&this.current&&!o?1:0,v=y!==this.Ea;return this.Ea=y,m.length!==0||v?{snapshot:new wr(this.query,t.Ra,c,m,t.mutatedKeys,y===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:g}:{wa:g}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new s_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach((a=>this.Ta=this.Ta.add(a))),t.modifiedDocuments.forEach((a=>{})),t.removedDocuments.forEach((a=>this.Ta=this.Ta.delete(a))),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Pe(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const a=[];return t.forEach((r=>{this.da.has(r)||a.push(new Zb(r))})),this.da.forEach((r=>{t.has(r)||a.push(new Xb(r))})),a}ba(t){this.Ta=t.Ts,this.da=Pe();const a=this.ma(t.documents);return this.applyChanges(a,!0)}Da(){return wr.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class lN{constructor(t,a,r){this.query=t,this.targetId=a,this.view=r}}class oN{constructor(t){this.key=t,this.va=!1}}class uN{constructor(t,a,r,o,c,m){this.localStore=t,this.remoteStore=a,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=m,this.Ca={},this.Fa=new Or((g=>Tb(g)),Ec),this.Ma=new Map,this.xa=new Set,this.Oa=new _t(be.comparator),this.Na=new Map,this.La=new Wf,this.Ba={},this.ka=new Map,this.qa=xr.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function cN(s,t,a=!0){const r=n0(s);let o;const c=r.Fa.get(t);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.Da()):o=await Jb(r,t,a,!0),o}async function hN(s,t){const a=n0(s);await Jb(a,t,!0,!1)}async function Jb(s,t,a,r){const o=await L1(s.localStore,ra(t)),c=o.targetId,m=s.sharedClientState.addLocalQueryTarget(c,a);let g;return r&&(g=await dN(s,t,c,m==="current",o.resumeToken)),s.isPrimaryClient&&a&&Gb(s.remoteStore,o),g}async function dN(s,t,a,r,o){s.Ka=(S,C,U)=>(async function(P,j,F,ee){let se=j.view.ma(F);se.ns&&(se=await e_(P.localStore,j.query,!1).then((({documents:I})=>j.view.ma(I,se))));const de=ee&&ee.targetChanges.get(j.targetId),Te=ee&&ee.targetMismatches.get(j.targetId)!=null,re=j.view.applyChanges(se,P.isPrimaryClient,de,Te);return u_(P,j.targetId,re.wa),re.snapshot})(s,S,C,U);const c=await e_(s.localStore,t,!0),m=new rN(t,c.Ts),g=m.ma(c.documents),y=lo.createSynthesizedTargetChangeForCurrentChange(a,r&&s.onlineState!=="Offline",o),v=m.applyChanges(g,s.isPrimaryClient,y);u_(s,a,v.wa);const E=new lN(t,a,m);return s.Fa.set(t,E),s.Ma.has(a)?s.Ma.get(a).push(t):s.Ma.set(a,[t]),v.snapshot}async function fN(s,t,a){const r=ke(s),o=r.Fa.get(t),c=r.Ma.get(o.targetId);if(c.length>1)return r.Ma.set(o.targetId,c.filter((m=>!Ec(m,t)))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Sf(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),a&&nm(r.remoteStore,o.targetId),xf(r,o.targetId)})).catch(Hf)):(xf(r,o.targetId),await Sf(r.localStore,o.targetId,!0))}async function mN(s,t){const a=ke(s),r=a.Fa.get(t),o=a.Ma.get(r.targetId);a.isPrimaryClient&&o.length===1&&(a.sharedClientState.removeLocalQueryTarget(r.targetId),nm(a.remoteStore,r.targetId))}async function Wb(s,t){const a=ke(s);try{const r=await O1(a.localStore,t);t.targetChanges.forEach(((o,c)=>{const m=a.Na.get(c);m&&(ft(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?m.va=!0:o.modifiedDocuments.size>0?ft(m.va):o.removedDocuments.size>0&&(ft(m.va),m.va=!1))})),await t0(a,r,t)}catch(r){await Hf(r)}}function o_(s,t,a){const r=ke(s);if(r.isPrimaryClient&&a===0||!r.isPrimaryClient&&a===1){const o=[];r.Fa.forEach(((c,m)=>{const g=m.view.Z_(t);g.snapshot&&o.push(g.snapshot)})),(function(m,g){const y=ke(m);y.onlineState=g;let v=!1;y.queries.forEach(((E,S)=>{for(const C of S.j_)C.Z_(g)&&(v=!0)})),v&&lm(y)})(r.eventManager,t),o.length&&r.Ca.d_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function pN(s,t,a){const r=ke(s);r.sharedClientState.updateQueryState(t,"rejected",a);const o=r.Na.get(t),c=o&&o.key;if(c){let m=new _t(be.comparator);m=m.insert(c,Jt.newNoDocument(c,Ae.min()));const g=Pe().add(c),y=new xc(Ae.min(),new Map,new _t(Ke),m,g);await Wb(r,y),r.Oa=r.Oa.remove(c),r.Na.delete(t),om(r)}else await Sf(r.localStore,t,!1).then((()=>xf(r,t,a))).catch(Hf)}function xf(s,t,a=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Ma.get(t))s.Fa.delete(r),a&&s.Ca.$a(r,a);s.Ma.delete(t),s.isPrimaryClient&&s.La.gr(t).forEach((r=>{s.La.containsKey(r)||e0(s,r)}))}function e0(s,t){s.xa.delete(t.path.canonicalString());const a=s.Oa.get(t);a!==null&&(nm(s.remoteStore,a),s.Oa=s.Oa.remove(t),s.Na.delete(a),om(s))}function u_(s,t,a){for(const r of a)r instanceof Xb?(s.La.addReference(r.key,t),gN(s,r)):r instanceof Zb?(me("SyncEngine","Document no longer in limbo: "+r.key),s.La.removeReference(r.key,t),s.La.containsKey(r.key)||e0(s,r.key)):we()}function gN(s,t){const a=t.key,r=a.path.canonicalString();s.Oa.get(a)||s.xa.has(r)||(me("SyncEngine","New document in limbo: "+a),s.xa.add(r),om(s))}function om(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const t=s.xa.values().next().value;s.xa.delete(t);const a=new be(ot.fromString(t)),r=s.qa.next();s.Na.set(r,new oN(a)),s.Oa=s.Oa.insert(a,r),Gb(s.remoteStore,new Vi(ra(bb(a.path)),r,"TargetPurposeLimboResolution",Ff.oe))}}async function t0(s,t,a){const r=ke(s),o=[],c=[],m=[];r.Fa.isEmpty()||(r.Fa.forEach(((g,y)=>{m.push(r.Ka(y,t,a).then((v=>{var E;if((v||a)&&r.isPrimaryClient){const S=v?!v.fromCache:(E=a?.targetChanges.get(y.targetId))===null||E===void 0?void 0:E.current;r.sharedClientState.updateQueryState(y.targetId,S?"current":"not-current")}if(v){o.push(v);const S=tm.Wi(y.targetId,v);c.push(S)}})))})),await Promise.all(m),r.Ca.d_(o),await(async function(y,v){const E=ke(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>ne.forEach(v,(C=>ne.forEach(C.$i,(U=>E.persistence.referenceDelegate.addReference(S,C.targetId,U))).next((()=>ne.forEach(C.Ui,(U=>E.persistence.referenceDelegate.removeReference(S,C.targetId,U)))))))))}catch(S){if(!so(S))throw S;me("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const C=S.targetId;if(!S.fromCache){const U=E.os.get(C),B=U.snapshotVersion,P=U.withLastLimboFreeSnapshotVersion(B);E.os=E.os.insert(C,P)}}})(r.localStore,c))}async function yN(s,t){const a=ke(s);if(!a.currentUser.isEqual(t)){me("SyncEngine","User change. New user:",t.toKey());const r=await Fb(a.localStore,t);a.currentUser=t,(function(c,m){c.ka.forEach((g=>{g.forEach((y=>{y.reject(new pe(le.CANCELLED,m))}))})),c.ka.clear()})(a,"'waitForPendingWrites' promise is rejected due to a user change."),a.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await t0(a,r.hs)}}function vN(s,t){const a=ke(s),r=a.Na.get(t);if(r&&r.va)return Pe().add(r.key);{let o=Pe();const c=a.Ma.get(t);if(!c)return o;for(const m of c){const g=a.Fa.get(m);o=o.unionWith(g.view.Va)}return o}}function n0(s){const t=ke(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=Wb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=pN.bind(null,t),t.Ca.d_=aN.bind(null,t.eventManager),t.Ca.$a=iN.bind(null,t.eventManager),t}class gc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=wc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,a){return null}Ha(t,a){return null}za(t){return M1(this.persistence,new D1,t.initialUser,this.serializer)}Ga(t){return new R1(em.Zr,this.serializer)}Wa(t){return new k1}async terminate(){var t,a;(t=this.gcScheduler)===null||t===void 0||t.stop(),(a=this.indexBackfillerScheduler)===null||a===void 0||a.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gc.provider={build:()=>new gc};class wf{async initialize(t,a){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(a),this.remoteStore=this.createRemoteStore(a),this.eventManager=this.createEventManager(a),this.syncEngine=this.createSyncEngine(a,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>o_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yN.bind(null,this.syncEngine),await J1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new eN})()}createDatastore(t){const a=wc(t.databaseInfo.databaseId),r=(function(c){return new H1(c)})(t.databaseInfo);return(function(c,m,g,y){return new $1(c,m,g,y)})(t.authCredentials,t.appCheckCredentials,r,a)}createRemoteStore(t){return(function(r,o,c,m,g){return new K1(r,o,c,m,g)})(this.localStore,this.datastore,t.asyncQueue,(a=>o_(this.syncEngine,a,0)),(function(){return n_.D()?new n_:new B1})())}createSyncEngine(t,a){return(function(o,c,m,g,y,v,E){const S=new uN(o,c,m,g,y,v);return E&&(S.Qa=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,a)}async terminate(){var t,a;await(async function(o){const c=ke(o);me("RemoteStore","RemoteStore shutting down."),c.L_.add(5),await oo(c),c.k_.shutdown(),c.q_.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(a=this.eventManager)===null||a===void 0||a.terminate()}}wf.provider={build:()=>new wf};class _N{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):za("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,a){setTimeout((()=>{this.muted||t(a)}),0)}}class bN{constructor(t,a,r,o,c){this.authCredentials=t,this.appCheckCredentials=a,this.asyncQueue=r,this.databaseInfo=o,this.user=Zt.UNAUTHENTICATED,this.clientId=cw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async m=>{me("FirestoreClient","Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(r,(m=>(me("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(a){const r=Yb(a,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function Xd(s,t){s.asyncQueue.verifyOperationInProgress(),me("FirestoreClient","Initializing OfflineComponentProvider");const a=s.configuration;await t.initialize(a);let r=a.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await Fb(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function c_(s,t){s.asyncQueue.verifyOperationInProgress();const a=await EN(s);me("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(a,s.configuration),s.setCredentialChangeListener((r=>i_(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>i_(t.remoteStore,o))),s._onlineComponents=t}async function EN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){me("FirestoreClient","Using user provided OfflineComponentProvider");try{await Xd(s,s._uninitializedComponentsProvider._offline)}catch(t){const a=t;if(!(function(o){return o.name==="FirebaseError"?o.code===le.FAILED_PRECONDITION||o.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(a))throw a;Er("Error using user provided cache. Falling back to memory cache: "+a),await Xd(s,new gc)}}else me("FirestoreClient","Using default OfflineComponentProvider"),await Xd(s,new gc);return s._offlineComponents}async function TN(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(me("FirestoreClient","Using user provided OnlineComponentProvider"),await c_(s,s._uninitializedComponentsProvider._online)):(me("FirestoreClient","Using default OnlineComponentProvider"),await c_(s,new wf))),s._onlineComponents}async function SN(s){const t=await TN(s),a=t.eventManager;return a.onListen=cN.bind(null,t.syncEngine),a.onUnlisten=fN.bind(null,t.syncEngine),a.onFirstRemoteStoreListen=hN.bind(null,t.syncEngine),a.onLastRemoteStoreUnlisten=mN.bind(null,t.syncEngine),a}function AN(s,t,a={}){const r=new bs;return s.asyncQueue.enqueueAndForget((async()=>(function(c,m,g,y,v){const E=new _N({next:C=>{E.Za(),m.enqueueAndForget((()=>nN(c,S))),C.fromCache&&y.source==="server"?v.reject(new pe(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(C)},error:C=>v.reject(C)}),S=new sN(g,E,{includeMetadataChanges:!0,_a:!0});return tN(c,S)})(await SN(s),s.asyncQueue,t,a,r))),r.promise}function a0(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}const h_=new Map;function xN(s,t,a,r){if(t===!0&&r===!0)throw new pe(le.INVALID_ARGUMENT,`${s} and ${a} cannot be used together.`)}function d_(s){if(be.isDocumentKey(s))throw new pe(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Rc(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":we()}function Nf(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new pe(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const a=Rc(s);throw new pe(le.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${a}`)}}return s}class f_{constructor(t){var a,r;if(t.host===void 0){if(t.ssl!==void 0)throw new pe(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(a=t.ssl)===null||a===void 0||a;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new pe(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}xN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a0((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new pe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new pe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new pe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class um{constructor(t,a,r,o){this._authCredentials=t,this._appCheckCredentials=a,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new f_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new pe(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new f_(t),t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new nw;switch(r.type){case"firstParty":return new rw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(a){const r=h_.get(a);r&&(me("ComponentProvider","Removing Datastore"),h_.delete(a),r.terminate())})(this),Promise.resolve()}}function wN(s,t,a,r={}){var o;const c=(s=Nf(s,um))._getSettings(),m=`${t}:${a}`;if(c.host!=="firestore.googleapis.com"&&c.host!==m&&Er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},c),{host:m,ssl:!1})),r.mockUserToken){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=Zt.MOCK_USER;else{g=UA(r.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new pe(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Zt(v)}s._authCredentials=new aw(new hb(g,y))}}class Pi{constructor(t,a,r){this.converter=a,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Pi(this.firestore,t,this._query)}}class Fa{constructor(t,a,r){this.converter=a,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Fa(this.firestore,t,this._key)}}class vr extends Pi{constructor(t,a,r){super(t,a,bb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Fa(this.firestore,null,new be(t))}withConverter(t){return new vr(this.firestore,t,this._path)}}function NN(s,t,...a){if(s=oc(s),s instanceof um){const r=ot.fromString(t,...a);return d_(r),new vr(s,null,r)}{if(!(s instanceof Fa||s instanceof vr))throw new pe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ot.fromString(t,...a));return d_(r),new vr(s.firestore,null,r)}}class m_{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $b(this,"async_queue_retry"),this.Vu=()=>{const r=Yd();r&&me("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=t;const a=Yd();a&&typeof a.addEventListener=="function"&&a.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const a=Yd();a&&typeof a.removeEventListener=="function"&&a.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise((()=>{}));const a=new bs;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(t().then(a.resolve,a.reject),a.promise))).then((()=>a.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Pu.push(t),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!so(t))throw t;me("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(t){const a=this.mu.then((()=>(this.du=!0,t().catch((r=>{this.Eu=r,this.du=!1;const o=(function(m){let g=m.message||"";return m.stack&&(g=m.stack.includes(m.message)?m.stack:m.message+`
`+m.stack),g})(r);throw za("INTERNAL UNHANDLED ERROR: ",o),r})).then((r=>(this.du=!1,r))))));return this.mu=a,a}enqueueAfterDelay(t,a,r){this.fu(),this.Ru.indexOf(t)>-1&&(a=0);const o=rm.createAndSchedule(this,t,a,r,(c=>this.yu(c)));return this.Tu.push(o),o}fu(){this.Eu&&we()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const a of this.Tu)if(a.timerId===t)return!0;return!1}bu(t){return this.wu().then((()=>{this.Tu.sort(((a,r)=>a.targetTimeMs-r.targetTimeMs));for(const a of this.Tu)if(a.skipDelay(),t!=="all"&&a.timerId===t)break;return this.wu()}))}Du(t){this.Ru.push(t)}yu(t){const a=this.Tu.indexOf(t);this.Tu.splice(a,1)}}class i0 extends um{constructor(t,a,r,o){super(t,a,r,o),this.type="firestore",this._queue=new m_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new m_(t),this._firestoreClient=void 0,await t}}}function RN(s,t){const a=typeof s=="object"?s:Gx(),r=typeof s=="string"?s:"(default)",o=Hx(a,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=VA("firestore");c&&wN(o,...c)}return o}function CN(s){if(s._terminated)throw new pe(le.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||jN(s),s._firestoreClient}function jN(s){var t,a,r;const o=s._freezeSettings(),c=(function(g,y,v,E){return new bw(g,y,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,a0(E.experimentalLongPollingOptions),E.useFetchStreams)})(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((a=o.localCache)===null||a===void 0)&&a._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new bN(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&(function(g){const y=g?._online.build();return{_offline:g?._offline.build(y),_online:y}})(s._componentsProvider))}class Nr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Nr(Gt.fromBase64String(t))}catch(a){throw new pe(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+a)}}static fromUint8Array(t){return new Nr(Gt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class s0{constructor(...t){for(let a=0;a<t.length;++a)if(t[a].length===0)throw new pe(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class r0{constructor(t){this._methodName=t}}class cm{constructor(t,a){if(!isFinite(t)||t<-90||t>90)throw new pe(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(a)||a<-180||a>180)throw new pe(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+a);this._lat=t,this._long=a}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ke(this._lat,t._lat)||Ke(this._long,t._long)}}class hm{constructor(t){this._values=(t||[]).map((a=>a))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,t._values)}}const DN=/^__.*__$/;function l0(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class dm{constructor(t,a,r,o,c,m){this.settings=t,this.databaseId=a,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.vu(),this.fieldTransforms=c||[],this.fieldMask=m||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new dm(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var a;const r=(a=this.path)===null||a===void 0?void 0:a.child(t),o=this.Fu({path:r,xu:!1});return o.Ou(t),o}Nu(t){var a;const r=(a=this.path)===null||a===void 0?void 0:a.child(t),o=this.Fu({path:r,xu:!1});return o.vu(),o}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return Rf(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find((a=>t.isPrefixOf(a)))!==void 0||this.fieldTransforms.find((a=>t.isPrefixOf(a.field)))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(l0(this.Cu)&&DN.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class IN{constructor(t,a,r){this.databaseId=t,this.ignoreUndefinedProperties=a,this.serializer=r||wc(t)}Qu(t,a,r,o=!1){return new dm({Cu:t,methodName:a,qu:r,path:Wt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function MN(s){const t=s._freezeSettings(),a=wc(s._databaseId);return new IN(s._databaseId,!!t.ignoreUndefinedProperties,a)}function ON(s,t,a,r=!1){return fm(a,s.Qu(r?4:3,t))}function fm(s,t){if(o0(s=oc(s)))return LN("Unsupported field value:",t,s),VN(s,t);if(s instanceof r0)return(function(r,o){if(!l0(o.Cu))throw o.Bu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return(function(r,o){const c=[];let m=0;for(const g of r){let y=fm(g,o.Lu(m));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),m++}return{arrayValue:{values:c}}})(s,t)}return(function(r,o){if((r=oc(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Hw(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=jt.fromDate(r);return{timestampValue:Ef(o.serializer,c)}}if(r instanceof jt){const c=new jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ef(o.serializer,c)}}if(r instanceof cm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nr)return{bytesValue:Vb(o.serializer,r._byteString)};if(r instanceof Fa){const c=o.databaseId,m=r.firestore._databaseId;if(!m.isEqual(c))throw o.Bu(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Lb(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof hm)return(function(m,g){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:m.toArray().map((y=>{if(typeof y!="number")throw g.Bu("VectorValues must only contain numeric values.");return Yf(g.serializer,y)}))}}}}}})(r,o);throw o.Bu(`Unsupported field value: ${Rc(r)}`)})(s,t)}function VN(s,t){const a={};return db(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ro(s,((r,o)=>{const c=fm(o,t.Mu(r));c!=null&&(a[r]=c)})),{mapValue:{fields:a}}}function o0(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof jt||s instanceof cm||s instanceof Nr||s instanceof Fa||s instanceof r0||s instanceof hm)}function LN(s,t,a){if(!o0(a)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(a)){const r=Rc(a);throw r==="an object"?t.Bu(s+" a custom object"):t.Bu(s+" "+r)}}const UN=new RegExp("[~\\*/\\[\\]]");function kN(s,t,a){if(t.search(UN)>=0)throw Rf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,a);try{return new s0(...t.split("."))._internalPath}catch{throw Rf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,a)}}function Rf(s,t,a,r,o){const c=r&&!r.isEmpty(),m=o!==void 0;let g=`Function ${t}() called with invalid data`;a&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(c||m)&&(y+=" (found",c&&(y+=` in field ${r}`),m&&(y+=` in document ${o}`),y+=")"),new pe(le.INVALID_ARGUMENT,g+s+y)}class u0{constructor(t,a,r,o,c){this._firestore=t,this._userDataWriter=a,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Fa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new BN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const a=this._document.data.field(mm("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a)}}}class BN extends u0{data(){return super.data()}}function mm(s,t){return typeof t=="string"?kN(s,t):t instanceof s0?t._internalPath:t._delegate._internalPath}function zN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new pe(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pm{}class gm extends pm{}function PN(s,t,...a){let r=[];t instanceof pm&&r.push(t),r=r.concat(a),(function(c){const m=c.filter((y=>y instanceof vm)).length,g=c.filter((y=>y instanceof ym)).length;if(m>1||m>0&&g>0)throw new pe(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class ym extends gm{constructor(t,a,r){super(),this._field=t,this._op=a,this._value=r,this.type="where"}static _create(t,a,r){return new ym(t,a,r)}_apply(t){const a=this._parse(t);return c0(t._query,a),new Pi(t.firestore,t.converter,yf(t._query,a))}_parse(t){const a=MN(t.firestore);return(function(c,m,g,y,v,E,S){let C;if(v.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new pe(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){g_(S,E);const U=[];for(const B of S)U.push(p_(y,c,B));C={arrayValue:{values:U}}}else C=p_(y,c,S)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||g_(S,E),C=ON(g,m,S,E==="in"||E==="not-in");return wt.create(v,E,C)})(t._query,"where",a,t.firestore._databaseId,this._field,this._op,this._value)}}class vm extends pm{constructor(t,a){super(),this.type=t,this._queryConstraints=a}static _create(t,a){return new vm(t,a)}_parse(t){const a=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return a.length===1?a[0]:$n.create(a,this._getOperator())}_apply(t){const a=this._parse(t);return a.getFilters().length===0?t:((function(o,c){let m=o;const g=c.getFlattenedFilters();for(const y of g)c0(m,y),m=yf(m,y)})(t._query,a),new Pi(t.firestore,t.converter,yf(t._query,a)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _m extends gm{constructor(t,a){super(),this._field=t,this._direction=a,this.type="orderBy"}static _create(t,a){return new _m(t,a)}_apply(t){const a=(function(o,c,m){if(o.startAt!==null)throw new pe(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new pe(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new to(c,m)})(t._query,this._field,this._direction);return new Pi(t.firestore,t.converter,(function(o,c){const m=o.explicitOrderBy.concat([c]);return new Mr(o.path,o.collectionGroup,m,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(t._query,a))}}function HN(s,t="asc"){const a=t,r=mm("orderBy",s);return _m._create(r,a)}class bm extends gm{constructor(t,a,r){super(),this.type=t,this._limit=a,this._limitType=r}static _create(t,a,r){return new bm(t,a,r)}_apply(t){return new Pi(t.firestore,t.converter,fc(t._query,this._limit,this._limitType))}}function FN(s){return bm._create("limit",s,"F")}function p_(s,t,a){if(typeof(a=oc(a))=="string"){if(a==="")throw new pe(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Eb(t)&&a.indexOf("/")!==-1)throw new pe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${a}' contains a '/' character.`);const r=t.path.child(ot.fromString(a));if(!be.isDocumentKey(r))throw new pe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Uv(s,new be(r))}if(a instanceof Fa)return Uv(s,a._key);throw new pe(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rc(a)}.`)}function g_(s,t){if(!Array.isArray(s)||s.length===0)throw new pe(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function c0(s,t){const a=(function(o,c){for(const m of o)for(const g of m.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(a!==null)throw a===t.op?new pe(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new pe(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${a.toString()}' filters.`)}class qN{convertValue(t,a="none"){switch(As(t)){case 0:return null;case 1:return t.booleanValue;case 2:return vt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,a);case 5:return t.stringValue;case 6:return this.convertBytes(Ss(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,a);case 11:return this.convertObject(t.mapValue,a);case 10:return this.convertVectorValue(t.mapValue);default:throw we()}}convertObject(t,a){return this.convertObjectMap(t.fields,a)}convertObjectMap(t,a="none"){const r={};return ro(t,((o,c)=>{r[o]=this.convertValue(c,a)})),r}convertVectorValue(t){var a,r,o;const c=(o=(r=(a=t.fields)===null||a===void 0?void 0:a.value.arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map((m=>vt(m.doubleValue)));return new hm(c)}convertGeoPoint(t){return new cm(vt(t.latitude),vt(t.longitude))}convertArray(t,a){return(t.values||[]).map((r=>this.convertValue(r,a)))}convertServerTimestamp(t,a){switch(a){case"previous":const r=$f(t);return r==null?null:this.convertValue(r,a);case"estimate":return this.convertTimestamp(Jl(t));default:return null}}convertTimestamp(t){const a=Bi(t);return new jt(a.seconds,a.nanos)}convertDocumentKey(t,a){const r=ot.fromString(t);ft(Hb(r));const o=new Wl(r.get(1),r.get(3)),c=new be(r.popFirst(5));return o.isEqual(a)||za(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${a.projectId}/${a.database}) instead.`),c}}class Yu{constructor(t,a){this.hasPendingWrites=t,this.fromCache=a}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class $N extends u0{constructor(t,a,r,o,c,m){super(t,a,r,o,m),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const a=new nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(a,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,a={}){if(this._document){const r=this._document.data.field(mm("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,a.serverTimestamps)}}}class nc extends $N{data(t={}){return super.data(t)}}class GN{constructor(t,a,r,o){this._firestore=t,this._userDataWriter=a,this._snapshot=o,this.metadata=new Yu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((a=>t.push(a))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,a){this._snapshot.docs.forEach((r=>{t.call(a,new nc(this._firestore,this._userDataWriter,r.key,r,new Yu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const a=!!t.includeMetadataChanges;if(a&&this._snapshot.excludesMetadataChanges)throw new pe(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===a||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let m=0;return o._snapshot.docChanges.map((g=>{const y=new nc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Yu(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:m++}}))}{let m=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const y=new nc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Yu(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return g.type!==0&&(v=m.indexOf(g.doc.key),m=m.delete(g.doc.key)),g.type!==1&&(m=m.add(g.doc),E=m.indexOf(g.doc.key)),{type:KN(g.type),doc:y,oldIndex:v,newIndex:E}}))}})(this,a),this._cachedChangesIncludeMetadataChanges=a),this._cachedChanges}}function KN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}class QN extends qN{constructor(t){super(),this.firestore=t}convertBytes(t){return new Nr(t)}convertReference(t){const a=this.convertDocumentKey(t,this.firestore._databaseId);return new Fa(this.firestore,null,a)}}function YN(s){s=Nf(s,Pi);const t=Nf(s.firestore,i0),a=CN(t),r=new QN(t);return zN(s._query),AN(a,s._query).then((o=>new GN(t,r,s,o)))}(function(t,a=!0){(function(o){Ir=o})($x),cc(new Yl("firestore",((r,{instanceIdentifier:o,options:c})=>{const m=r.getProvider("app").getImmediate(),g=new i0(new iw(r.getProvider("auth-internal")),new ow(r.getProvider("app-check-internal")),(function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new pe(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wl(v.options.projectId,E)})(m,o),m);return c=Object.assign({useFetchStreams:a},c),g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),pr(Iv,"4.7.3",t),pr(Iv,"4.7.3","esm2017")})();var XN="firebase",ZN="10.14.1";pr(XN,ZN,"app");function JN(){return{apiKey:"AIzaSyDEktl9zQMkxiKDMZ1y4IFOALr43wkGtNA",authDomain:"sfdatahub-staging.firebaseapp.com",projectId:"sfdatahub-staging",storageBucket:"sfdatahub-staging.firebasestorage.app",appId:"1:614140423653:web:409d208c5aa68e5029930c"}}function WN(s){const t=Object.entries(s).filter(([,a])=>!a).map(([a])=>a);if(t.length>0)throw new Error(`[Firebase] Missing config values: ${t.join(", ")}. Set VITE_FIREBASE_* env vars before running the app.`)}let Xu=null;function eR(){if(Xu)return Xu;const s=JN();return WN(s),Xu=nb(s),Xu}const tR=eR(),nR=RN(tR),Zd=[{id:"sim-001",status:"success",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-600*1e3),processingMs:4200,fileSizeBytes:31e5,errorCode:null},{id:"sim-002",status:"failed",uploaderId:"ops-03",uploaderName:"Ops  Kaia",guildId:"guild-obsidian",guildName:"Obsidian Pact",uploadedAt:new Date(Date.now()-2700*1e3),processingMs:2900,fileSizeBytes:332e4,errorCode:"pipeline/timeout"},{id:"sim-003",status:"processing",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-720*1e3),processingMs:null,fileSizeBytes:291e4,errorCode:null},{id:"sim-004",status:"success",uploaderId:"ops-04",uploaderName:"Ops  Fynn",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-10800*1e3),processingMs:5600,fileSizeBytes:342e4,errorCode:null},{id:"sim-005",status:"failed",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-300*60*1e3),processingMs:6e3,fileSizeBytes:328e4,errorCode:"ingest/schema-mismatch"}];function aR(){const[s,t]=R.useState(Zd),[a,r]=R.useState(!0),[o,c]=R.useState(!1),[m,g]=R.useState(null),[y,v]=R.useState("all"),[E,S]=R.useState(""),C=R.useCallback(async(j=!1)=>{j&&c(!0);try{const F=NN(nR,"scanUploads"),ee=PN(F,HN("uploadedAt","desc"),FN(100)),de=(await YN(ee)).docs.map(Te=>iR(Te.id,Te.data()));de.length>0?(t(de),g(null)):(t(Zd),g("Keine Live-Daten gefunden, Fallback aktiv."))}catch(F){console.error("[ScansUploaded] Firestore fetch failed",F),t(Zd),g("Live-Daten nicht verfgbar, Fallback aktiv.")}finally{j&&c(!1),r(!1)}},[]);R.useEffect(()=>{C(!1)},[C]);const U=R.useMemo(()=>rR(s),[s]),B=R.useMemo(()=>{const j=E.toLowerCase().trim();return s.filter(F=>!(y!=="all"&&F.status!==y||j&&!`${F.id} ${F.uploaderName??""} ${F.guildName??""}`.toLowerCase().includes(j)))},[s,E,y]),P=B.filter(j=>j.status==="failed");return d.jsxs(ua,{title:"Scans uploaded",description:"Operational analytics for ingestion volume, health, and failure recovery",headerContent:d.jsx(Ha,{title:"Scans uploaded",subtitle:"Operational analytics for ingestion volume, health, and failure recovery",hintRight:"Firestore snapshot  100 items"}),children:[d.jsxs("div",{className:"admin-top",children:[d.jsx("p",{className:"admin-top__hint",children:m??"Live snapshot geladen. Filterbar nach Status und Suchbegriff."}),d.jsx("div",{className:"admin-top__actions",children:d.jsx("button",{type:"button",className:"btn secondary",onClick:()=>void C(!0),children:o?"Refreshing...":"Refresh"})})]}),d.jsxs("div",{className:"admin-filters",children:[d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Status"}),d.jsxs("select",{value:y,onChange:j=>v(j.target.value),children:[d.jsx("option",{value:"all",children:"All"}),d.jsx("option",{value:"success",children:"Success"}),d.jsx("option",{value:"processing",children:"Processing"}),d.jsx("option",{value:"queued",children:"Queued"}),d.jsx("option",{value:"failed",children:"Failed"})]})]}),d.jsxs("label",{className:"filter-control filter-control--grow",children:[d.jsx("span",{children:"Search by id/uploader/guild"}),d.jsx("input",{value:E,onChange:j=>S(j.target.value),placeholder:"Search text"})]})]}),d.jsxs("div",{className:"admin-summary",children:[d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Total uploads"}),d.jsx("strong",{children:Jd(U.totalUploads)})]}),d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Success rate"}),d.jsx("strong",{children:y_(U.successRate)})]}),d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Avg. processing"}),d.jsx("strong",{children:U.avgProcessingMs?Wd(U.avgProcessingMs):""})]}),d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Failed"}),d.jsx("strong",{children:Jd(U.failed)})]})]}),d.jsxs("section",{className:"monitoring-panel",children:[d.jsxs("header",{className:"monitoring-panel__header",children:[d.jsxs("div",{children:[d.jsx("p",{className:"monitoring-panel__eyebrow",children:"Status mix"}),d.jsx("h2",{children:"Pipeline status"})]}),d.jsx("p",{className:"monitoring-panel__meta",children:"Anteil je Status innerhalb des Fensters"})]}),d.jsx("div",{className:"monitoring-panel__grid",children:U.statusBreakdown.map(j=>d.jsxs("div",{children:[d.jsx("p",{className:"monitoring-panel__label",children:ef(j.status)}),d.jsx("p",{className:"monitoring-panel__value",children:Jd(j.count)}),d.jsx("p",{className:"monitoring-panel__meta",children:y_(j.share)})]},j.status))})]}),d.jsxs("section",{className:"monitoring-panel",children:[d.jsxs("header",{className:"monitoring-panel__header",children:[d.jsxs("div",{children:[d.jsx("p",{className:"monitoring-panel__eyebrow",children:"Recent failures"}),d.jsx("h2",{children:"Letzte Fehlversuche"})]}),d.jsx("p",{className:"monitoring-panel__meta",children:"Gefiltert nach Status"})]}),d.jsxs("div",{className:"log-table",children:[P.map(j=>d.jsxs("article",{className:"log-row",children:[d.jsxs("div",{className:"log-row__head",children:[d.jsxs("div",{children:[d.jsx("p",{className:"user-id",children:j.id}),d.jsx("p",{className:"log-row__service",children:j.errorCode??"Unknown issue"})]}),d.jsx("span",{className:"log-badge log-badge--error",children:ef(j.status)})]}),d.jsxs("div",{className:"log-row__body",children:[d.jsxs("span",{className:"log-row__timestamp",children:["Uploader: ",j.uploaderName??j.uploaderId??"?"]}),d.jsxs("span",{className:"log-row__timestamp",children:["Guild: ",j.guildName??j.guildId??"?"]}),d.jsxs("span",{className:"log-row__timestamp",children:["Processing: ",j.processingMs?Wd(j.processingMs):"Pending"]})]})]},j.id)),P.length===0&&d.jsx("div",{className:"placeholder-card",children:d.jsx("p",{children:"No failed uploads in this view."})})]})]}),d.jsxs("section",{className:"monitoring-panel",children:[d.jsxs("header",{className:"monitoring-panel__header",children:[d.jsxs("div",{children:[d.jsx("p",{className:"monitoring-panel__eyebrow",children:"Latest activity"}),d.jsx("h2",{children:"Uploads"})]}),d.jsx("p",{className:"monitoring-panel__meta",children:a?"Loading":`${B.length} records`})]}),d.jsxs("div",{className:"log-table",children:[B.map(j=>d.jsxs("article",{className:"log-row",children:[d.jsxs("div",{className:"log-row__head",children:[d.jsxs("div",{children:[d.jsx("p",{className:"user-id",children:j.id}),d.jsx("p",{className:"log-row__service",children:j.uploaderName??j.uploaderId??"Unknown uploader"})]}),d.jsx("span",{className:"log-badge",style:{borderColor:v_(j.status),color:v_(j.status)},children:ef(j.status)})]}),d.jsxs("div",{className:"log-row__body",children:[d.jsxs("span",{className:"log-row__timestamp",children:["Guild: ",j.guildName??j.guildId??"Unknown guild"]}),d.jsxs("span",{className:"log-row__timestamp",children:["Uploaded: ",j.uploadedAt?j.uploadedAt.toLocaleString():"Unknown"]})]}),d.jsx("div",{className:"log-row__body",children:d.jsxs("span",{className:"log-row__message",children:["Processing: ",j.processingMs?Wd(j.processingMs):"Pending","  File size: ",j.fileSizeBytes?lR(j.fileSizeBytes):"?"]})})]},j.id)),B.length===0&&d.jsx("div",{className:"placeholder-card",children:d.jsx("p",{children:"No uploads match your filters."})})]})]})]})}function iR(s,t){const a=sR(t.status);return{id:s,status:a,uploaderId:typeof t.uploaderId=="string"?t.uploaderId:null,uploaderName:typeof t.uploaderName=="string"?t.uploaderName:null,guildId:typeof t.guildId=="string"?t.guildId:null,guildName:typeof t.guildName=="string"?t.guildName:null,uploadedAt:t.uploadedAt instanceof jt?t.uploadedAt.toDate():t.uploadedAt instanceof Date?t.uploadedAt:null,processingMs:typeof t.processingMs=="number"?t.processingMs:null,fileSizeBytes:typeof t.fileSizeBytes=="number"?t.fileSizeBytes:null,errorCode:typeof t.errorCode=="string"?t.errorCode:null}}function sR(s){return s==="success"||s==="failed"||s==="processing"||s==="queued"?s:"unknown"}function rR(s){const t=new Map;let a=0,r=0,o=0,c=0;const g=Date.now()-1440*60*1e3;let y=0;s.forEach(S=>{t.set(S.status,(t.get(S.status)??0)+1),S.status==="failed"&&(o+=1),S.status==="success"&&(c+=1),S.processingMs!=null&&(a+=S.processingMs,r+=1),S.uploadedAt&&S.uploadedAt.getTime()>=g&&(y+=1)});const v=s.length,E=Array.from(t.entries()).map(([S,C])=>({status:S,count:C,share:v?C/v:0}));return{totalUploads:v,last24h:y,successRate:v?c/v:0,failed:o,avgProcessingMs:r?a/r:null,statusBreakdown:E}}function Jd(s){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(s)}function y_(s){return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:s>0&&s<.1?1:0,maximumFractionDigits:1}).format(s)}function Wd(s){return s<1e3?`${s.toFixed(0)}ms`:`${(s/1e3).toFixed(1)}s`}function lR(s){if(s<=0)return"0 B";const t=["B","KB","MB","GB"];let a=s,r=0;for(;a>=1024&&r<t.length-1;)a/=1024,r+=1;return`${a.toFixed(a>=10?0:1)} ${t[r]}`}function ef(s){switch(s){case"success":return"Success";case"failed":return"Failed";case"processing":return"Processing";case"queued":return"Queued";default:return"Unknown"}}function v_(s){switch(s){case"success":return"#5CC689";case"failed":return"#FF6B6B";case"processing":return"#F9A825";case"queued":return"#5C8BC6";default:return"#8AA5C4"}}const oR=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uR=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,r)=>r?r.toUpperCase():a.toLowerCase()),__=s=>{const t=uR(s);return t.charAt(0).toUpperCase()+t.slice(1)},h0=(...s)=>s.filter((t,a,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===a).join(" ").trim(),cR=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var hR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const dR=R.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:o="",children:c,iconNode:m,...g},y)=>R.createElement("svg",{ref:y,...hR,width:t,height:t,stroke:s,strokeWidth:r?Number(a)*24/Number(t):a,className:h0("lucide",o),...!c&&!cR(g)&&{"aria-hidden":"true"},...g},[...m.map(([v,E])=>R.createElement(v,E)),...Array.isArray(c)?c:[c]]));const Em=(s,t)=>{const a=R.forwardRef(({className:r,...o},c)=>R.createElement(dR,{ref:c,iconNode:t,className:h0(`lucide-${oR(__(s))}`,`lucide-${s}`,r),...o}));return a.displayName=__(s),a};const fR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],mR=Em("frown",fR);const pR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],gR=Em("meh",pR);const yR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],vR=Em("smile",yR),_R=[{id:"FDB-3401",user:"@ArcaneScout",channel:"in-app",submittedAt:"2024-06-19 21:45 UTC",sentiment:"positive",summary:"Guild Hub revamp",detail:"Really like the new roles overview. Could we pin favorite members?",status:"triaged"},{id:"FDB-3398",user:"@ShadowScribe",channel:"discord",submittedAt:"2024-06-19 20:18 UTC",sentiment:"neutral",summary:"Scan delays",detail:"Scans seemed slower tonight (~5m). Was there maintenance?",status:"investigating"},{id:"FDB-3394",user:"@GuildLeader87",channel:"email",submittedAt:"2024-06-19 18:02 UTC",sentiment:"negative",summary:"Roster export",detail:"Export CSV is missing player class data after last update.",status:"open"},{id:"FDB-3389",user:"@PotionMaster",channel:"in-app",submittedAt:"2024-06-19 16:50 UTC",sentiment:"positive",summary:"New timeline",detail:"Timeline filters are great! Would love to save custom presets.",status:"in review"}];function bR(){const[s,t]=R.useState("all"),[a,r]=R.useState("all"),[o,c]=R.useState("all"),[m,g]=R.useState(""),y=R.useMemo(()=>{const E=m.toLowerCase().trim();return _R.filter(S=>!(s!=="all"&&S.sentiment!==s||a!=="all"&&S.status.toLowerCase()!==a||o!=="all"&&S.channel.toLowerCase()!==o||E&&!`${S.summary} ${S.detail} ${S.user}`.toLowerCase().includes(E)))},[o,m,s,a]),v=R.useMemo(()=>({positive:y.filter(E=>E.sentiment==="positive").length,neutral:y.filter(E=>E.sentiment==="neutral").length,negative:y.filter(E=>E.sentiment==="negative").length,total:y.length}),[y]);return d.jsxs(ua,{title:"Feedback overview",description:"Monitor and triage incoming player feedback",headerContent:d.jsx(Ha,{title:"Feedback overview",subtitle:"Monitor and triage incoming player feedback",hintRight:"Sample data"}),children:[d.jsxs("div",{className:"admin-top",children:[d.jsx("p",{className:"admin-top__hint",children:"Realtime wiring mglich; aktuell Demo-Daten."}),d.jsx("div",{className:"admin-top__actions",children:d.jsx("button",{type:"button",className:"btn secondary",children:"Export thread"})})]}),d.jsxs("div",{className:"admin-filters",children:[d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Sentiment"}),d.jsxs("select",{value:s,onChange:E=>t(E.target.value),children:[d.jsx("option",{value:"all",children:"All"}),d.jsx("option",{value:"positive",children:"Positive"}),d.jsx("option",{value:"neutral",children:"Neutral"}),d.jsx("option",{value:"negative",children:"Negative"})]})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Status"}),d.jsxs("select",{value:a,onChange:E=>r(E.target.value),children:[d.jsx("option",{value:"all",children:"All"}),d.jsx("option",{value:"open",children:"Open"}),d.jsx("option",{value:"triaged",children:"Triaged"}),d.jsx("option",{value:"investigating",children:"Investigating"}),d.jsx("option",{value:"in review",children:"In review"})]})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Channel"}),d.jsxs("select",{value:o,onChange:E=>c(E.target.value.toLowerCase()),children:[d.jsx("option",{value:"all",children:"All"}),d.jsx("option",{value:"in-app",children:"In-app"}),d.jsx("option",{value:"discord",children:"Discord"}),d.jsx("option",{value:"email",children:"Email"})]})]}),d.jsxs("label",{className:"filter-control filter-control--grow",children:[d.jsx("span",{children:"Search"}),d.jsx("input",{value:m,onChange:E=>g(E.target.value),placeholder:"Stichwort, User oder Channel"})]})]}),d.jsxs("div",{className:"admin-summary",children:[d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Positive"}),d.jsx("strong",{children:v.positive})]}),d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Neutral"}),d.jsx("strong",{children:v.neutral})]}),d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Negative"}),d.jsx("strong",{children:v.negative})]}),d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Total"}),d.jsx("strong",{children:v.total})]})]}),d.jsxs("div",{className:"page-grid",children:[d.jsx(TR,{}),d.jsx(SR,{})]}),d.jsxs("div",{className:"log-table",children:[y.map(E=>d.jsxs("article",{className:"log-row",children:[d.jsxs("div",{className:"log-row__head",children:[d.jsxs("div",{children:[d.jsx("p",{className:"user-id",children:E.id}),d.jsx("p",{className:"log-row__service",children:E.summary})]}),d.jsxs("div",{className:"log-row__body",children:[d.jsx(ER,{value:E.sentiment}),d.jsx("span",{className:"log-badge",children:E.status})]})]}),d.jsx("div",{className:"log-row__body",children:d.jsx("span",{className:"log-row__message",children:E.detail})}),d.jsxs("div",{className:"log-row__body",children:[d.jsxs("span",{className:"log-row__timestamp",children:["Channel: ",E.channel]}),d.jsxs("span",{className:"log-row__timestamp",children:["Submitted: ",E.submittedAt]}),d.jsxs("span",{className:"log-row__timestamp",children:["User: ",E.user]})]})]},E.id)),y.length===0&&d.jsx("div",{className:"placeholder-card",children:d.jsx("p",{children:"No feedback matches your filters."})})]})]})}function ER({value:s}){const t={positive:{label:"Positive",color:"#38B26C",Icon:vR},neutral:{label:"Neutral",color:"#F9A825",Icon:gR},negative:{label:"Negative",color:"#FF6B6B",Icon:mR}},{label:a,color:r,Icon:o}=t[s];return d.jsxs("span",{className:"log-badge",style:{color:r,borderColor:r},children:[d.jsx(o,{className:"h-4 w-4","aria-hidden":"true"})," ",a]})}function TR(){const s=[{label:"Positive",value:"48%",color:"#38B26C"},{label:"Neutral",value:"32%",color:"#F9A825"},{label:"Negative",value:"20%",color:"#FF6B6B"}];return d.jsxs("div",{className:"placeholder-card",children:[d.jsx("h3",{children:"Sentiment mix"}),d.jsx("ul",{className:"content-shell__list",children:s.map(t=>d.jsxs("li",{style:{color:t.color},children:[t.label,": ",t.value]},t.label))})]})}function SR(){const s=[{label:"Assign to product",detail:"2 waiting"},{label:"Reply templates",detail:"Updated yesterday"},{label:"Quarterly NPS",detail:"Survey closes in 3 days"}];return d.jsxs("div",{className:"placeholder-card",children:[d.jsx("h3",{children:"Follow-ups"}),d.jsx("ul",{className:"content-shell__list",children:s.map(t=>d.jsxs("li",{children:[d.jsx("strong",{children:t.label}),"  ",t.detail]},t.label))})]})}const AR=[{id:"TD-1042",title:"Proxy fr Firestore absichern",description:"Service-Account rotation + limitierte IAM-Rollen hinterlegen.",priority:"High",status:"In Progress",dueDate:"2024-06-24",owners:["@anna","@max"],category:"Security",dependencies:["TD-1040"],comments:5,linked:["API-Key-Management"]},{id:"TD-1041",title:"API-Key-Management UI",description:"Admin-Oberflche fr Key-Erzeugung inkl. Rollen/Scopes.",priority:"High",status:"Open",dueDate:"2024-06-26",owners:["@lisa"],category:"Backend",dependencies:["TD-1038"],comments:3},{id:"TD-1045",title:"Session-TTL anheben (Option A)",description:"Kurzfristig Session-Lifetime hochsetzen (z.B. 8h) fr Dev/Admin-Betrieb; mittelfristig Option C planen, sobald mehr Nutzer aktiv sind. Folge-Task: Session-TTL von 15 min auf X Stunden (JWT + Cookie) anheben und Stellen dokumentieren (Konstanten/ENV/Set-Cookie).",priority:"High",status:"Open",owners:["@max"],category:"Security",comments:2,linked:["TD-1046"]},{id:"TD-1046",title:"Option C vorbereiten: Access + Refresh Token",description:"Aufbauend auf Option A: Access-Token bleibt kurz (ca. 1015 min), Refresh-Token als HTTP-only Cookie mit 730 Tagen Laufzeit. Frontend holt automatisch neue Access-Tokens, solange Refresh gultig ist. Vorteile: Best Practice wie bei groen Web-Apps; kurze Tokens, aber lange Sessions. Nachteile: Mehr Implementierungsaufwand (neuer /auth/refresh Endpoint, Token-Rotation, Fehlerhandling).",priority:"Medium",status:"Open",owners:["@max"],category:"Security",comments:1,linked:["TD-1045"]},{id:"TD-1039",title:"Dashboard-Ansicht optimieren",description:"Responsive Kacheln, mobile Burger-Men finalisieren.",priority:"Medium",status:"In Progress",dueDate:"2024-06-25",owners:["@sam"],category:"Frontend",comments:2},{id:"TD-1036",title:"Rollenmanagement erweitern",description:"Moderatoren-Rollen mit eingeschrnkten Adminrechten hinzufgen.",priority:"High",status:"Blocked",dueDate:"2024-06-22",owners:["@anna"],category:"User Management",dependencies:["TD-1034"],comments:4},{id:"TD-1034",title:"Auth-Flow hrten",description:"2FA Reminder & Session-Refresh-Tokens begrenzen.",priority:"High",status:"Open",dueDate:"2024-06-21",owners:["@max"],category:"Security",comments:6},{id:"TD-1029",title:"Protokollierung fixen",description:"Fehlerhafte Log-Level im Scan-Job korrigieren.",priority:"Medium",status:"Open",owners:["@jamie"],category:"Bugfix",comments:1},{id:"TD-1025",title:"Inline-Filter fr Tasks",description:"Mobile-first Filter UI, schnelle Statuswechsel.",priority:"Low",status:"Done",owners:["@sam"],category:"Frontend"}],b_={Open:"#8AA5C4","In Progress":"#5C8BC6",Blocked:"#F97373",Done:"#38B26C"},E_={High:"#FF6B6B",Medium:"#F9A825",Low:"#5C8BC6"},T_=[{key:"Backend",label:"Backend",hint:"Proxies, APIs, Datenfluss"},{key:"Frontend",label:"Frontend",hint:"UI, Responsiveness"},{key:"User Management",label:"Nutzerverwaltung",hint:"Rollen, Adminrechte"},{key:"Security",label:"Sicherheit",hint:"Auth, Policies"},{key:"Bugfix",label:"Fehlerbehebung",hint:"Protokollierung & Fixes"}];function xR(){const[s,t]=R.useState(""),[a,r]=R.useState(""),[o,c]=R.useState(""),[m,g]=R.useState(""),[y,v]=R.useState(""),E=R.useMemo(()=>AR.filter(j=>{const F=!s||j.title.toLowerCase().includes(s.toLowerCase())||j.description.toLowerCase().includes(s.toLowerCase()),ee=!a||j.status===a,se=!o||j.priority===o,de=!m||j.owners.some(re=>re.toLowerCase().includes(m.toLowerCase())),Te=!y||j.category===y;return F&&ee&&se&&de&&Te}),[y,m,o,s,a]),S=R.useMemo(()=>T_.map(({key:j,label:F,hint:ee})=>({key:j,label:F,hint:ee,items:E.filter(se=>se.category===j)})),[E]),C=E.filter(j=>j.status==="Open").length,U=E.filter(j=>j.status==="In Progress").length,B=E.filter(j=>j.status==="Blocked").length,P=E.filter(j=>j.status==="Done").length;return d.jsxs(ua,{title:"Todo-Liste & Ops-Tasks",description:"Priorisierte Aufgaben nach Kategorien, Status und Verantwortlichen.",headerContent:d.jsx(Ha,{title:"Todo-Liste & Ops-Tasks",subtitle:"Filter, Suche und Inline-Aktionen fr Admin-Aufgaben.",hintRight:"Konzept: Kategorien, Filter, Responsiveness"}),children:[d.jsxs("div",{className:"admin-top",children:[d.jsx("p",{className:"admin-top__hint",children:"Inline-Aktionen (Abhaken/Bearbeiten) und mobile Burger-Navigation sind vorgesehen."}),d.jsx("div",{className:"admin-top__actions",children:d.jsx("button",{type:"button",className:"btn secondary",children:"Neue Aufgabe"})})]}),d.jsxs("div",{className:"admin-filters",children:[d.jsxs("label",{className:"filter-control filter-control--grow",children:[d.jsx("span",{children:"Suche"}),d.jsx("input",{value:s,onChange:j=>t(j.target.value),placeholder:"Titel, Beschreibung oder Stichwort"})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Status"}),d.jsx("select",{value:a,onChange:j=>r(j.target.value),children:["","Open","In Progress","Blocked","Done"].map(j=>d.jsx("option",{value:j,children:j||"Alle"},j||"all"))})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Prioritt"}),d.jsx("select",{value:o,onChange:j=>c(j.target.value),children:["","High","Medium","Low"].map(j=>d.jsx("option",{value:j,children:j||"Alle"},j||"all"))})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Kategorie"}),d.jsx("select",{value:y,onChange:j=>v(j.target.value),children:["",...T_.map(j=>j.key)].map(j=>d.jsx("option",{value:j,children:j||"Alle"},j||"all"))})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Verantwortlicher"}),d.jsx("input",{value:m,onChange:j=>g(j.target.value),placeholder:"@user oder Name"})]})]}),d.jsxs("div",{className:"admin-summary",children:[d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Offen"}),d.jsx("strong",{children:C})]}),d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"In Arbeit"}),d.jsx("strong",{children:U})]}),d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Blockiert"}),d.jsx("strong",{children:B})]}),d.jsxs("div",{className:"summary-card",children:[d.jsx("p",{children:"Erledigt"}),d.jsx("strong",{children:P})]})]}),d.jsxs("div",{className:"page-grid",children:[d.jsxs("div",{className:"placeholder-card",children:[d.jsx("h3",{children:"Drag & Drop"}),d.jsx("p",{children:"Tasks zwischen Status-Spalten verschieben."})]}),d.jsxs("div",{className:"placeholder-card",children:[d.jsx("h3",{children:"Inline-Edit"}),d.jsx("p",{children:"Status, Prioritt oder Due Date direkt anpassen."})]}),d.jsxs("div",{className:"placeholder-card",children:[d.jsx("h3",{children:"Benachrichtigungen"}),d.jsx("p",{children:"Statusnderungen werden Verantwortlichen signalisiert."})]})]}),d.jsx("div",{className:"page-grid",children:S.map(j=>d.jsxs("section",{className:"monitoring-panel",children:[d.jsxs("header",{className:"monitoring-panel__header",children:[d.jsxs("div",{children:[d.jsx("p",{className:"monitoring-panel__eyebrow",children:j.label}),d.jsx("h2",{children:j.hint})]}),d.jsx("button",{type:"button",className:"btn secondary",children:"+ Task"})]}),d.jsxs("div",{className:"log-table",children:[j.items.length===0&&d.jsx("div",{className:"placeholder-card",children:"Keine Aufgaben in dieser Kategorie."}),j.items.map(F=>d.jsxs("article",{className:"log-row",children:[d.jsxs("div",{className:"log-row__head",children:[d.jsxs("div",{children:[d.jsx("p",{className:"user-id",children:F.id}),d.jsx("p",{className:"log-row__service",children:F.title})]}),d.jsxs("div",{className:"log-row__body",children:[d.jsx("span",{className:"log-badge",style:{color:b_[F.status],borderColor:b_[F.status]},children:F.status}),d.jsxs("span",{className:"log-badge",style:{color:E_[F.priority],borderColor:E_[F.priority]},children:["Prio ",F.priority]})]})]}),d.jsxs("div",{className:"log-row__body",children:[d.jsx("span",{className:"log-row__message",children:F.description}),F.linked?.length?d.jsxs("span",{className:"log-row__message",children:["Verknpft: ",F.linked.join(", ")]}):null,F.dependencies?.length?d.jsxs("span",{className:"log-row__message",children:["Abhngigkeiten: ",F.dependencies.join(", ")]}):null]}),d.jsxs("div",{className:"log-row__body",children:[d.jsxs("span",{className:"log-row__timestamp",children:["Due: ",F.dueDate??""]}),d.jsxs("span",{className:"log-row__timestamp",children:["Verantwortliche: ",F.owners.join(", ")]}),F.comments?d.jsxs("span",{className:"log-row__timestamp",children:[F.comments," Kommentare"]}):null]}),d.jsxs("div",{className:"log-row__head",children:[d.jsxs("div",{className:"log-row__body",children:[d.jsx("span",{className:"log-badge log-badge--info",children:"Bearbeiten"}),d.jsx("span",{className:"log-badge log-badge--warning",children:"Abhaken"})]}),d.jsx("span",{className:"log-row__timestamp",children:"Inline-Aktion"})]})]},F.id))]})]},j.key))})]})}const S_=[{id:"auth-api-deploy-staging-powershell",title:"Deploy auth-api to Cloud Functions (staging, PowerShell)",description:"Builds the auth-api and deploys the Cloud Function `authApi` to the `sfdatahub-staging` project (europe-west1, Gen2, Node.js 20). Run from PowerShell on your dev machine.",command:`cd D:\\SFDataHub\\sfdatahub.github.io\\auth-api

npm run build

gcloud functions deploy authApi \`
  --project=sfdatahub-staging \`
  --region=europe-west1 \`
  --gen2 \`
  --runtime=nodejs20 \`
  --source=. \`
  --entry-point=authApi \`
  --trigger-http \`
  --allow-unauthenticated`,shell:"powershell",category:"deploy",repo:"auth-api",environment:"test",dangerLevel:"warning",placeholders:[],notes:"Requires gcloud CLI configured for the sfdatahub-staging project. Run from PowerShell on your local machine in the auth-api folder."},{id:"auth-api-seed-access-control-powershell",title:"Seed Access-Control (auth-api, PowerShell)",description:"Calls the `/internal/seed/access-control` endpoint on auth.sfdatahub.com with the one-time seed token. Use from PowerShell.",command:`$ACCESS_SEED_TOKEN = 'DEIN_TOKEN_AUS_CLOUD_RUN_HIER'

$ACCESS_SEED_TOKEN  # kurz prfen, dass er korrekt angezeigt wird

$headers = @{
    "x-access-seed-token" = $ACCESS_SEED_TOKEN
}

Invoke-RestMethod \`
    -Uri "https://auth.sfdatahub.com/internal/seed/access-control" \`
    -Method POST \`
    -Headers $headers`,shell:"powershell",category:"seed",repo:"auth-api",environment:"prod",dangerLevel:"warning",placeholders:[{name:"DEIN_TOKEN_AUS_CLOUD_RUN_HIER",description:"ACCESS_SEED_TOKEN value copied from Cloud Run / Secret Manager. Replace this placeholder with the real token before running."}],notes:"Use only with the correct one-time seed token from Cloud Run / Secret Manager. This writes access-control config in the auth-api."},{id:"control-panel-deploy-main-powershell",title:"Deploy Control Panel (build + docs + push main)",description:"Builds the control-panel project and docs, then commits and pushes to origin main (GitHub Pages deploy).",command:`cd D:\\SFDataHub\\control-panel
npm run build
npm run build:docs
git add .
git commit -m "update"
git push -u origin main`,shell:"powershell",category:"deploy",repo:"control-panel",environment:"prod",dangerLevel:"warning",placeholders:[],notes:"Runs from your local machine in the control-panel repo and pushes directly to origin main."},{id:"firestore-rules-deploy-main-powershell",title:"Deploy Firestore security rules (main)",description:"Deploys the Firestore security rules to the sfdatahub-main Firebase project.",command:`cd D:\\SFDataHub\\sfdatahub.github.io

firebase deploy --only firestore:rules --project sfdatahub-main`,shell:"powershell",category:"deploy",repo:"main",environment:"prod",dangerLevel:"warning",placeholders:[],notes:"Requires firebase-tools installed and logged in. Run this only after intentional changes to firestore.rules for the sfdatahub-main project."},{id:"main-safe-deploy-no-backup-powershell",title:"Safe Deploy main repo (no local deletions)",description:"Runs the SFDataHub Safe Deploy script for the main repo. Builds for test/beta/main, copies dist  docs without deleting local files, creates 404.html, and pushes to the selected target (test/beta) or creates a release branch and PR link for main.",command:`# ============================================
# SFDataHub  Safe Deploy (KEINE lokalen Lschungen)
# - Build im gewhlten Modus (test | beta | main)
# - dist  docs   (ADD-ONLY, KEIN Spiegeln, KEIN Lschen)
# - 404.html anlegen (SPA-Fallback)
# - Git:
#     * TEST/BETA: Commit & Push auf main (bei Bedarf --force-with-lease)
#     * MAIN:     Release-Branch aus lokalem main + PR-Link (kein Push auf main)
# ============================================

# === Einstellungen anpassen falls ntig ===
$Project = "D:\\SFDataHub\\sfdatahub.github.io"

$RepoTest = "https://github.com/SFDataHub/test.git"
$RepoBeta = "https://github.com/SFDataHub/beta.git"
$RepoMain = "https://github.com/SFDataHub/sfdatahub.github.io.git"

# === Hilfsfunktionen ===
function Fail($m){ throw $m }
function Dir($p){ if(-not(Test-Path $p)){ New-Item -Type Directory -Path $p -Force | Out-Null } }

function Ensure-NodeModules {
  if (-not (Test-Path (Join-Path $Project "node_modules"))) {
    if (Test-Path (Join-Path $Project "package-lock.json")) { npm ci } else { npm install }
  }
}

function Build-Mode {
  param([ValidateSet('test','beta','main')][string]$Mode)
  Write-Host "Baue fr $Mode ..." -ForegroundColor Cyan
  Ensure-NodeModules
  $script = "build:$Mode"
  if (Get-Content (Join-Path $Project "package.json") -Raw | Select-String $script -Quiet) {
    npm run $script
    if ($LASTEXITCODE -ne 0) { Fail "Build-Script $script fehlgeschlagen." }
  } else {
    npx vite build --mode $Mode
    if ($LASTEXITCODE -ne 0) { Fail "Direkter Build (--mode $Mode) fehlgeschlagen." }
  }
  $distIndex = Join-Path $Project "dist\\index.html"
  if (-not (Test-Path $distIndex)) { Fail "dist/index.html fehlt  Build fehlerhaft." }
}

function Update-Docs {
  $Dist = Join-Path $Project "dist"
  $Docs = Join-Path $Project "docs"
  Dir $Docs
  # ADD-ONLY Kopie: keine Lschungen in docs
  robocopy $Dist $Docs *.* /E /NFL /NDL /NJH /NJS /NP | Out-Null
  $docsIndex = Join-Path $Docs "index.html"
  if (Test-Path $docsIndex) {
    Copy-Item $docsIndex (Join-Path $Docs "404.html") -Force
  }
  Write-Host "docs aktualisiert (dist  docs, 404.html erstellt)." -ForegroundColor Cyan
}

function Git-Prep {
  param([string]$RepoUrl, [string]$Branch = "main")
  if (-not (Test-Path (Join-Path $Project ".git"))) { git init }
  $remotes = git remote
  if ($remotes -match "^origin$") { git remote remove origin }
  git remote add origin $RepoUrl
  git checkout -B $Branch
  git fetch origin --prune 2>$null | Out-Null
}

function Push-TestBeta {
  param([string]$RepoUrl, [string]$branchName, [string]$commitMsg)
  Git-Prep -RepoUrl $RepoUrl -Branch $branchName
  # Rebase versuchen, aber KEINE Hard-Resets (keine lokalen Lschungen)
  $hasRemote = $false
  git rev-parse --verify "origin/$branchName" 2>$null | Out-Null
  if ($LASTEXITCODE -eq 0) { $hasRemote = $true }
  if ($hasRemote) {
    git pull --rebase origin $branchName
    if ($LASTEXITCODE -ne 0) { Write-Warning "Rebase fehlgeschlagen  es wird kontrolliert mit --force-with-lease gepusht (Remote wird ersetzt, lokal bleibt unverndert)." }
  }
  git add -A
  git commit -m $commitMsg 2>$null | Out-Null
  git push -u origin $branchName
  if ($LASTEXITCODE -ne 0) {
    Write-Host "Normaler Push fehlgeschlagen  versuche --force-with-lease (nur test/beta)." -ForegroundColor Yellow
    git push -u origin $branchName --force-with-lease
    if ($LASTEXITCODE -ne 0) { Fail "Push fehlgeschlagen. Bitte Ausgabe prfen." }
  }
}

function Release-Main {
  param([string]$RepoUrl, [string]$labelStamp)
  # Lokalen main sanft aktualisieren (KEIN reset --hard)
  if (-not (Test-Path (Join-Path $Project ".git"))) { git init }
  $rem = git remote
  if ($rem -match "^origin$") { git remote remove origin }
  git remote add origin $RepoUrl
  git fetch origin --prune
  git checkout -B main
  git pull --rebase origin main
  if ($LASTEXITCODE -ne 0) { Fail "Rebase auf main fehlgeschlagen. Konflikte lsen (git status), dann erneut ausfhren. Lokale Daten wurden NICHT gelscht." }

  # Release-Branch aus lokalem main abzweigen
  $rel = "release/$labelStamp"
  git checkout -B $rel main

  git add -A
  git commit -m "release(main): distdocs + 404 ($labelStamp)" 2>$null | Out-Null
  git push -u origin $rel
  if ($LASTEXITCODE -ne 0) { Fail "Push des Release-Branches fehlgeschlagen." }

  $pr = "https://github.com/SFDataHub/sfdatahub.github.io/compare/main...$rel?expand=1"
  Write-Host "PR ffnen & mergen: $pr" -ForegroundColor Cyan
}

# === Start ===
if (-not (Test-Path $Project)) { Fail "Projektordner nicht gefunden: $Project" }
Set-Location $Project

Write-Host ""
Write-Host "=== Safe Deploy Men (ohne lokale Lschungen) ===" -ForegroundColor Cyan
Write-Host "1) Build & Publish  TEST   (base=/test/)"
Write-Host "2) Build & Publish  BETA   (base=/beta/)"
Write-Host "3) Build & PR   MAIN       (base=/, Release-Branch + PR)"
Write-Host "0) Abbrechen"
$choice = Read-Host "Whle 0-3"

switch ($choice) {
  '1' {
    $stamp = Get-Date -Format "yyyyMMdd_HHmmss"
    Build-Mode -Mode test
    Update-Docs
    Push-TestBeta -RepoUrl $RepoTest -branchName "main" -commitMsg "publish(test): distdocs + 404 ($stamp)"
    Write-Host " TEST deployed. Pages: Branch=main, Folder=/docs" -ForegroundColor Green
  }
  '2' {
    $stamp = Get-Date -Format "yyyyMMdd_HHmmss"
    Build-Mode -Mode beta
    Update-Docs
    Push-TestBeta -RepoUrl $RepoBeta -branchName "main" -commitMsg "publish(beta): distdocs + 404 ($stamp)"
    Write-Host " BETA deployed. Pages: Branch=main, Folder=/docs" -ForegroundColor Green
  }
  '3' {
    $stamp = Get-Date -Format "yyyyMMdd_HHmmss"
    Build-Mode -Mode main
    Update-Docs
    Release-Main -RepoUrl $RepoMain -labelStamp $stamp
    Write-Host " Release-Branch erstellt & gepusht. Erstelle den PR und merge nach main." -ForegroundColor Green
  }
  default {
    Write-Host "Abgebrochen." -ForegroundColor Yellow
  }
}`,shell:"powershell",category:"deploy",repo:"main",environment:"prod",dangerLevel:"warning",placeholders:[],notes:"Interactive Safe Deploy menu for test/beta/main. Does not delete local files, uses dist  docs copy and creates a main release branch with PR link."},{id:"main-safe-deploy-with-backup-powershell",title:"Safe Deploy main repo (with ZIP backup)",description:"Runs the SFDataHub Safe Deploy script for the main repo with ZIP backup. Creates a backup of the project folder, builds for test/beta/main, copies dist  docs without deleting local files, creates 404.html, and pushes or creates a release branch.",command:`# ============================================
# SFDataHub  Safe Deploy (KEINE lokalen Lschungen)
# - Backup (ZIP) des Projektordners
# - Build im gewhlten Modus (test | beta | main)
# - dist  docs   (ADD-ONLY, KEIN Spiegeln, KEIN Lschen)
# - 404.html anlegen (SPA-Fallback)
# - Git:
#     * TEST/BETA: Commit & Push auf main (bei Bedarf --force-with-lease)
#     * MAIN:     Release-Branch aus lokalem main + PR-Link (kein Push auf main)
# ============================================

# === Einstellungen anpassen falls ntig ===
$Project = "D:\\SFDataHub\\sfdatahub.github.io"
$Backup  = "D:\\SFDataHub\\_backups"

$RepoTest = "https://github.com/SFDataHub/test.git"
$RepoBeta = "https://github.com/SFDataHub/beta.git"
$RepoMain = "https://github.com/SFDataHub/sfdatahub.github.io.git"

# === Hilfsfunktionen ===
function Fail($m){ throw $m }
function Dir($p){ if(-not(Test-Path $p)){ New-Item -Type Directory -Path $p -Force | Out-Null } }

function Backup-Zip {
  param([string]$label)
  Dir $Backup
  $t = Get-Date -Format "yyyyMMdd_HHmmss"
  $zip = Join-Path $Backup ("\${label}_$t.zip")
  if (Test-Path $zip) { Remove-Item $zip -Force }
  Compress-Archive -Path (Join-Path $Project "*") -DestinationPath $zip -Force
  Write-Host "Backup erstellt: $zip" -ForegroundColor Green
  return $t
}

function Ensure-NodeModules {
  if (-not (Test-Path (Join-Path $Project "node_modules"))) {
    if (Test-Path (Join-Path $Project "package-lock.json")) { npm ci } else { npm install }
  }
}

function Build-Mode {
  param([ValidateSet('test','beta','main')][string]$Mode)
  Write-Host "Baue fr $Mode ..." -ForegroundColor Cyan
  Ensure-NodeModules
  $script = "build:$Mode"
  if (Get-Content (Join-Path $Project "package.json") -Raw | Select-String $script -Quiet) {
    npm run $script
    if ($LASTEXITCODE -ne 0) { Fail "Build-Script $script fehlgeschlagen." }
  } else {
    npx vite build --mode $Mode
    if ($LASTEXITCODE -ne 0) { Fail "Direkter Build (--mode $Mode) fehlgeschlagen." }
  }
  $distIndex = Join-Path $Project "dist\\index.html"
  if (-not (Test-Path $distIndex)) { Fail "dist/index.html fehlt  Build fehlerhaft." }
}

function Update-Docs {
  $Dist = Join-Path $Project "dist"
  $Docs = Join-Path $Project "docs"
  Dir $Docs
  # ADD-ONLY Kopie: keine Lschungen in docs
  robocopy $Dist $Docs *.* /E /NFL /NDL /NJH /NJS /NP | Out-Null
  $docsIndex = Join-Path $Docs "index.html"
  if (Test-Path $docsIndex) {
    Copy-Item $docsIndex (Join-Path $Docs "404.html") -Force
  }
  Write-Host "docs aktualisiert (dist  docs, 404.html erstellt)." -ForegroundColor Cyan
}

function Git-Prep {
  param([string]$RepoUrl, [string]$Branch = "main")
  if (-not (Test-Path (Join-Path $Project ".git"))) { git init }
  $remotes = git remote
  if ($remotes -match "^origin$") { git remote remove origin }
  git remote add origin $RepoUrl
  git checkout -B $Branch
  git fetch origin --prune 2>$null | Out-Null
}

function Push-TestBeta {
  param([string]$RepoUrl, [string]$branchName, [string]$commitMsg)
  Git-Prep -RepoUrl $RepoUrl -Branch $branchName
  # Rebase versuchen, aber KEINE Hard-Resets (keine lokalen Lschungen)
  $hasRemote = $false
  git rev-parse --verify "origin/$branchName" 2>$null | Out-Null
  if ($LASTEXITCODE -eq 0) { $hasRemote = $true }
  if ($hasRemote) {
    git pull --rebase origin $branchName
    if ($LASTEXITCODE -ne 0) { Write-Warning "Rebase fehlgeschlagen  es wird kontrolliert mit --force-with-lease gepusht (Remote wird ersetzt, lokal bleibt unverndert)." }
  }
  git add -A
  git commit -m $commitMsg 2>$null | Out-Null
  git push -u origin $branchName
  if ($LASTEXITCODE -ne 0) {
    Write-Host "Normaler Push fehlgeschlagen  versuche --force-with-lease (nur test/beta)." -ForegroundColor Yellow
    git push -u origin $branchName --force-with-lease
    if ($LASTEXITCODE -ne 0) { Fail "Push fehlgeschlagen. Bitte Ausgabe prfen." }
  }
}

function Release-Main {
  param([string]$RepoUrl, [string]$labelStamp)
  # Lokalen main sanft aktualisieren (KEIN reset --hard)
  if (-not (Test-Path (Join-Path $Project ".git"))) { git init }
  $rem = git remote
  if ($rem -match "^origin$") { git remote remove origin }
  git remote add origin $RepoUrl
  git fetch origin --prune
  git checkout -B main
  git pull --rebase origin main
  if ($LASTEXITCODE -ne 0) { Fail "Rebase auf main fehlgeschlagen. Konflikte lsen (git status), dann erneut ausfhren. Lokale Daten wurden NICHT gelscht." }

  # Release-Branch aus lokalem main abzweigen
  $rel = "release/$labelStamp"
  git checkout -B $rel main

  git add -A
  git commit -m "release(main): distdocs + 404 ($labelStamp)" 2>$null | Out-Null
  git push -u origin $rel
  if ($LASTEXITCODE -ne 0) { Fail "Push des Release-Branches fehlgeschlagen." }

  $pr = "https://github.com/SFDataHub/sfdatahub.github.io/compare/main...$rel?expand=1"
  Write-Host "PR ffnen & mergen: $pr" -ForegroundColor Cyan
}

# === Start ===
if (-not (Test-Path $Project)) { Fail "Projektordner nicht gefunden: $Project" }
Set-Location $Project

Write-Host ""
Write-Host "=== Safe Deploy Men (ohne lokale Lschungen) ===" -ForegroundColor Cyan
Write-Host "1) Build & Publish  TEST   (base=/test/)"
Write-Host "2) Build & Publish  BETA   (base=/beta/)"
Write-Host "3) Build & PR   MAIN       (base=/, Release-Branch + PR)"
Write-Host "0) Abbrechen"
$choice = Read-Host "Whle 0-3"

switch ($choice) {
  '1' {
    $stamp = Backup-Zip -label "push_test"
    Build-Mode -Mode test
    Update-Docs
    Push-TestBeta -RepoUrl $RepoTest -branchName "main" -commitMsg "publish(test): distdocs + 404 ($stamp)"
    Write-Host " TEST deployed. Pages: Branch=main, Folder=/docs" -ForegroundColor Green
  }
  '2' {
    $stamp = Backup-Zip -label "push_beta"
    Build-Mode -Mode beta
    Update-Docs
    Push-TestBeta -RepoUrl $RepoBeta -branchName "main" -commitMsg "publish(beta): distdocs + 404 ($stamp)"
    Write-Host " BETA deployed. Pages: Branch=main, Folder=/docs" -ForegroundColor Green
  }
  '3' {
    $stamp = Backup-Zip -label "release_main"
    Build-Mode -Mode main
    Update-Docs
    Release-Main -RepoUrl $RepoMain -labelStamp $stamp
    Write-Host " Release-Branch erstellt & gepusht. Erstelle den PR und merge nach main." -ForegroundColor Green
  }
  default {
    Write-Host "Abgebrochen." -ForegroundColor Yellow
  }
}`,shell:"powershell",category:"deploy",repo:"main",environment:"prod",dangerLevel:"warning",placeholders:[],notes:"Same Safe Deploy menu as the non-backup version, but creates a ZIP backup of the project folder before building and pushing."},{id:"update-stats-cache-player-derived-powershell",title:"Update stats_cache_player_derived (Firestore cache)",description:"Runs the update-player-derived.mts script to refresh the stats_cache_player_derived collection in Firestore.",command:`cd D:\\SFDataHub\\sfdatahub.github.io

# (falls noch nicht gemacht in dieser Windows-Session)
gcloud auth application-default login

# Script ausfhren
npx tsx .\\tools\\update-player-derived.mts`,shell:"powershell",category:"firestore",repo:"main",environment:"prod",dangerLevel:"warning",placeholders:[],notes:"Requires gcloud CLI and application-default credentials for the correct Firebase/Firestore project. Use when you want to recalculate the stats_cache_player_derived collection via the TSX tool script."}];function wR(){const[s,t]=R.useState(null),[a,r]=R.useState(""),[o,c]=R.useState("all"),[m,g]=R.useState("all"),[y,v]=R.useState("all"),[E,S]=R.useState("all"),[C,U]=R.useState(!1),B=S_.length>0,P=R.useMemo(()=>{const F=a.trim().toLowerCase();return S_.filter(ee=>!(F&&!`${ee.title} ${ee.description} ${ee.command}`.toLowerCase().includes(F)||o!=="all"&&ee.category!==o||m!=="all"&&ee.repo!==m||y!=="all"&&ee.environment!==y||E!=="all"&&ee.shell!==E||C&&ee.dangerLevel==="dangerous"))},[o,y,C,m,a,E]),j=async F=>{try{await navigator.clipboard.writeText(F.command),t(F.id),window.setTimeout(()=>t(ee=>ee===F.id?null:ee),1400)}catch(ee){console.error("[CLI Commands] Copy failed",ee)}};return d.jsxs(ua,{title:"CLI Commands",description:"Overview of recurring PowerShell and terminal commands for SFDataHub.",headerContent:d.jsx(Ha,{title:"CLI Commands",subtitle:"Internal helper page for deployments, seeds, and admin scripts.",hintRight:"Admins & Developers only"}),children:[d.jsx("div",{className:"admin-top",children:d.jsx("p",{className:"admin-top__hint",children:"Internal helper page for deployments, seeds and admin scripts. Access is limited to admin and developer roles."})}),d.jsxs("div",{className:"admin-filters",children:[d.jsxs("label",{className:"filter-control filter-control--grow",children:[d.jsx("span",{children:"Search"}),d.jsx("input",{value:a,onChange:F=>r(F.target.value),placeholder:"Search commands..."})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Category"}),d.jsxs("select",{value:o,onChange:F=>c(F.target.value),children:[d.jsx("option",{value:"all",children:"All"}),d.jsx("option",{value:"deploy",children:"Deploy"}),d.jsx("option",{value:"seed",children:"Seed"}),d.jsx("option",{value:"git",children:"Git"}),d.jsx("option",{value:"auth",children:"Auth"}),d.jsx("option",{value:"firestore",children:"Firestore"}),d.jsx("option",{value:"setup",children:"Setup"}),d.jsx("option",{value:"misc",children:"Misc"})]})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Repo"}),d.jsxs("select",{value:m,onChange:F=>g(F.target.value),children:[d.jsx("option",{value:"all",children:"All"}),d.jsx("option",{value:"main",children:"Main"}),d.jsx("option",{value:"control-panel",children:"Control Panel"}),d.jsx("option",{value:"auth-api",children:"Auth API"}),d.jsx("option",{value:"backend",children:"Backend"}),d.jsx("option",{value:"global",children:"Global"})]})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Environment"}),d.jsxs("select",{value:y,onChange:F=>v(F.target.value),children:[d.jsx("option",{value:"all",children:"All"}),d.jsx("option",{value:"local",children:"Local"}),d.jsx("option",{value:"test",children:"Test"}),d.jsx("option",{value:"beta",children:"Beta"}),d.jsx("option",{value:"prod",children:"Prod"}),d.jsx("option",{value:"cloud-shell",children:"Cloud Shell"})]})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Shell"}),d.jsxs("select",{value:E,onChange:F=>S(F.target.value),children:[d.jsx("option",{value:"all",children:"All"}),d.jsx("option",{value:"powershell",children:"PowerShell"}),d.jsx("option",{value:"bash",children:"Bash"})]})]}),d.jsxs("label",{className:"filter-control",children:[d.jsx("span",{children:"Hide dangerous"}),d.jsx("input",{type:"checkbox",checked:C,onChange:F=>U(F.target.checked)})]})]}),d.jsxs("section",{className:"monitoring-panel",children:[d.jsxs("header",{className:"monitoring-panel__header",children:[d.jsxs("div",{children:[d.jsx("p",{className:"monitoring-panel__eyebrow",children:"Command list"}),d.jsx("h2",{children:"Reusable CLI commands"}),d.jsx("p",{className:"monitoring-panel__subtitle",children:"Copy-ready commands for deployments and maintenance. Filters and search are available below."})]}),d.jsx("span",{className:"status-badge status-badge--beta",children:B?`${P.length} commands`:"Empty"})]}),B?d.jsxs("div",{className:"monitoring-panel__grid",children:[P.map(F=>d.jsx(NR,{command:F,onCopy:()=>j(F),copied:s===F.id},F.id)),P.length===0&&d.jsx("div",{className:"placeholder-card",children:d.jsx("p",{className:"monitoring-panel__subtitle",children:"No commands match your filters. Adjust search or filters to see results."})})]}):d.jsx("div",{className:"placeholder-card",children:d.jsxs("p",{className:"monitoring-panel__subtitle",children:["There are currently no CLI commands configured. Edit ",d.jsx("code",{children:"cliCommandsConfig.ts"})," to add your first entries."]})})]})]})}function NR({command:s,onCopy:t,copied:a}){const r=s.dangerLevel==="dangerous"?"status-badge--down":s.dangerLevel==="warning"?"status-badge--warning":"status-badge--ok";return d.jsxs("article",{className:"log-row",style:{borderColor:"#1f3150"},children:[d.jsxs("div",{className:"log-row__head",style:{alignItems:"flex-start"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"user-id",children:s.title}),d.jsx("p",{className:"log-row__message",children:s.description})]}),d.jsxs("div",{className:"log-row__body",style:{gap:"0.35rem",flexWrap:"wrap",justifyContent:"flex-end"},children:[d.jsx("span",{className:`status-badge ${r}`,children:s.dangerLevel}),d.jsx("span",{className:"pill pill--ghost",children:s.category}),d.jsx("span",{className:"pill pill--ghost",children:s.repo}),d.jsx("span",{className:"pill pill--ghost",children:s.environment}),d.jsx("span",{className:"pill pill--ghost",children:s.shell}),s.updatedAt?d.jsxs("span",{className:"pill pill--ghost",children:["updated ",s.updatedAt]}):null]})]}),d.jsxs("div",{className:"log-row__body",style:{display:"grid",gap:"0.5rem"},children:[s.placeholders.length?d.jsx("div",{className:"log-row__message",style:{display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:s.placeholders.map(o=>d.jsx("span",{className:"pill pill--ghost",title:o.description,children:o.name},o.name))}):null,d.jsx("pre",{className:"log-row__message",style:{background:"#0b111d",border:"1px solid #1f3150",borderRadius:"0.75rem",padding:"0.75rem",fontSize:"0.9rem",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"ui-monospace, SFMono-Regular, SFMono, Consolas, Menlo, monospace"},children:s.command})]}),d.jsxs("div",{className:"log-row__head",children:[d.jsx("div",{className:"log-row__body",style:{gap:"0.5rem"},children:s.notes?d.jsx("span",{className:"log-row__message",children:s.notes}):null}),d.jsx("button",{type:"button",className:"btn secondary",onClick:t,children:a?"Copied!":"Copy"})]})]})}function RR(){const[s,t]=R.useState(!1);R.useEffect(()=>{const o=c=>{c.key==="Escape"&&t(!1)};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[]);const a=()=>t(!1),r=()=>t(o=>!o);return d.jsx(xA,{children:d.jsxs("div",{className:"app-shell",children:[d.jsx(SS,{onToggleSidebar:r,isSidebarOpen:s}),d.jsxs("div",{className:"app-body",children:[d.jsx(TS,{open:s,onClose:a}),d.jsx("div",{className:`sidebar-overlay ${s?"is-visible":""}`,onClick:a,"aria-hidden":"true"}),d.jsx("div",{className:"app-content",children:d.jsxs(zT,{children:[d.jsx(Ln,{path:"/",element:d.jsx(IS,{})}),d.jsx(Ln,{path:"/access",element:d.jsx(SA,{})}),d.jsx(Ln,{path:"/users",element:d.jsx(uA,{})}),d.jsx(Ln,{path:"/admin/scans-uploaded",element:d.jsx(aR,{})}),d.jsx(Ln,{path:"/admin/todo",element:d.jsx(xR,{})}),d.jsx(Ln,{path:"/admin/feedback",element:d.jsx(bR,{})}),d.jsx(Ln,{path:"/cli-commands",element:d.jsx(wR,{})}),d.jsx(Ln,{path:"/logs",element:d.jsx(qS,{})}),d.jsx(Ln,{path:"/apis",element:d.jsx(DS,{})}),d.jsx(Ln,{path:"/settings",element:d.jsx($S,{})}),d.jsx(Ln,{path:"*",element:d.jsx(kT,{to:"/",replace:!0})})]})})]})]})})}QE.createRoot(document.getElementById("root")).render(d.jsx(R.StrictMode,{children:d.jsx(uS,{children:d.jsx(vS,{children:d.jsx(RR,{})})})}));
